LavaPack.loadBundle([[5872,{"../../../shared/constants/common":4944,"../../../shared/constants/gas":4949,"../../../shared/constants/swaps":4968,"../../../shared/constants/time":4970,"../../../shared/constants/transaction":4972,"../../../shared/lib/metamask-controller-utils":4978,"../../../shared/lib/transactions-controller-utils":4985,"../../../shared/modules/Numeric":4987,"../../../shared/modules/conversion.utils":4992,"../../../shared/modules/hexstring-utils":4999,"../../../shared/modules/string-utils":5013,"../../../shared/modules/transaction.utils":5015,"../../helpers/constants/error-keys":5879,"../../helpers/constants/routes":5884,"../../helpers/utils/token-util":5923,"../../helpers/utils/transactions.util":5924,"../../helpers/utils/util":5926,"../../pages/confirmations/send/send.constants":6308,"../../pages/confirmations/send/send.utils":6309,"../../pages/swaps/swaps.util":6552,"../../selectors":6572,"../../store/actionConstants":6584,"../../store/actions":6585,"../confirm-transaction/confirm-transaction.duck":5858,"../domains":5860,"../gas/gas.duck":5862,"../metamask/metamask":5866,"./helpers":5870,"./swap-and-send-utils":5873,"@metamask/transaction-controller":2623,"@reduxjs/toolkit":2770,"bignumber.js":3401,"eth-rpc-errors":3720,"ethereumjs-util":3743,lodash:4293,uuid:4872},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.draftTransactionInitialState=n.default=n.computeEstimatedGasLimit=n.addHistoryEntry=n.acknowledgeRecipientWarning=n.SEND_STATUSES=n.SEND_STAGES=n.RECIPIENT_SEARCH_MODES=n.GAS_INPUT_MODES=n.AMOUNT_MODES=void 0,n.editExistingTransaction=function(e,t){return async(n,r)=>{await n(te.clearPreviousDrafts());const a=r(),s=(0,h.getUnapprovedTransactions)(a)[t],o=(0,h.getTargetAccount)(a,s.txParams.from);if(Boolean(a[Q].prevSwapAndSendInput)){const{amountMode:e,amount:{value:r},...s}=a[Q].prevSwapAndSendInput;n(te.addNewDraft({...V,...s,id:t,fromAccount:o,history:[`sendFlow - user clicked edit on transaction with id ${t} (swap and send)`]})),e===$.MAX?(n(te.updateAmountMode($.MAX)),n(te.updateAmountToMax()),n(me())):n(ge(r))}else if(e===w.AssetType.native)await n(te.addNewDraft({...V,id:t,fromAccount:o,gas:{...V.gas,gasLimit:s.txParams.gas,gasPrice:s.txParams.gasPrice},userInputHexData:s.txParams.data,recipient:{...V.recipient,address:s.txParams.to,nickname:(0,h.getAddressBookEntryOrAccountName)(a,s.txParams.to)??""},amount:{...V.amount,value:s.txParams.value},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await n(Te({type:w.AssetType.native},{initialAssetSet:!0}));else{const r=(0,b.parseStandardTokenTransactionData)(s.txParams.data),c=e===w.AssetType.token?(0,O.getTokenValueParam)(r):"1",u=(0,S.getTokenAddressParam)(r),d=(0,h.getAddressBookEntryOrAccountName)(a,u)??"",p=(0,i.addHexPrefix)((0,l.decimalToHex)(c));await n(te.addNewDraft({...V,id:t,fromAccount:o,gas:{...V.gas,gasLimit:s.txParams.gas,gasPrice:s.txParams.gasPrice},userInputHexData:s.txParams.data,recipient:{...V.recipient,address:u,nickname:d},amount:{...V.amount,value:p},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await n(Te({type:e,details:{address:s.txParams.to,...e===w.AssetType.NFT?{tokenId:(0,S.getTokenIdParam)(r)??(0,O.getTokenValueParam)(r)}:{}}},{initialAssetSet:!0}))}await n(X())}},n.gasFeeIsInError=function(e){var t;return Boolean(null===(t=Se(e).gas)||void 0===t?void 0:t.error)},n.getAssetError=function(e){return ve(e).error},n.getBestQuote=void 0,n.getCurrentDraftTransaction=Se,n.getCurrentTransactionUUID=ye,n.getDraftTransactionExists=function(e){const t=Se(e);if(0===Object.keys(t).length)return!1;return!0},n.getDraftTransactionID=function(e){return Se(e).id},n.getGasInputMode=function(e){const t=(0,h.getIsMainnet)(e),n=(0,_.getGasEstimateType)(e),r=(0,h.getAdvancedInlineGasShown)(e);if(e[Q].gasIsSetInModal)return K.CUSTOM;if(!t||r)return K.INLINE;if(t&&n===p.GasEstimateTypes.ethGasPrice)return K.INLINE;return K.BASIC},n.getGasLimit=function(e){var t;return null===(t=Se(e).gas)||void 0===t?void 0:t.gasLimit},n.getGasPrice=function(e){var t;return null===(t=Se(e).gas)||void 0===t?void 0:t.gasPrice},n.getGasTotal=function(e){var t;return null===(t=Se(e).gas)||void 0===t?void 0:t.gasTotal},n.getIsAssetSendable=function(e){var t,n;if((null===(t=ve(e))||void 0===t?void 0:t.type)===w.AssetType.native)return!0;return!1===(null===(n=ve(e))||void 0===n||null===(n=n.details)||void 0===n?void 0:n.isERC721)},n.getIsBalanceInsufficient=function(e){var t;return(null===(t=Se(e).gas)||void 0===t?void 0:t.error)===m.INSUFFICIENT_FUNDS_ERROR},n.getIsSwapAndSendDisabledForNetwork=n.getIsNativeSendPossible=void 0,n.getIsUsingMyAccountForRecipientSearch=function(e){return e[Q].recipientMode===q.MY_ACCOUNTS},n.getMinimumGasLimitForSend=function(e){return e[Q].gasLimitMinimum},n.getRecipient=Ae,n.getRecipientUserInput=function(e){return e[Q].recipientInput},n.getRecipientWarningAcknowledgement=function(e){var t;return(null===(t=Se(e).recipient)||void 0===t?void 0:t.recipientWarningAcknowledged)??!1},n.getSendAmount=function(e){var t;return null===(t=Se(e).amount)||void 0===t?void 0:t.value},n.getSendAnalyticProperties=void 0,n.getSendAsset=ve,n.getSendAssetAddress=function(e){var t;return null===(t=ve(e))||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address},n.getSendErrors=function(e){var t,n;return{gasFee:null===(t=Se(e).gas)||void 0===t?void 0:t.error,amount:null===(n=Se(e).amount)||void 0===n?void 0:n.error}},n.getSendHexData=function(e){return Se(e).userInputHexData},n.getSendLayer1GasFee=_e,n.getSendMaxModeState=function(e){return e[Q].amountMode===$.MAX},n.getSendStage=function(e){return e[Q].stage},n.getSendTo=function(e){var t;return null===(t=Ae(e))||void 0===t?void 0:t.address},n.getSender=Ie,n.getSwapsBlockedTokens=function(e){return e[Q].swapsBlockedTokens},n.hasSendLayer1GasFee=function(e){return null!==e[Q].gasTotalForLayer1},n.initializeSendState=n.initialState=void 0,n.isSendFormInvalid=function(e){const t=Se(e);if(!t)return!0;return t.status===j.INVALID},n.isSendStateInitialized=function(e){return e[Q].stage!==W.INACTIVE},n.resetRecipientInput=function(){return async(e,t)=>{const n=t(),r=(0,h.getCurrentChainId)(n);(0,g.showLoadingIndication)(),e(ce("sendFlow - user cleared recipient input")),e((0,v.resetDomainResolution)()),e(he("")),await e(fe({address:"",nickname:""})),e(ie({chainId:r})),(0,g.hideLoadingIndication)()}},n.resetSendState=function(){return async(e,t)=>{const n=t();e(te.resetSendState()),n[Q].gasEstimatePollToken&&(await(0,g.gasFeeStopPollingByPollingToken)(n[Q].gasEstimatePollToken),(0,g.removePollingTokenFromAppState)(n[Q].gasEstimatePollToken))}},n.sendAmountIsInError=function(e){var t;return Boolean(null===(t=Se(e).amount)||void 0===t?void 0:t.error)},n.signTransaction=function(e){return async(t,n)=>{const r=n(),{stage:a,eip1559support:s,amountMode:i}=r[Q],c=r[Q].draftTransactions[r[Q].currentTransactionUUID];let l;const p=(0,G.getIsDraftSwapAndSend)(c),f=c.quotes,T=f?(0,G.calculateBestQuote)(f):undefined;l=p?{...T.trade}:(0,G.generateTransactionParams)(r[Q]);const{amount:y,sendAsset:S,receiveAsset:E,recipient:v}=c,I={amount:{...y},sendAsset:{...S},receiveAsset:{...E},recipient:{...v},amountMode:r[Q].amountMode};if(await t(te.setPrevSwapAndSend(I)),a!==W.EDIT||p){let n,s=c.recipient.type===m.RECIPIENT_TYPES.SMART_CONTRACT?u.TransactionType.contractInteraction:u.TransactionType.simpleSend;if(c.sendAsset.type!==w.AssetType.native&&(s=c.sendAsset.type===w.AssetType.NFT?c.sendAsset.details.standard===w.TokenStandard.ERC721?u.TransactionType.tokenMethodTransferFrom:u.TransactionType.tokenMethodSafeTransferFrom:u.TransactionType.tokenMethodTransfer),await t(ce("sendFlow - user clicked next and transaction should be added to controller")),p){var A,R,C,N,b,O;if(a===W.EDIT){const e=(0,h.getUnapprovedTransactions)(r)[c.id];e&&await t((0,g.rejectPendingApproval)(e.id,d.ethErrors.provider.userRejectedRequest().serialize()))}const s=(0,h.getCurrentChainId)(r),i=M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].decimals,o=(null===(A=c.sendAsset.details)||void 0===A?void 0:A.symbol)||(0,_.getNativeCurrency)(r),p=(null===(R=c.receiveAsset.details)||void 0===R?void 0:R.symbol)||(0,_.getNativeCurrency)(r),m=(null===(C=c.receiveAsset.details)||void 0===C?void 0:C.decimals)||i,f=(null===(N=c.receiveAsset.details)||void 0===N?void 0:N.address)||M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].address,S=(null===(b=c.sendAsset.details)||void 0===b?void 0:b.decimals)||i,E=new D.Numeric((null==y?void 0:y.value)||"0x0",16).toBase(10).shiftedBy(S).toString(),v=c.recipient.address,I=(null===(O=c.sendAsset.details)||void 0===O?void 0:O.address)||M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].address,w=null==T?void 0:T.sourceAmount,k=null==T?void 0:T.destinationAmount,P={swapAndSendRecipient:v,type:u.TransactionType.swapAndSend,sourceTokenSymbol:o,destinationTokenSymbol:p,destinationTokenDecimals:m,destinationTokenAddress:f,swapTokenValue:E,approvalTxId:undefined,destinationTokenAmount:k,sourceTokenAddress:I,sourceTokenAmount:w,sourceTokenDecimals:S};if(null!=T&&T.approvalNeeded){const{id:e}=await(0,g.addTransactionAndWaitForPublish)({...T.approvalNeeded,amount:"0x0"},{requireApproval:!1,type:u.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:u.TransactionType.swapApproval,sourceTokenSymbol:o}}});P.approvalTxId=e}const{id:x}=await(0,g.addTransactionAndWaitForPublish)(l,{requireApproval:!1,sendFlowHistory:c.history,type:u.TransactionType.swapAndSend,swaps:{hasApproveTx:Boolean(null==T?void 0:T.approvalNeeded),meta:P}});n=x,await t((0,g.setDefaultHomeActiveTabName)("activity")),e.push(F.DEFAULT_ROUTE)}else{const{id:r}=await t((0,g.addTransactionAndRouteToConfirmationPage)(l,{sendFlowHistory:c.history,type:s}));n=r,e.push(F.CONFIRM_TRANSACTION_ROUTE)}await t((0,x.setMaxValueMode)(n,i===$.MAX&&c.sendAsset.type===w.AssetType.native))}else{var k;const n=(0,h.getUnapprovedTransactions)(r),a=(0,o.cloneDeep)(n[c.id]),i={data:l.data,from:l.from,to:l.to,value:l.value,gas:null!=a&&a.userEditedGasLimit?a.txParams.gas:l.gas};a.originalGasEstimate=i.gas;const u={...a,txParams:Object.assign(a.txParams,s?i:l)};await t(ce("sendFlow - user clicked next and transaction should be updated in controller")),await t((0,g.updateTransactionSendFlowHistory)(c.id,(null===(k=a.sendFlowHistory)||void 0===k?void 0:k.length)||0,c.history)),await t((0,g.updateEditableParams)(c.id,u.txParams)),await t((0,g.updateTransactionGasFees)(c.id,u.txParams)),e.push(F.CONFIRM_TRANSACTION_ROUTE)}await t(te.setPrevSwapAndSend(I))}},n.startNewDraftTransaction=function(e){return async t=>{await t(te.clearPreviousDrafts()),await t(te.addNewDraft({...V,history:["sendFlow - User started new draft transaction"]})),await t(Te({type:e.type??w.AssetType.native,details:e.details,skipComputeEstimatedGasLimit:!0})),await t(X())}},n.toggleSendMaxMode=function(){return async(e,t)=>{t()[Q].amountMode===$.MAX?(await e(te.updateAmountMode($.INPUT)),await e(te.updateSendAmount("0x0")),await e(ce("sendFlow - user toggled max mode off"))):(await e(te.updateAmountMode($.MAX)),await e(te.updateAmountToMax()),await e(ce("sendFlow - user toggled max mode on"))),await e(me())}},n.updateGasLimit=void 0,n.updateGasPrice=function(e){return t=>{t(ce(`sendFlow - user set legacy gasPrice to ${e}`)),t(te.updateGasFees({gasPrice:e,transactionType:u.TransactionEnvelopeType.legacy,manuallyEdited:!0}))}},n.updateRecipient=fe,n.updateRecipientUserInput=he,n.updateSendAmount=ge,n.updateSendAsset=Te,n.updateSendHexData=function(e){return async(t,n)=>{await t(ce(`sendFlow - user added custom hexData ${e}`)),await t(te.updateUserInputHexData(e));const r=n(),a=r[Q].draftTransactions[r[Q].currentTransactionUUID];await t(me(a.sendAsset.type===w.AssetType.native))}},n.updateSendQuote=me,n.useContactListForRecipientSearch=function(){return e=>{e(ce("sendFlow - user selected back to all on recipient screen")),e(oe(q.CONTACT_LIST))}},n.useDefaultGas=n.useCustomGas=void 0,n.useMyAccountsForRecipientSearch=function(){return e=>{e(ce("sendFlow - user selected transfer to my accounts on recipient screen")),e(oe(q.MY_ACCOUNTS))}};var r,a=e("@reduxjs/toolkit"),s=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},i=e("ethereumjs-util"),o=e("lodash"),c=e("uuid"),u=e("@metamask/transaction-controller"),d=e("eth-rpc-errors"),l=e("../../../shared/modules/conversion.utils"),p=e("../../../shared/constants/gas"),m=e("../../pages/confirmations/send/send.constants"),f=e("../../pages/confirmations/send/send.utils"),h=e("../../selectors"),g=e("../../store/actions"),T=e("../gas/gas.duck"),y=e("../../store/actionConstants"),S=e("../../helpers/utils/token-util"),E=e("../../helpers/utils/util"),_=e("../metamask/metamask"),v=e("../domains"),I=e("../../../shared/modules/hexstring-utils"),A=e("../../helpers/utils/transactions.util"),w=e("../../../shared/constants/transaction"),R=e("../../helpers/constants/error-keys"),C=e("../../../shared/constants/time"),N=e("../../../shared/modules/string-utils"),b=e("../../../shared/modules/transaction.utils"),O=e("../../../shared/lib/metamask-controller-utils"),k=e("../../../shared/lib/transactions-controller-utils"),D=e("../../../shared/modules/Numeric"),P=e("../../../shared/constants/common"),M=e("../../../shared/constants/swaps"),x=e("../confirm-transaction/confirm-transaction.duck"),F=e("../../helpers/constants/routes"),U=e("../../pages/swaps/swaps.util"),L=e("./swap-and-send-utils"),G=e("./helpers");const B="This has been replaced with a more recent request",H=C.SECOND,W=n.SEND_STAGES={ADD_RECIPIENT:"ADD_RECIPIENT",DRAFT:"DRAFT",EDIT:"EDIT",INACTIVE:"INACTIVE"},j=n.SEND_STATUSES={INVALID:"INVALID",VALID:"VALID"},K=n.GAS_INPUT_MODES={BASIC:"BASIC",CUSTOM:"CUSTOM",INLINE:"INLINE"},$=n.AMOUNT_MODES={INPUT:"INPUT",MAX:"MAX"},q=n.RECIPIENT_SEARCH_MODES={CONTACT_LIST:"CONTACT_LIST",MY_ACCOUNTS:"MY_ACCOUNTS"},V=n.draftTransactionInitialState={amount:{error:null,value:"0x0"},sendAsset:{balance:"0x0",details:null,error:null,type:w.AssetType.native},receiveAsset:{balance:"0x0",details:null,error:null,type:w.AssetType.native},fromAccount:null,gas:{error:null,gasLimit:"0x0",gasPrice:"0x0",gasTotal:"0x0",maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",wasManuallyEdited:!1},history:[],id:null,recipient:{address:"",error:null,nickname:"",warning:null,type:"",recipientWarningAcknowledged:!1},status:j.VALID,transactionType:u.TransactionEnvelopeType.legacy,userInputHexData:null,isSwapQuoteLoading:!1,swapQuotesError:null,swapQuotesLatestRequestTimestamp:null,timeToFetchQuotes:null,quotes:null},Y=n.initialState={amountMode:$.INPUT,currentTransactionUUID:null,disabledSwapAndSendNetworks:[],draftTransactions:{},eip1559support:!1,gasEstimateIsLoading:!0,gasEstimatePollToken:null,gasIsSetInModal:!1,gasPriceEstimate:"0x0",gasLimitMinimum:p.GAS_LIMITS.SIMPLE,gasTotalForLayer1:null,prevSwapAndSendInput:null,recipientMode:q.CONTACT_LIST,recipientInput:"",selectedAccount:{address:null,balance:"0x0"},stage:W.INACTIVE,swapsBlockedTokens:[]},Q="send",z=n.computeEstimatedGasLimit=(0,a.createAsyncThunk)("send/computeEstimatedGasLimit",(async(e,t)=>{var n,r;const a=t.getState(),{send:s,metamask:i}=a,o=s.draftTransactions[s.currentTransactionUUID],c=(0,h.getUnapprovedTransactions)(a)[o.id],u=(0,h.getIsNonStandardEthChain)(a),d=(0,h.getCurrentChainId)(a),l=(0,h.getSelectedInternalAccountWithBalance)(a),p=await t.dispatch((0,g.getLayer1GasFee)({transactionParams:{gasPrice:o.gas.gasPrice,gas:o.gas.gasLimit,to:null===(n=o.recipient.address)||void 0===n?void 0:n.toLowerCase(),value:s.amountMode===$.MAX?s.selectedAccount.balance:o.amount.value,from:s.selectedAccount.address,data:o.userInputHexData,type:"0x0"},chainId:d}));if(s.stage!==W.EDIT||null===(r=c.dappSuggestedGasFees)||void 0===r||!r.gas||!c.userEditedGasLimit){var m;const e=await(0,G.estimateGasLimitForSend)({gasPrice:o.gas.gasPrice,blockGasLimit:i.currentBlockGasLimit,selectedAddress:l.address,sendToken:o.sendAsset.details,to:null===(m=o.recipient.address)||void 0===m?void 0:m.toLowerCase(),value:o.amount.value,data:o.userInputHexData,isNonStandardEthChain:u,chainId:d,gasLimit:o.gas.gasLimit});return await t.dispatch((0,T.setCustomGasLimit)(e)),{gasLimit:e,gasTotalForLayer1:p}}return null})),X=n.initializeSendState=(0,a.createAsyncThunk)("send/initializeSendState",(async({chainHasChanged:e=!1}={},t)=>{const n=t.getState(),r=(0,h.getIsNonStandardEthChain)(n),a=(0,h.getSelectedNetworkClientId)(n),s=(0,h.getCurrentChainId)(n);let o=(0,h.checkNetworkAndAccountSupports1559)(n);o===undefined&&(o=await(0,g.getCurrentNetworkEIP1559Compatibility)());const c=(0,h.getSelectedAccount)(n),{send:u,metamask:d}=n,l=u.draftTransactions[u.currentTransactionUUID];if(!l)return t.rejectWithValue("draftTransaction not found, possibly not on send flow");let m=u.stage===W.EDIT?l.gas.gasPrice:"0x1",f=null;f=await(0,g.gasFeeStartPollingByNetworkClientId)(a),(0,g.addPollingTokenToAppState)(f);const{metamask:{gasFeeEstimates:y,gasEstimateType:S}}=t.getState();u.stage!==W.EDIT&&(m=S===p.GasEstimateTypes.legacy?(0,h.getGasPriceInHexWei)(y.medium):S===p.GasEstimateTypes.ethGasPrice?(0,G.getRoundedGasPrice)(y.gasPrice):S===p.GasEstimateTypes.feeMarket?(0,h.getGasPriceInHexWei)(y.medium.suggestedMaxFeePerGas):y.gasPrice?(0,G.getRoundedGasPrice)(y.gasPrice):"0x0");let{gasLimit:E}=l.gas;if(S!==p.GasEstimateTypes.none&&u.stage!==W.EDIT&&l.recipient.address){E=l.sendAsset.type===w.AssetType.token||l.sendAsset.type===w.AssetType.NFT?p.GAS_LIMITS.BASE_TOKEN_ESTIMATE:p.GAS_LIMITS.SIMPLE;E=await(0,G.estimateGasLimitForSend)({gasPrice:m,blockGasLimit:d.currentBlockGasLimit,selectedAddress:Ie(n),sendToken:l.sendAsset.details,to:l.recipient.address.toLowerCase(),value:l.amount.value,data:l.userInputHexData,isNonStandardEthChain:r,chainId:s})||E}await t.dispatch((0,T.setCustomGasLimit)(E));if(t.getState().send.currentTransactionUUID!==u.currentTransactionUUID)return t.rejectWithValue("draftTransaction changed during initialization.\n        A new initializeSendState action must be dispatched.");const v=(0,h.getIsSwapsChain)(n)&&(0,h.getUseExternalServices)(n)?(await(0,U.fetchBlockedTokens)(s)).map((e=>e.toLowerCase())):[],I=await(0,L.getDisabledSwapAndSendNetworksFromAPI)();return{account:c,chainId:(0,h.getCurrentChainId)(n),tokens:(0,_.getTokens)(n),chainHasChanged:e,disabledSwapAndSendNetworks:I,gasFeeEstimates:y,gasEstimateType:S,gasLimit:E,gasTotal:(0,i.addHexPrefix)((0,k.calcGasTotal)(E,m)),gasEstimatePollToken:f,eip1559support:o,useTokenDetection:(0,h.getUseTokenDetection)(n),tokenAddressList:Object.keys((0,h.getTokenList)(n)),swapsBlockedTokens:v}}));let J;const Z=(0,a.createAsyncThunk)("send/fetchSwapAndSendQuotes",(async({requestTimestamp:e},t)=>{var n,r;const a=t.getState(),s=a[Q],o=(0,h.getCurrentChainId)(a),c=s.draftTransactions[s.currentTransactionUUID],u=Ie(a),d=(0,l.hexToDecimal)(c.amount.value);if(!(Number(d)&&c.sendAsset&&c.receiveAsset&&c.recipient.address))return{quotes:null,requestTimestamp:e};let p=await new Promise(((t,n)=>setTimeout((async()=>{var r,a;e!==J&&n(new Error(B)),(0,L.getSwapAndSendQuotes)({chainId:o,sourceAmount:d,sourceToken:(null===(r=c.sendAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)||M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[o].address,destinationToken:(null===(a=c.receiveAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address)||M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[o].address,sender:u,recipient:c.recipient.address}).then((e=>t(e))).catch((()=>n(m.SWAPS_QUOTES_ERROR)))}),H)));for(const e of p)e.approvalNeeded&&(e.approvalNeeded.gas=(0,i.addHexPrefix)(await(0,g.estimateGas)(e.approvalNeeded)));if(p=await(0,G.addAdjustedReturnToQuotes)(p,a,null===(n=c.receiveAsset)||void 0===n?void 0:n.details),null===(r=p)||void 0===r||!r.length)throw new Error(m.SWAPS_NO_QUOTES);return{quotes:p,requestTimestamp:e}})),ee=(0,a.createSlice)({name:Q,initialState:Y,reducers:{addNewDraft:(e,t)=>{e.currentTransactionUUID=(0,c.v4)(),e.draftTransactions[e.currentTransactionUUID]=t.payload,t.payload.id?e.stage=W.EDIT:e.stage=W.ADD_RECIPIENT},addHistoryEntry:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&n.history.push({entry:t.payload,timestamp:Date.now()})},calculateGasTotal:e=>{const t=e.draftTransactions[e.currentTransactionUUID];t&&(t.transactionType===u.TransactionEnvelopeType.feeMarket?t.gas.gasTotal=(0,i.addHexPrefix)((0,k.calcGasTotal)(t.gas.gasLimit,t.gas.maxFeePerGas)):t.gas.gasTotal=(0,i.addHexPrefix)((0,k.calcGasTotal)(t.gas.gasLimit,t.gas.gasPrice)),e.amountMode===$.MAX&&t.sendAsset.type===w.AssetType.native&&ee.caseReducers.updateAmountToMax(e),ee.caseReducers.validateAmountField(e),ee.caseReducers.validateGasField(e),ee.caseReducers.validateSendState(e))},clearPreviousDrafts:e=>{e.currentTransactionUUID=null,e.draftTransactions={}},resetSendState:e=>({...Y,prevSwapAndSendInput:e.prevSwapAndSendInput}),setPrevSwapAndSend:(e,t)=>{e.prevSwapAndSendInput=t.payload},updateAmountMode:(e,t)=>{Object.values($).includes(t.payload)&&(e.amountMode=t.payload)},updateAmountToMax:e=>{const t=e.draftTransactions[e.currentTransactionUUID];let n="0x0";if((null==t?void 0:t.sendAsset.type)===w.AssetType.token){var r;const e=(null===(r=t.sendAsset.details)||void 0===r?void 0:r.decimals)??0,a=Math.pow(10,Number(e));n=new D.Numeric(t.sendAsset.balance,16).times(a,10).toString()}else{const r=new D.Numeric(t.gas.gasTotal||"0x0",16).add(new D.Numeric(e.gasTotalForLayer1??"0x0",16));n=new D.Numeric(t.sendAsset.balance,16).lessThanOrEqualTo(r)?"0":new D.Numeric(t.sendAsset.balance,16).minus(r).toString()}ee.caseReducers.updateSendAmount(e,{payload:n})},updateAsset:(e,t)=>{const{asset:n,initialAssetSet:r,isReceived:a}=t.payload,s=e.draftTransactions[e.currentTransactionUUID],i=s[a?"receiveAsset":"sendAsset"];i.type=n.type,i.balance=n.balance,i.error=n.error,i.type===w.AssetType.token||i.type===w.AssetType.NFT?i.details=n.details:(i.details=null,s.recipient.error===m.CONTRACT_ADDRESS_ERROR&&(s.recipient.error=null)),a||(s.receiveAsset=i),e.amountMode===$.MAX?(e.amountMode=$.INPUT,ee.caseReducers.updateSendAmount(e,{payload:"0x0"})):!1===r&&(a?s.quotes=V.quotes:(ee.caseReducers.updateSendAmount(e,{payload:"0x0"}),ee.caseReducers.updateUserInputHexData(e,{payload:""}))),ee.caseReducers.validateSendState(e)},updateGasFeeEstimates:(e,t)=>{const{gasFeeEstimates:n,gasEstimateType:r}=t.payload;let a="0x0";switch(r){case p.GasEstimateTypes.feeMarket:ee.caseReducers.updateGasFees(e,{payload:{transactionType:u.TransactionEnvelopeType.feeMarket,maxFeePerGas:(0,h.getGasPriceInHexWei)(n.medium.suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,h.getGasPriceInHexWei)(n.medium.suggestedMaxPriorityFeePerGas)}});break;case p.GasEstimateTypes.legacy:a=(0,G.getRoundedGasPrice)(n.medium),ee.caseReducers.updateGasFees(e,{payload:{gasPrice:a,type:u.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});break;case p.GasEstimateTypes.ethGasPrice:a=(0,G.getRoundedGasPrice)(n.gasPrice),ee.caseReducers.updateGasFees(e,{payload:{gasPrice:(0,G.getRoundedGasPrice)(n.gasPrice),type:u.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});case p.GasEstimateTypes.none:}e.gasPriceEstimate=(0,i.addHexPrefix)(a)},updateGasFees:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&(t.payload.transactionType===u.TransactionEnvelopeType.feeMarket?(n.gas.maxFeePerGas=(0,i.addHexPrefix)(t.payload.maxFeePerGas),n.gas.maxPriorityFeePerGas=(0,i.addHexPrefix)(t.payload.maxPriorityFeePerGas),n.transactionType=u.TransactionEnvelopeType.feeMarket):(t.payload.manuallyEdited&&(n.gas.wasManuallyEdited=!0),n.gas.wasManuallyEdited&&!t.payload.manuallyEdited||(n.gas.gasPrice=(0,i.addHexPrefix)(t.payload.gasPrice)),n.transactionType=u.TransactionEnvelopeType.legacy),ee.caseReducers.calculateGasTotal(e))},updateGasLimit:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&(n.gas.gasLimit=(0,i.addHexPrefix)(t.payload),ee.caseReducers.calculateGasTotal(e))},updateLayer1Fees:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];e.gasTotalForLayer1=t.payload,e.amountMode===$.MAX&&(null==n?void 0:n.sendAsset.type)===w.AssetType.native&&ee.caseReducers.updateAmountToMax(e)},updateRecipient:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n.recipient.error=null,e.recipientInput="",n.recipient.address=t.payload.address??"",n.recipient.nickname=t.payload.nickname??"",""===n.recipient.address?e.stage=W.ADD_RECIPIENT:(e.stage=null===n.id?W.DRAFT:W.EDIT,e.recipientMode=q.CONTACT_LIST),ee.caseReducers.validateSendState(e)},updateRecipientSearchMode:(e,t)=>{e.recipientInput="",e.recipientMode=t.payload},updateRecipientWarning:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.warning=t.payload},updateRecipientType:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.type=t.payload},updateDraftTransactionStatus:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].status=t.payload},acknowledgeRecipientWarning:e=>{e.draftTransactions[e.currentTransactionUUID].recipient.recipientWarningAcknowledged=!0,ee.caseReducers.validateSendState(e)},updateRecipientUserInput:(e,t)=>{e.recipientInput=t.payload},updateSendAmount:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n.amount.value=(0,i.addHexPrefix)(t.payload),ee.caseReducers.validateAmountField(e),n.sendAsset.type===w.AssetType.native&&ee.caseReducers.validateGasField(e)},updateUserInputHexData:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].userInputHexData=t.payload},useCustomGas:e=>{e.gasIsSetInModal=!0},useDefaultGas:e=>{e.gasIsSetInModal=!1},validateAmountField:e=>{const t=e.draftTransactions[e.currentTransactionUUID];if(!t)return;const n=new D.Numeric(t.amount.value,16);switch(!0){case t.sendAsset.type===w.AssetType.NFT&&t.sendAsset.details.standard===w.TokenStandard.ERC1155&&"0x0"===t.amount.value:t.amount.error=m.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR,t.status!==j.INVALID&&ee.caseReducers.validateSendState(e);break;case t.sendAsset.type===w.AssetType.NFT&&t.sendAsset.details.standard===w.TokenStandard.ERC1155&&!(0,f.isERC1155BalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value}):t.amount.error=m.INSUFFICIENT_FUNDS_ERROR,t.status!==j.INVALID&&ee.caseReducers.validateSendState(e);break;case n.isFloat()&&t.sendAsset.type===w.AssetType.NFT&&t.sendAsset.details.standard===w.TokenStandard.ERC1155:t.amount.error=m.FLOAT_TOKENS_ERROR,t.status!==j.INVALID&&ee.caseReducers.validateSendState(e);break;case t.sendAsset.type===w.AssetType.token&&!(0,f.isTokenBalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value,decimals:t.sendAsset.details.decimals}):t.amount.error=m.INSUFFICIENT_TOKENS_ERROR,t.status!==j.INVALID&&ee.caseReducers.validateSendState(e);break;case!(0,f.isBalanceSufficient)({amount:t.sendAsset.type===w.AssetType.native?t.amount.value:undefined,balance:t.sendAsset.type===w.AssetType.native?t.sendAsset.balance:e.selectedAccount.balance,gasTotal:t.gas.gasTotal??"0x0"}):{const n=t.sendAsset.type===w.AssetType.native&&!(0,f.isBalanceSufficient)({amount:t.amount.value,balance:t.sendAsset.balance,gasTotal:"0x0"});t.amount.error=n?m.INSUFFICIENT_FUNDS_ERROR:m.INSUFFICIENT_FUNDS_FOR_GAS_ERROR,t.status!==j.INVALID&&ee.caseReducers.validateSendState(e);break}default:t.amount.error=null,t.status===j.INVALID&&ee.caseReducers.validateSendState(e)}},validateGasField:e=>{var t;const n=e.draftTransactions[e.currentTransactionUUID];if(!n)return;const r=!(0,f.isBalanceSufficient)({amount:n.sendAsset.type===w.AssetType.native?n.amount.value:"0x0",balance:(null===(t=n.fromAccount)||void 0===t?void 0:t.balance)??e.selectedAccount.balance,gasTotal:n.gas.gasTotal??"0x0"});n.gas.error=r?m.INSUFFICIENT_FUNDS_ERROR:null},validateRecipientUserInput:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];if(n)if(e.recipientMode===q.MY_ACCOUNTS||""===e.recipientInput||null===e.recipientInput)n.recipient.error=null,n.recipient.warning=null;else{var r;const{chainId:a,tokens:s,tokenAddressList:i,isProbablyAnAssetContract:o}=t.payload;(0,I.isBurnAddress)(e.recipientInput)||!(0,I.isValidHexAddress)(e.recipientInput,{mixedCaseUseChecksum:!0})&&!E.IS_FLASK&&!(0,E.isValidDomainName)(e.recipientInput)?n.recipient.error=(0,E.isDefaultMetaMaskChain)(a)?m.INVALID_RECIPIENT_ADDRESS_ERROR:m.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR:(0,E.isOriginContractAddress)(e.recipientInput,null===(r=n.sendAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)?n.recipient.error=m.CONTRACT_ADDRESS_ERROR:n.recipient.error=null,(0,I.isValidHexAddress)(e.recipientInput)&&(i.find((t=>(0,N.isEqualCaseInsensitive)(t,e.recipientInput)))||(0,E.checkExistingAddresses)(e.recipientInput,s))||o?n.recipient.warning=m.KNOWN_RECIPIENT_ADDRESS_WARNING:n.recipient.warning=null}ee.caseReducers.validateSendState(e)},validateSendState:e=>{var t,n,r,a,o;const c=e.draftTransactions[e.currentTransactionUUID];if(ee.caseReducers.addHistoryEntry(e,{payload:"Begin validating send state"}),c){const u=(0,G.getIsDraftSwapAndSend)(c),d=()=>[m.INSUFFICIENT_TOKENS_ERROR,m.INSUFFICIENT_FUNDS_ERROR,m.INSUFFICIENT_FUNDS_FOR_GAS_ERROR].includes(c.amount.error)&&!c.sendAsset.balance,{quotes:p,gas:h}=c,g=p?(0,G.calculateBestQuote)(p):undefined,T=(0,l.hexToDecimal)((null==h?void 0:h.gasTotal)||"0x0")>0&&(0,l.hexToDecimal)((null==h?void 0:h.gasLimit)||"0x0")>0?new D.Numeric(h.gasTotal,16).divide(h.gasLimit,16).toString():undefined;switch(!0){case Boolean(c.amount.error&&!d()):ee.caseReducers.addHistoryEntry(e,{payload:`Amount is in error ${c.amount.error}`}),c.status=j.INVALID;break;case Boolean(c.gas.error):ee.caseReducers.addHistoryEntry(e,{payload:`Gas is in error ${c.gas.error}`}),c.status=j.INVALID;break;case Boolean(c.sendAsset.error):ee.caseReducers.addHistoryEntry(e,{payload:`Send asset is in error ${c.sendAsset.error}`}),c.status=j.INVALID;break;case Boolean(c.receiveAsset.error):ee.caseReducers.addHistoryEntry(e,{payload:`Receive asset is in error ${c.receiveAsset.error}`}),c.status=j.INVALID;break;case c.sendAsset.type===w.AssetType.token&&null===c.sendAsset.details:ee.caseReducers.addHistoryEntry(e,{payload:"Send asset is TOKEN and token details is null"}),c.status=j.INVALID;break;case c.receiveAsset.type===w.AssetType.token&&null===c.receiveAsset.details:ee.caseReducers.addHistoryEntry(e,{payload:"Receive asset is TOKEN and token details is null"}),c.status=j.INVALID;break;case e.stage===W.ADD_RECIPIENT:ee.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is ADD_RECIPIENT"}),c.status=j.INVALID;break;case e.stage===W.INACTIVE:ee.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is INACTIVE"}),c.status=j.INVALID;break;case e.gasEstimateIsLoading:ee.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because gasEstimateIsLoading"}),c.status=j.INVALID;break;case new s.default(c.gas.gasLimit,16).lessThan(new s.default(e.gasLimitMinimum)):ee.caseReducers.addHistoryEntry(e,{payload:`Form is invalid because ${c.gas.gasLimit} is lessThan ${e.gasLimitMinimum}`}),c.status=j.INVALID;break;case"loading"===c.recipient.warning:ee.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning is loading"}),c.status=j.INVALID;break;case c.recipient.warning===m.KNOWN_RECIPIENT_ADDRESS_WARNING&&!1===c.recipient.recipientWarningAcknowledged:ee.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning not acknolwedged"}),c.status=j.INVALID;break;case Boolean(g&&!(0,N.isEqualCaseInsensitive)(g.recipient,c.recipient.address)):ee.caseReducers.addHistoryEntry(e,{payload:`Recipient is not match ${c.recipient.address} ${g.recipient}`}),c.status=j.INVALID;break;case Boolean(g&&!(0,N.isEqualCaseInsensitive)(g.trade.from,e.selectedAccount.address)):ee.caseReducers.addHistoryEntry(e,{payload:`Sender is not match ${e.selectedAccount.address} ${g.trade.from}`}),c.status=j.INVALID;break;case Boolean(g&&!(0,N.isEqualCaseInsensitive)((null===(t=c.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||(0,i.zeroAddress)(),g.sourceToken)):ee.caseReducers.addHistoryEntry(e,{payload:`Source token is not match ${null===(n=c.sendAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address} ${g.sourceToken}`}),c.status=j.INVALID;break;case Boolean(g&&!(0,N.isEqualCaseInsensitive)(g.destinationToken,(null===(r=c.receiveAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)||(0,i.zeroAddress)())):ee.caseReducers.addHistoryEntry(e,{payload:`Destination token is not match ${null===(a=c.receiveAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address} ${g.destinationToken}`}),c.status=j.INVALID;break;case g&&!(0,f.isBalanceSufficient)({amount:c.sendAsset.type===w.AssetType.native?c.amount.value:undefined,balance:e.selectedAccount.balance,gasTotal:(0,k.calcGasTotal)(new D.Numeric((null==g||null===(o=g.gasParams)||void 0===o?void 0:o.maxGas)||0,10).toPrefixedHexString(),T??"0x0")}):c.amount.error||(c.amount.error=m.INSUFFICIENT_FUNDS_FOR_GAS_ERROR),c.status=j.INVALID;break;case u&&!g:ee.caseReducers.addHistoryEntry(e,{payload:"No swap and send quote available"}),c.status=j.INVALID;break;default:ee.caseReducers.addHistoryEntry(e,{payload:"Form is valid"}),c.status=j.VALID}}}},extraReducers:e=>{e.addCase(y.ACCOUNT_CHANGED,((e,t)=>{if(e.stage===W.EDIT&&t.payload.account){const n=e.draftTransactions[e.currentTransactionUUID];n&&n.fromAccount&&n.fromAccount.address===t.payload.account.address&&(n.fromAccount.balance=t.payload.account.balance,n.sendAsset.type===w.AssetType.native&&(n.sendAsset.balance=t.payload.account.balance),ee.caseReducers.validateAmountField(e),ee.caseReducers.validateGasField(e),ee.caseReducers.validateSendState(e))}})).addCase(y.ADDRESS_BOOK_UPDATED,((e,t)=>{var n;const{addressBook:r}=t.payload,a=e.draftTransactions[e.currentTransactionUUID];a&&null!==(n=r[a.recipient.address])&&void 0!==n&&n.name&&(a.recipient.nickname=r[a.recipient.address].name)})).addCase(y.CLEAR_SWAP_AND_SEND_STATE,(e=>{const t=e.draftTransactions[e.currentTransactionUUID];t.quotes=V.quotes,t.swapQuotesError=V.swapQuotesError,t.isSwapQuoteLoading=V.isSwapQuoteLoading,t.swapQuotesLatestRequestTimestamp=V.swapQuotesLatestRequestTimestamp,t.timeToFetchQuotes=V.timeToFetchQuotes})).addCase(z.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(z.fulfilled,((e,t)=>{var n,r;e.gasEstimateIsLoading=!1,null!==(n=t.payload)&&void 0!==n&&n.gasLimit&&ee.caseReducers.updateGasLimit(e,{payload:t.payload.gasLimit}),null!==(r=t.payload)&&void 0!==r&&r.gasTotalForLayer1&&ee.caseReducers.updateLayer1Fees(e,{payload:t.payload.gasTotalForLayer1})})).addCase(z.rejected,(e=>{e.gasEstimateIsLoading=!1})).addCase(y.GAS_FEE_ESTIMATES_UPDATED,((e,t)=>{ee.caseReducers.updateGasFeeEstimates(e,{payload:t.payload})})).addCase(X.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(X.fulfilled,((e,t)=>{e.eip1559support=t.payload.eip1559support,e.selectedAccount.address=t.payload.account.address,e.selectedAccount.balance=t.payload.account.balance,e.prevSwapAndSendInput=Y.prevSwapAndSendInput;const n=e.draftTransactions[e.currentTransactionUUID];var r;n&&(n.gas.gasLimit=t.payload.gasLimit,n.gas.gasTotal=t.payload.gasTotal,t.payload.chainHasChanged&&(n.sendAsset.type=w.AssetType.native,n.sendAsset.balance=(null===(r=n.fromAccount)||void 0===r?void 0:r.balance)??e.selectedAccount.balance,n.sendAsset.details=null,n.receiveAsset=V.receiveAsset));ee.caseReducers.updateGasFeeEstimates(e,{payload:{gasFeeEstimates:t.payload.gasFeeEstimates,gasEstimateType:t.payload.gasEstimateType}}),e.gasEstimatePollToken=t.payload.gasEstimatePollToken,t.payload.gasEstimatePollToken&&(e.gasEstimateIsLoading=!1),e.stage!==W.INACTIVE&&ee.caseReducers.validateRecipientUserInput(e,{payload:{chainId:t.payload.chainId,tokens:t.payload.tokens,useTokenDetection:t.payload.useTokenDetection,tokenAddressList:t.payload.tokenAddressList}}),e.swapsBlockedTokens=t.payload.swapsBlockedTokens,e.disabledSwapAndSendNetworks=t.payload.disabledSwapAndSendNetworks,e.amountMode===$.MAX&&ee.caseReducers.updateAmountToMax(e),ee.caseReducers.validateAmountField(e),ee.caseReducers.validateGasField(e),ee.caseReducers.validateSendState(e)})).addCase(X.rejected,(e=>{e.prevSwapAndSendInput=Y.prevSwapAndSendInput})).addCase(Z.pending,((e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];var r;n&&(null!==(r=t.meta)&&void 0!==r&&null!==(r=r.arg)&&void 0!==r&&r.isRefreshingQuotes||(n.quotes=V.quotes),n.swapQuotesError=null,n.isSwapQuoteLoading=!0,n.swapQuotesLatestRequestTimestamp=Math.max(t.meta.arg.requestTimestamp,n.swapQuotesLatestRequestTimestamp));ee.caseReducers.validateSendState(e)})).addCase(Z.fulfilled,((e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&t.payload.requestTimestamp===n.swapQuotesLatestRequestTimestamp&&(n.timeToFetchQuotes=Date.now()-t.payload.requestTimestamp,n.isSwapQuoteLoading=!1,n.swapQuotesError=null,t.payload&&(n.quotes=t.payload.quotes)),ee.caseReducers.validateSendState(e)})).addCase(Z.rejected,((e,t)=>{if(t.error.message===B)return;const n=e.draftTransactions[e.currentTransactionUUID];n&&(n.isSwapQuoteLoading=!1,n.swapQuotesError=t.error.message)})).addCase(y.SELECTED_ACCOUNT_CHANGED,((e,t)=>{if(e.stage!==W.EDIT&&t.payload.account){e.selectedAccount.balance=t.payload.account.balance,e.selectedAccount.address=t.payload.account.address;const n=e.draftTransactions[e.currentTransactionUUID];n&&((null==n?void 0:n.sendAsset.type)===w.AssetType.native&&(n.sendAsset.balance=t.payload.account.balance),(null==n?void 0:n.sendAsset.type)!==w.AssetType.token&&(null==n?void 0:n.sendAsset.type)!==w.AssetType.NFT||(n.sendAsset.type=V.sendAsset.type,n.sendAsset.error=V.sendAsset.error,n.sendAsset.details=V.sendAsset.details,n.sendAsset.balance=t.payload.account.balance,n.receiveAsset=V.receiveAsset,n.amount.value=V.amount.value),ee.caseReducers.validateAmountField(e),ee.caseReducers.validateGasField(e),ee.caseReducers.validateSendState(e))}})).addCase(y.QR_CODE_DETECTED,((e,t)=>{const n=t.value,r=e.draftTransactions[e.currentTransactionUUID];if(n&&r&&"address"===n.type){const t=n.values.address.toLowerCase();(0,I.isValidHexAddress)(t,{allowNonPrefixed:!1})?r.recipient.address!==t&&ee.caseReducers.updateRecipient(e,{payload:{address:t}}):r.recipient.error=m.INVALID_RECIPIENT_ADDRESS_ERROR}}))}}),{actions:te,reducer:ne}=ee;n.default=ne;const{useDefaultGas:re,useCustomGas:ae,updateGasLimit:se,validateRecipientUserInput:ie,updateRecipientSearchMode:oe,addHistoryEntry:ce,acknowledgeRecipientWarning:ue}=te;n.acknowledgeRecipientWarning=ue,n.addHistoryEntry=ce,n.updateGasLimit=se,n.useCustomGas=ae,n.useDefaultGas=re;const de=(0,o.debounce)(((e,t,n)=>{e(ce(`sendFlow - user typed ${t.userInput} into recipient input field`)),e(ie(t)),n()}),300),le=(0,o.debounce)((async e=>{await e(z())}),300),pe=(0,o.debounce)(((e,t)=>{e(ce(t))}),100);function me(e=!0,t=!1,n=!0){return async(r,a)=>{var s;const i=a()[Q],o=null===(s=i.draftTransactions)||void 0===s?void 0:s[null==i?void 0:i.currentTransactionUUID],c=(0,G.getIsDraftSwapAndSend)(o),{quotes:u,swapQuotesError:d,isSwapQuoteLoading:l,swapQuotesLatestRequestTimestamp:p}=o??{};if(c){const e=Date.now();J=e,r(Z({requestTimestamp:e,isRefreshingQuotes:t}))}else(u||d||l||p)&&r({type:y.CLEAR_SWAP_AND_SEND_STATE});e&&(n?await r(z()):await le(r))}}function fe({address:e,nickname:t}){return async(n,r)=>{const a=r(),s=(0,h.getAddressBookEntryOrAccountName)(a,e)??"";await n(te.updateRecipient({address:e,nickname:t||s})),await n(me())}}function he(e){return async(t,n)=>{t(te.updateRecipientWarning("loading")),t(te.updateDraftTransactionStatus(j.INVALID)),await t(te.updateRecipientUserInput(e));const r=n(),a=Ie(r),s=(0,h.getCurrentChainId)(r),i=(0,_.getTokens)(r),o=(0,h.getUseTokenDetection)(r),c=(0,h.getTokenList)(r),u=Object.keys(c),d=(0,I.isValidHexAddress)(e);let l=!1;if(d){if(await(0,A.isSmartContractAddress)(e)){t(te.updateRecipientType(m.RECIPIENT_TYPES.SMART_CONTRACT));const{symbol:n,decimals:r}=(0,S.getTokenMetadata)(e,c)||{};if(l=n&&r!==undefined,!l)try{const{standard:t}=await(0,g.getTokenStandardAndDetails)(e,a);l=Boolean(t)}catch(e){console.log(e)}}}return new Promise((n=>{de(t,{userInput:e,chainId:s,tokens:i,useTokenDetection:o,tokenAddressList:u,isProbablyAnAssetContract:l},n)}))}}function ge(e,t){return async(n,r)=>{const a=r();if(n(te.updateSendAmount(e)),a[Q].amountMode===$.MAX&&n(te.updateAmountMode($.INPUT)),await n(me(!0,!1,!1)),t===undefined)return;const{ticker:s}=(0,_.getProviderConfig)(a),i=a[Q].draftTransactions[a[Q].currentTransactionUUID];let o=e;var c;i.sendAsset.type===w.AssetType.token?o=`${t} ${null===(c=i.sendAsset.details)||void 0===c?void 0:c.symbol}`:o=`${t} ${s||P.EtherDenomination.ETH}`;pe(n,`sendFlow - user set amount to ${o}`)}}function Te({type:e,details:t,skipComputeEstimatedGasLimit:n,isReceived:r},{initialAssetSet:a=!1}={}){return async(s,o)=>{const c=o(),{ticker:d}=(0,_.getProviderConfig)(c),l=c[Q].draftTransactions[c[Q].currentTransactionUUID],p=Ie(c),m=(0,h.getTargetAccount)(c,p);if(e===w.AssetType.native){const t=(0,h.getUnapprovedTransactions)(c),n=null==t?void 0:t[l.id];await s(ce(`sendFlow - user set asset of type ${w.AssetType.native} with symbol ${d??P.EtherDenomination.ETH}`)),await s(te.updateAsset({asset:{type:e,details:null,balance:m.balance,error:null},initialAssetSet:a,isReceived:r})),(null==n?void 0:n.type)!==u.TransactionType.tokenMethodTransferFrom&&(null==n?void 0:n.type)!==u.TransactionType.tokenMethodTransfer&&(null==n?void 0:n.type)!==u.TransactionType.tokenMethodSafeTransferFrom||await s(te.updateUserInputHexData(""))}else{var f;await s((0,g.showLoadingIndication)());let n,o=null===(f={[w.TokenStandard.ERC20]:r?["address","symbol","decimals"]:["address","symbol","decimals","balance"],[w.TokenStandard.ERC721]:["address","symbol","tokenId"],[w.TokenStandard.ERC1155]:["address","symbol","tokenId"]}[t.standard])||void 0===f?void 0:f.find((e=>t[e]===undefined));if("balance"===o){var T;const e=(0,h.getSelectedNetworkClientId)(c),n=Ie(c),r=null===(T=(await(0,g.getBalancesInSingleCall)(n,[t.address],e).catch((()=>({}))))[t.address])||void 0===T?void 0:T.hex;t.balance=r?(0,i.addHexPrefix)(r):undefined,o=undefined}n=t.standard&&!o?{...t}:{...t,...await(0,g.getTokenStandardAndDetails)(t.address,p,t.tokenId).catch((e=>{throw s((0,g.hideLoadingIndication)()),e}))},await s((0,g.hideLoadingIndication)());const u={type:e,details:n,error:null};if(n.standard===w.TokenStandard.ERC20)u.balance=n.balance&&n.decimals?(0,i.addHexPrefix)((0,k.calcTokenAmount)(n.balance,n.decimals).toString(16)):undefined,await s(ce(`sendFlow - user set asset to ERC20 token with symbol ${n.symbol} and address ${n.address}`));else if(n.standard===w.TokenStandard.ERC1155||n.standard===w.TokenStandard.ERC721){if(e===w.AssetType.token)throw s((0,g.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:n.address})),u.error=R.INVALID_ASSET_TYPE,new Error(R.INVALID_ASSET_TYPE);{let e=!0;try{e=await(0,g.isNftOwner)(p,n.address,n.tokenId)}catch(e){e.message.includes("Unable to verify ownership.")||s((0,g.displayWarning)(e.message))}if(!e)throw new Error("Send slice initialized as NFT send with an NFT not currently owned by the select account");u.error=null,u.balance=n.balance?(0,i.addHexPrefix)(n.balance):"0x1",await s(ce(`sendFlow - user set asset to NFT with tokenId ${n.tokenId} and address ${n.address}`))}}await s(te.updateAsset({asset:u,initialAssetSet:a,isReceived:r}))}await s(me(!1===a&&!n))}}function ye(e){return e[Q].currentTransactionUUID}function Se(e){return e[Q].draftTransactions[ye(e)]??{}}const Ee=n.getBestQuote=(0,a.createSelector)(Se,(({quotes:e,swapQuotesError:t})=>{const n=e;if(t||null==n||!n.length)return undefined;return(0,G.calculateBestQuote)(n)}));function _e(e){return e[Q].gasTotalForLayer1}n.getIsNativeSendPossible=(0,a.createSelector)(Se,_e,(({gas:{gasTotal:e},sendAsset:t},n)=>{if(t.type!==w.AssetType.native)return!0;const r=t.balance;return new D.Numeric(e||"0x0",16).add(new D.Numeric(n??"0x0",16)).lessThan(r,16)}));function ve(e){return Se(e).sendAsset}function Ie(e){var t,n;const r=e[Q],a=r.draftTransactions[r.currentTransactionUUID];return(null==a||null===(t=a.fromAccount)||void 0===t?void 0:t.address)??r.selectedAccount.address??(null===(n=(0,h.getSelectedInternalAccount)(e))||void 0===n?void 0:n.address)}function Ae(e){const t=Se(e);if(!t.recipient)return{address:"",nickname:"",error:null,warning:null};const n=(0,I.toChecksumHexAddress)(t.recipient.address);return e.metamask.ensResolutionsByAddress?{...t.recipient,nickname:t.recipient.nickname||(0,h.getEnsResolutionByAddress)(e,n)}:t.recipient}n.getIsSwapAndSendDisabledForNetwork=(0,a.createSelector)((e=>(0,h.getCurrentChainId)(e)),(e=>{var t;return(null===(t=e[Q])||void 0===t?void 0:t.disabledSwapAndSendNetworks)??[]}),((e,t)=>t.includes(e))),n.getSendAnalyticProperties=(0,a.createSelector)(_.getProviderConfig,Se,Ee,(({chainId:e,ticker:t},n,r)=>{try{var a,s,i,o,c,u;const d=M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].decimals,l=M.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].address,p=(0,G.getIsDraftSwapAndSend)(n),{quotes:m,amount:f,sendAsset:h,receiveAsset:g,swapQuotesError:T,timeToFetchQuotes:y}=n,S=(null==n||null===(a=n.sendAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.symbol)||t,E=(null==n||null===(s=n.receiveAsset)||void 0===s||null===(s=s.details)||void 0===s?void 0:s.symbol)||t,_=(null==n||null===(i=n.receiveAsset)||void 0===i||null===(i=i.details)||void 0===i?void 0:i.decimals)||d,v=(null==n||null===(o=n.sendAsset)||void 0===o||null===(o=o.details)||void 0===o?void 0:o.decimals)||d,I=new D.Numeric((null==f?void 0:f.value)||"0x0",16).toBase(10).shiftedBy(v).toString(),A=null==r?void 0:r.sourceAmount,w=null==r?void 0:r.destinationAmount,R=(null==n||null===(c=n.receiveAsset)||void 0===c||null===(c=c.details)||void 0===c?void 0:c.address)||l,C=(null==n||null===(u=n.sendAsset)||void 0===u||null===(u=u.details)||void 0===u?void 0:u.address)||l;return{is_swap_and_send:p,chain_id:e,token_amount_source:A&&v?(0,k.calcTokenAmount)(A,v).toString():I,token_amount_dest_estimate:w&&_?(0,k.calcTokenAmount)(w,_).toString():undefined,token_symbol_source:S,token_symbol_destination:E,token_address_source:C,token_address_destination:R,results_count:null==m?void 0:m.length,quotes_load_time_ms:y,aggregator_list:null==m?void 0:m.map((({aggregator:e,error:t})=>`${e} (${t||"no error"})`)),aggregator_recommended:null==r?void 0:r.aggregator,errors:[null==f?void 0:f.error,null==h?void 0:h.error,null==g?void 0:g.error,T].filter(Boolean)}}catch(e){return{analyticsError:e}}}))}}},{package:"$root$",file:"ui/ducks/send/send.js"}],[5873,{"../../../shared/constants/swaps":4968,"../../../shared/constants/time":4970,"../../../shared/lib/fetch-with-cache":4976,"../../../shared/lib/swaps-utils":4981,"../../../shared/modules/conversion.utils":4992,"../../../shared/modules/hexstring-utils":4999,"../../pages/swaps/swaps.util":6552,lodash:4293},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDisabledSwapAndSendNetworksFromAPI=async function(){try{const e=[],t=await(0,l.fetchSwapsFeatureFlags)();return s.ALLOWED_PROD_SWAPS_CHAIN_IDS.forEach((n=>{var r;!1===(null===(r=t[(0,l.getNetworkNameByChainId)(n)])||void 0===r||null===(r=r.v2)||void 0===r||null===(r=r.swapAndSend)||void 0===r?void 0:r.enabled)&&e.push(n)})),e}catch(e){return[]}},n.getSwapAndSendQuotes=async function(e){const{chainId:t,...n}=e;n.slippage=n.slippage??m;const r=new URLSearchParams(n),a=`${h}/${f}/networks/${(0,u.hexToDecimal)(t)}/quotes?${r}`,d=await(0,o.default)({url:a,fetchOptions:{method:"GET",headers:{"X-Client-Id":s.SWAPS_CLIENT_ID}},cacheOptions:{cacheRefreshTime:0,timeout:15*i.SECOND},functionName:"getSwapAndSendQuotes"});return d.map((e=>{if(e.trade&&!e.error&&(0,c.validateData)(p,e,a)){const t=(0,c.addHexPrefixToObjectValues)({to:e.trade.to,from:e.trade.from,data:e.trade.data,value:(0,u.decimalToHex)(e.trade.value),gas:(0,u.decimalToHex)(e.gasParams.maxGas)});let{approvalNeeded:r}=e;return r&&(r=(0,c.addHexPrefixToObjectValues)(r)),{...e,slippage:n.slippage,trade:t,approvalNeeded:r}}return undefined})).filter(Boolean)};var r,a=e("lodash"),s=e("../../../shared/constants/swaps"),i=e("../../../shared/constants/time"),o=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},c=e("../../../shared/lib/swaps-utils"),u=e("../../../shared/modules/conversion.utils"),d=e("../../../shared/modules/hexstring-utils"),l=e("../../pages/swaps/swaps.util");const p=[{property:"gasParams",type:"object",validator:e=>e&&(0,a.isNumber)(e.maxGas)},{property:"trade",type:"object",validator:e=>e&&(0,c.validHex)(e.data)&&(0,d.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,d.isValidHexAddress)(e.from,{allowNonPrefixed:!1})&&(0,c.truthyString)(e.value)},{property:"approvalNeeded",type:"object",validator:e=>null===e||e&&(0,c.validHex)(e.data)&&(0,d.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,d.isValidHexAddress)(e.from,{allowNonPrefixed:!1})},{property:"sourceAmount",type:"string",validator:c.truthyDigitString},{property:"destinationAmount",type:"string",validator:c.truthyDigitString},{property:"sourceToken",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"destinationToken",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"sender",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"recipient",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"aggregator",type:"string",validator:c.truthyString},{property:"aggregatorType",type:"string",validator:c.truthyString},{property:"error",type:"object",validator:e=>null===e||"object"==typeof e},{property:"fee",type:"number"}],m="2",f="v2",h=s.SWAPS_API_V2_BASE_URL}}},{package:"$root$",file:"ui/ducks/send/swap-and-send-utils.ts"}],[5874,{"../../../shared/constants/app":4942,"../../../shared/constants/common":4944,"../../../shared/constants/metametrics":4954,"../../../shared/constants/swaps":4968,"../../../shared/constants/transaction":4972,"../../../shared/lib/swaps-utils":4981,"../../../shared/lib/transactions-controller-utils":4985,"../../../shared/modules/Numeric":4987,"../../../shared/modules/conversion.utils":4992,"../../../shared/modules/selectors":5010,"../../helpers/constants/routes":5884,"../../pages/swaps/swaps.util":6552,"../../selectors":6572,"../../store/actions":6585,"../metamask/metamask":5866,"@metamask/transaction-controller":2623,"@reduxjs/toolkit":2770,"@sentry/browser":2821,"bignumber.js":3401,loglevel:4299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GAS_PRICES_LOADING_STATES=void 0,n.cancelSwapsSmartTransaction=function(e){return async(t,n)=>{try{await t((0,c.cancelSmartTransaction)(e))}catch(e){const{swaps:{isFeatureFlagLoaded:r}}=n();if(e.message.startsWith("Fetch error:")&&r){const n=(0,d.parseSmartTransactionsError)(e.message);t(ve(null==n?void 0:n.error))}}}},n.fetchAndSetSwapsGasPriceInfo=n.default=n.clearSwapsState=void 0,n.fetchMetaSwapsGasPriceEstimates=Re,n.fetchSwapsLivenessAndFeatureFlags=n.fetchQuotesAndSetQuoteState=void 0,n.fetchSwapsSmartTransactionFees=Ce,n.setTransactionSettingsOpened=n.setTopAssets=n.setSwapsFromToken=n.setSwapToToken=n.setSwapQuotesFetchStartTime=n.setReviewSwapClickedTimestamp=n.setMaxSlippage=n.setLatestAddedTokenTo=n.setIsFeatureFlagLoaded=n.setFromTokenInputValue=n.setFromTokenError=n.setFetchingQuotes=n.setBalanceError=n.setAggregatorMetadata=n.prepareToLeaveSwaps=n.prepareForRetryGetQuotes=n.navigateBackToBuildQuote=n.getUsedSwapsGasPrice=n.getUsedQuote=n.getTransactionSettingsOpened=n.getTradeTxId=n.getTopQuote=n.getTopAssets=n.getToToken=n.getSwapsWelcomeMessageSeenStatus=n.getSwapsUserFeeLevel=n.getSwapsTokens=n.getSwapsSTXLoading=n.getSwapsQuoteRefreshTime=n.getSwapsQuotePrefetchingRefreshTime=n.getSwapsNetworkConfig=n.getSwapsFeatureIsLive=n.getSwapsFallbackGasPrice=n.getSwapsErrorKey=n.getSwapsCustomizationModalPrice=n.getSwapsCustomizationModalLimit=n.getSwapRedesignEnabled=n.getSwapGasPriceEstimateData=n.getSmartTransactionsErrorMessageDismissed=n.getSmartTransactionsError=n.getSmartTransactionFees=n.getSmartTransactionEstimatedGas=n.getShowQuoteLoadingScreen=n.getSelectedQuote=n.getReviewSwapClickedTimestamp=n.getQuotesLastFetched=n.getQuotesFetchStartTime=n.getQuotes=n.getPendingSmartTransactions=n.getMaxSlippage=n.getLatestAddedTokenTo=n.getIsFeatureFlagLoaded=n.getFromTokenInputValue=n.getFromTokenError=n.getFromToken=n.getFetchingQuotes=n.getFetchParams=n.getDestinationTokenInfo=n.getCustomSwapsGasPrice=n.getCustomSwapsGas=n.getCustomMaxPriorityFeePerGas=n.getCustomMaxFeePerGas=n.getCurrentSmartTransactionsError=n.getCurrentSmartTransactionsEnabled=n.getCurrentSmartTransactions=n.getBalanceError=n.getBackgroundSwapRouteState=n.getApproveTxParams=n.getApproveTxId=n.getAggregatorMetadata=void 0,n.shouldShowCustomPriceTooLowWarning=function(e){const{average:t}=M(e),n=P(e);if(!n||t===undefined)return!1;return new _.Numeric(n,16,E.EtherDenomination.WEI).toDenomination(E.EtherDenomination.GWEI).greaterThan(t,10)},n.swapsSlice=n.swapsQuoteSelected=n.swapGasPriceEstimateIsLoading=n.swapGasEstimateLoadingHasFailed=n.swapCustomGasModalPriceEdited=n.swapCustomGasModalLimitEdited=n.swapCustomGasModalClosed=n.signAndSendTransactions=n.signAndSendSwapsSmartTransaction=void 0;var r=e("@reduxjs/toolkit"),a=I(e("bignumber.js")),s=I(e("loglevel")),i=e("@sentry/browser"),o=e("@metamask/transaction-controller"),c=e("../../store/actions"),u=e("../../helpers/constants/routes"),d=e("../../pages/swaps/swaps.util"),l=e("../../../shared/modules/conversion.utils"),p=e("../../selectors"),m=e("../../../shared/modules/selectors"),f=e("../../../shared/constants/metametrics"),h=e("../../../shared/constants/swaps"),g=e("../../../shared/constants/transaction"),T=e("../metamask/metamask"),y=e("../../../shared/constants/app"),S=e("../../../shared/lib/transactions-controller-utils"),E=e("../../../shared/constants/common"),_=e("../../../shared/modules/Numeric"),v=e("../../../shared/lib/swaps-utils");function I(e){return e&&e.__esModule?e:{default:e}}const A=n.GAS_PRICES_LOADING_STATES={INITIAL:"INITIAL",LOADING:"LOADING",FAILED:"FAILED",COMPLETED:"COMPLETED"},w={aggregatorMetadata:null,approveTxId:null,tradeTxId:null,balanceError:!1,fetchingQuotes:!1,fromToken:null,fromTokenInputValue:"",fromTokenError:null,isFeatureFlagLoaded:!1,maxSlippage:h.Slippage.default,quotesFetchStartTime:null,reviewSwapClickedTimestamp:null,topAssets:{},toToken:null,customGas:{price:null,limit:null,loading:A.INITIAL,priceEstimates:{},fallBackPrice:null},currentSmartTransactionsError:"",swapsSTXLoading:!1,transactionSettingsOpened:!1,latestAddedTokenTo:""},R=n.swapsSlice=(0,r.createSlice)({name:"swaps",initialState:w,reducers:{clearSwapsState:()=>w,navigatedBackToBuildQuote:e=>{e.approveTxId=null,e.tradeTxId=null,e.balanceError=!1,e.fetchingQuotes=!1,e.customGas.limit=null,e.customGas.price=null},retriedGetQuotes:e=>{e.approveTxId=null,e.balanceError=!1,e.fetchingQuotes=!1},setAggregatorMetadata:(e,t)=>{e.aggregatorMetadata=t.payload},setBalanceError:(e,t)=>{e.balanceError=t.payload},setFetchingQuotes:(e,t)=>{e.fetchingQuotes=t.payload},setLatestAddedTokenTo:(e,t)=>{e.latestAddedTokenTo=t.payload},setFromToken:(e,t)=>{e.fromToken=t.payload},setFromTokenInputValue:(e,t)=>{e.fromTokenInputValue=t.payload},setFromTokenError:(e,t)=>{e.fromTokenError=t.payload},setIsFeatureFlagLoaded:(e,t)=>{e.isFeatureFlagLoaded=t.payload},setMaxSlippage:(e,t)=>{e.maxSlippage=t.payload},setQuotesFetchStartTime:(e,t)=>{e.quotesFetchStartTime=t.payload},setReviewSwapClickedTimestamp:(e,t)=>{e.reviewSwapClickedTimestamp=t.payload},setTopAssets:(e,t)=>{e.topAssets=t.payload},setToToken:(e,t)=>{e.toToken=t.payload},swapCustomGasModalClosed:e=>{e.customGas.price=null,e.customGas.limit=null},swapCustomGasModalPriceEdited:(e,t)=>{e.customGas.price=t.payload},swapCustomGasModalLimitEdited:(e,t)=>{e.customGas.limit=t.payload},swapGasPriceEstimatesFetchStarted:e=>{e.customGas.loading=A.LOADING},swapGasPriceEstimatesFetchFailed:e=>{e.customGas.loading=A.FAILED},swapGasPriceEstimatesFetchCompleted:(e,t)=>{e.customGas.priceEstimates=t.payload.priceEstimates,e.customGas.loading=A.COMPLETED},retrievedFallbackSwapsGasPrice:(e,t)=>{e.customGas.fallBackPrice=t.payload},setCurrentSmartTransactionsError:(e,t)=>{const n=Object.values(d.StxErrorTypes).includes(t.payload)||t.payload===undefined?t.payload:d.StxErrorTypes.unavailable;e.currentSmartTransactionsError=n},setSwapsSTXSubmitLoading:(e,t)=>{e.swapsSTXLoading=t.payload||!1},setTransactionSettingsOpened:(e,t)=>{e.transactionSettingsOpened=Boolean(t.payload)}}}),{actions:C,reducer:N}=R;n.default=N;n.getAggregatorMetadata=e=>e.swaps.aggregatorMetadata;const b=e=>e.swaps.balanceError;n.getBalanceError=b;const O=e=>e.swaps.fromToken;n.getFromToken=O;n.getFromTokenError=e=>e.swaps.fromTokenError;n.getFromTokenInputValue=e=>e.swaps.fromTokenInputValue;n.getIsFeatureFlagLoaded=e=>e.swaps.isFeatureFlagLoaded;n.getSwapsSTXLoading=e=>e.swaps.swapsSTXLoading;n.getMaxSlippage=e=>e.swaps.maxSlippage;n.getTopAssets=e=>e.swaps.topAssets;const k=e=>e.swaps.toToken;n.getToToken=k;n.getFetchingQuotes=e=>e.swaps.fetchingQuotes;const D=e=>e.swaps.latestAddedTokenTo;n.getLatestAddedTokenTo=D;n.getQuotesFetchStartTime=e=>e.swaps.quotesFetchStartTime;n.getReviewSwapClickedTimestamp=e=>e.swaps.reviewSwapClickedTimestamp;const P=e=>e.swaps.customGas.price;n.getSwapsCustomizationModalPrice=P;n.getSwapsCustomizationModalLimit=e=>e.swaps.customGas.limit;n.swapGasPriceEstimateIsLoading=e=>e.swaps.customGas.loading===A.LOADING;n.swapGasEstimateLoadingHasFailed=e=>e.swaps.customGas.loading===A.INITIAL;const M=e=>e.swaps.customGas.priceEstimates;n.getSwapGasPriceEstimateData=M;const x=e=>e.swaps.customGas.fallBackPrice;n.getSwapsFallbackGasPrice=x;const F=e=>e.swaps.currentSmartTransactionsError;n.getCurrentSmartTransactionsError=F;n.getTransactionSettingsOpened=e=>e.swaps.transactionSettingsOpened;const U=e=>e.metamask.swapsState;n.getSwapsFeatureIsLive=e=>e.metamask.swapsState.swapsFeatureIsLive;n.getSmartTransactionsError=e=>e.appState.smartTransactionsError;n.getSmartTransactionsErrorMessageDismissed=e=>e.appState.smartTransactionsErrorMessageDismissed;const L=e=>{const t=(0,m.getSmartTransactionsEnabled)(e),n=F(e);return t&&!n};n.getCurrentSmartTransactionsEnabled=L;n.getSwapRedesignEnabled=e=>{var t;const n=null===(t=e.metamask.swapsState)||void 0===t||null===(t=t.swapsFeatureFlags)||void 0===t?void 0:t.swapRedesign;return n===undefined||n.extensionActive};n.getSwapsQuoteRefreshTime=e=>e.metamask.swapsState.swapsQuoteRefreshTime;n.getSwapsQuotePrefetchingRefreshTime=e=>e.metamask.swapsState.swapsQuotePrefetchingRefreshTime;n.getBackgroundSwapRouteState=e=>e.metamask.swapsState.routeState;const G=e=>e.metamask.swapsState.customMaxGas;n.getCustomSwapsGas=G;const B=e=>e.metamask.swapsState.customGasPrice;n.getCustomSwapsGasPrice=B;const H=e=>e.metamask.swapsState.customMaxFeePerGas;n.getCustomMaxFeePerGas=H;const W=e=>e.metamask.swapsState.customMaxPriorityFeePerGas;n.getCustomMaxPriorityFeePerGas=W;n.getSwapsUserFeeLevel=e=>e.metamask.swapsState.swapsUserFeeLevel;const j=e=>e.metamask.swapsState.fetchParams;n.getFetchParams=j;const K=e=>e.metamask.swapsState.quotes;n.getQuotes=K;n.getQuotesLastFetched=e=>e.metamask.swapsState.quotesLastFetched;const $=e=>{const{selectedAggId:t,quotes:n}=U(e);return n[t]};n.getSelectedQuote=$;n.getSwapsErrorKey=e=>{var t;return null===(t=U(e))||void 0===t?void 0:t.errorKey};n.getShowQuoteLoadingScreen=e=>e.swaps.showQuoteLoadingScreen;const q=e=>e.metamask.swapsState.tokens;n.getSwapsTokens=q;n.getSwapsWelcomeMessageSeenStatus=e=>e.metamask.swapsWelcomeMessageHasBeenShown;const V=e=>{const{topAggId:t,quotes:n}=U(e);return n[t]};n.getTopQuote=V;n.getApproveTxId=e=>e.metamask.swapsState.approveTxId;n.getTradeTxId=e=>e.metamask.swapsState.tradeTxId;const Y=e=>$(e)||V(e);n.getUsedQuote=Y;n.getDestinationTokenInfo=e=>{var t;return null===(t=j(e))||void 0===t||null===(t=t.metaData)||void 0===t?void 0:t.destinationTokenInfo};const Q=e=>B(e)||x(e);n.getUsedSwapsGasPrice=Q;const z=e=>{var t;const{approvalNeeded:n}=$(e)||V(e)||{};if(!n)return null;const r=(null===(t=U(e))||void 0===t?void 0:t.customApproveTxData)||n.data,a=Q(e);return{...n,gasPrice:a,data:r}};n.getApproveTxParams=z;const X=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t?void 0:t[(0,p.getCurrentChainId)(e)]};n.getCurrentSmartTransactions=X;n.getPendingSmartTransactions=e=>{const t=X(e);return t&&0!==t.length?t.filter((e=>e.status===g.SmartTransactionStatus.pending)):[]};n.getSmartTransactionFees=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.fees};n.getSmartTransactionEstimatedGas=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.estimatedGas};const J=e=>{const{swapsQuoteRefreshTime:t,swapsQuotePrefetchingRefreshTime:n,swapsStxGetTransactionsRefreshTime:r,swapsStxBatchStatusRefreshTime:a,swapsStxStatusDeadline:s,swapsStxMaxFeeMultiplier:i}=e.metamask.swapsState;return{quoteRefreshTime:t,quotePrefetchingRefreshTime:n,stxGetTransactionsRefreshTime:r,stxBatchStatusRefreshTime:a,stxStatusDeadline:s,stxMaxFeeMultiplier:i}};n.getSwapsNetworkConfig=J;const{clearSwapsState:Z,navigatedBackToBuildQuote:ee,retriedGetQuotes:te,swapGasPriceEstimatesFetchCompleted:ne,swapGasPriceEstimatesFetchStarted:re,swapGasPriceEstimatesFetchFailed:ae,setAggregatorMetadata:se,setBalanceError:ie,setFetchingQuotes:oe,setLatestAddedTokenTo:ce,setFromToken:ue,setFromTokenError:de,setFromTokenInputValue:le,setIsFeatureFlagLoaded:pe,setMaxSlippage:me,setQuotesFetchStartTime:fe,setReviewSwapClickedTimestamp:he,setTopAssets:ge,setToToken:Te,swapCustomGasModalPriceEdited:ye,swapCustomGasModalLimitEdited:Se,retrievedFallbackSwapsGasPrice:Ee,swapCustomGasModalClosed:_e,setCurrentSmartTransactionsError:ve,setSwapsSTXSubmitLoading:Ie,setTransactionSettingsOpened:Ae}=C;n.setTransactionSettingsOpened=Ae,n.swapCustomGasModalClosed=_e,n.swapCustomGasModalLimitEdited=Se,n.swapCustomGasModalPriceEdited=ye,n.setSwapToToken=Te,n.setTopAssets=ge,n.setReviewSwapClickedTimestamp=he,n.setSwapQuotesFetchStartTime=fe,n.setMaxSlippage=me,n.setIsFeatureFlagLoaded=pe,n.setFromTokenInputValue=le,n.setFromTokenError=de,n.setSwapsFromToken=ue,n.setLatestAddedTokenTo=ce,n.setFetchingQuotes=oe,n.setBalanceError=ie,n.setAggregatorMetadata=se,n.clearSwapsState=Z;n.navigateBackToBuildQuote=e=>async t=>{await t((0,c.setBackgroundSwapRouteState)("")),t(ee()),e.push(u.BUILD_QUOTE_ROUTE)};n.prepareForRetryGetQuotes=()=>async e=>{await e((0,c.resetSwapsPostFetchState)()),e(te())};n.prepareToLeaveSwaps=()=>async e=>{e(Z()),await e((0,c.resetBackgroundSwapsState)())};n.swapsQuoteSelected=e=>t=>{t(Se(null)),t((0,c.setSelectedQuoteAggId)(e)),t((0,c.setSwapsTxGasLimit)(""))};const we=()=>async e=>{const t=await e(Re());null!=t&&t.fast&&e((0,c.setSwapsTxGasPrice)((0,l.decGWEIToHexWEI)(t.fast)))};n.fetchAndSetSwapsGasPriceInfo=we;n.fetchSwapsLivenessAndFeatureFlags=()=>async(e,t)=>{let n={swapsFeatureIsLive:!1};const r=t(),a=(0,p.getCurrentChainId)(r);try{const t=await(0,d.fetchSwapsFeatureFlags)();if(await e((0,c.setSwapsFeatureFlags)(t)),h.ALLOWED_SMART_TRANSACTIONS_CHAIN_IDS.includes(a)){var i;await e(ve(undefined)),await e((0,c.fetchSmartTransactionsLiveness)());((e,t)=>{if(!((null==t?void 0:t.length)<=0))for(const n of t)if(g.IN_PROGRESS_TRANSACTION_STATUSES.includes(n.status)){e(ve(d.StxErrorTypes.regularTxPending));break}})(e,await(0,c.getTransactions)({searchCriteria:{from:null===(i=(0,p.getSelectedInternalAccount)(r))||void 0===i?void 0:i.address}}))}n=(0,d.getSwapsLivenessForNetwork)(a,t)}catch(e){s.default.error("Failed to fetch Swaps feature flags and Swaps liveness, defaulting to false.",e)}return await e((0,c.setSwapsLiveness)(n)),e(pe(!0)),n};n.fetchQuotesAndSetQuoteState=(e,t,n,r,i)=>async(o,l)=>{var g,y,E;const _=l(),v=(0,p.getCurrentChainId)(_);let I={swapsFeatureIsLive:!1};try{const e=await(0,d.fetchSwapsFeatureFlags)();I=(0,d.getSwapsLivenessForNetwork)(v,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await o((0,c.setSwapsLiveness)(I)),!I.swapsFeatureIsLive)return void await e.push(u.SWAPS_MAINTENANCE_ROUTE);const A=j(_),w=(0,p.getSelectedAccount)(_),R=(0,p.getSelectedNetworkClientId)(_),C=b(_),N=(0,p.getSwapsDefaultToken)(_),P=(null==A||null===(g=A.metaData)||void 0===g||null===(g=g.sourceTokenInfo)||void 0===g?void 0:g.symbol)===N.symbol?N:null==A||null===(y=A.metaData)||void 0===y?void 0:y.sourceTokenInfo,M=O(_)||P||{},x=k(_)||(null==A||null===(E=A.metaData)||void 0===E?void 0:E.destinationTokenInfo)||{},{address:F,symbol:U,decimals:G,iconUrl:B,balance:H}=M,{address:W,symbol:K,decimals:$,iconUrl:V}=x;i||(await o((0,c.setBackgroundSwapRouteState)("loading")),e.push(u.LOADING_QUOTES_ROUTE)),o(oe(!0));const Y=(0,p.getTokenExchangeRates)(_);if(!W||K===N.symbol||Y[W]!==undefined||(Q=W,z=(0,T.getTokens)(_),Array.isArray(z)&&z.find((e=>e.address.toLowerCase()===Q.toLowerCase())))){D(_)!==W&&await o(ce(""))}else await o((0,c.addToken)({address:W,symbol:K,decimals:$,image:V,networkClientId:R},!0)),await o(ce(W));var Q,z;F&&U!==N.symbol&&!Y[F]&&H&&new a.default(H,16).gt(0)&&o((0,c.addToken)({address:F,symbol:U,decimals:G,image:B,networkClientId:R},!0));const X=q(_),J=(null==X?void 0:X.find((({address:e})=>e===F)))||M,Z=(null==X?void 0:X.find((({address:e})=>e===W)))||x;o(ue(M));const ee=(0,p.isHardwareWallet)(_),te=(0,p.getHardwareWalletType)(_),ne=(0,p.checkNetworkAndAccountSupports1559)(_),re=(0,m.getSmartTransactionsOptInStatus)(_),ae=(0,m.getSmartTransactionsEnabled)(_),se=L(_);r({event:"Quotes Requested",category:f.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:U,token_from_amount:String(t),token_to:K,request_type:C?"Quote":"Order",slippage:n,custom_slippage:n!==h.Slippage.default,is_hardware_wallet:ee,hardware_wallet_type:te,stx_enabled:ae,current_stx_enabled:se,stx_user_opt_in:re,anonymizedData:!0}});try{var ie;const e=Date.now();o(fe(e));const a=o((0,c.fetchAndSetQuotes)({slippage:n,sourceToken:F,destinationToken:W,value:t,fromAddress:w.address,balanceError:C,sourceDecimals:G},{sourceTokenInfo:J,destinationTokenInfo:Z,accountBalance:w.balance,chainId:v})),s=ne?null:o(we()),[[i,u]]=await Promise.all([a,s]);if(0===(null===(ie=Object.values(i))||void 0===ie?void 0:ie.length))r({event:"No Quotes Available",category:f.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:U,token_from_amount:String(t),token_to:K,request_type:C?"Quote":"Order",slippage:n,custom_slippage:n!==h.Slippage.default,is_hardware_wallet:ee,hardware_wallet_type:te,stx_enabled:ae,current_stx_enabled:se,stx_user_opt_in:re}}),o((0,c.setSwapsErrorKey)(h.QUOTES_NOT_AVAILABLE_ERROR));else{var de;const a=i[u],s=(0,S.calcTokenAmount)(a.destinationAmount,a.decimals||18).toString(10);r({event:"Quotes Received",category:f.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:U,token_from_amount:String(t),token_to:K,token_to_amount:s,request_type:C?"Quote":"Order",slippage:n,custom_slippage:n!==h.Slippage.default,response_time:Date.now()-e,best_quote_source:a.aggregator,available_quotes:null===(de=Object.values(i))||void 0===de?void 0:de.length,is_hardware_wallet:ee,hardware_wallet_type:te,stx_enabled:ae,current_stx_enabled:se,stx_user_opt_in:re,anonymizedData:!0}}),o((0,c.setInitialGasEstimate)(u))}}catch(e){if(e.message===h.SWAPS_FETCH_ORDER_CONFLICT)return void s.default.debug("Swap fetch order conflict detected; ignoring older request");s.default.error("Error fetching quotes: ",e),o((0,c.setSwapsErrorKey)(h.ERROR_FETCHING_QUOTES))}o(oe(!1))};n.signAndSendSwapsSmartTransaction=({unsignedTransaction:e,trackEvent:t,history:n,additionalTrackingParams:r})=>async(a,g)=>{var T,E,_,v,I,A,w,R;a(Ie(!0));const C=g(),N=j(C),b=(0,p.isHardwareWallet)(C),O=(0,p.getHardwareWalletType)(C),{metaData:k,value:D,slippage:P}=N,{sourceTokenInfo:M={},destinationTokenInfo:x={}}=k,F=Y(C),U=J(C),G=(0,p.getCurrentChainId)(C);a((0,c.setSmartTransactionsRefreshInterval)(null==U?void 0:U.stxBatchStatusRefreshTime));const B=F.trade,H=(0,S.calcTokenAmount)(F.destinationAmount,x.decimals||18).toPrecision(8),W=(0,m.getSmartTransactionsOptInStatus)(C),$=(0,m.getSmartTransactionsEnabled)(C),q=L(C),Q={token_from:M.symbol,token_from_amount:String(D),token_to:x.symbol,token_to_amount:H,slippage:P,custom_slippage:2!==P,best_quote_source:null===(T=V(C))||void 0===T?void 0:T.aggregator,available_quotes:null===(E=K(C))||void 0===E?void 0:E.length,other_quote_selected:F.aggregator!==(null===(_=V(C))||void 0===_?void 0:_.aggregator),other_quote_selected_source:F.aggregator===(null===(v=V(C))||void 0===v?void 0:v.aggregator)?"":F.aggregator,average_savings:null===(I=F.savings)||void 0===I?void 0:I.total,performance_savings:null===(A=F.savings)||void 0===A?void 0:A.performance,fee_savings:null===(w=F.savings)||void 0===w?void 0:w.fee,median_metamask_fee:null===(R=F.savings)||void 0===R?void 0:R.medianMetaMaskFee,is_hardware_wallet:b,hardware_wallet_type:O,stx_enabled:$,current_stx_enabled:q,stx_user_opt_in:W,...r};if(t({event:"STX Swap Started",category:f.MetaMetricsEventCategory.Swaps,sensitiveProperties:Q}),!(0,d.isContractAddressValid)(B.to,G))return(0,i.captureMessage)("Invalid contract address",{extra:{token_from:Q.token_from,token_to:Q.token_to,contract_address:B.to}}),await a((0,c.setSwapsErrorKey)(h.SWAP_FAILED_ERROR)),void n.push(u.SWAPS_ERROR_ROUTE);const X=z(C);let Z,ee;try{var te;X&&(ee={...X,value:"0x0"});const t=await a(Ce({unsignedTransaction:e,approveTxParams:ee,fallbackOnNotEnoughFunds:!0}));if(!t)return s.default.error('"fetchSwapsSmartTransactionFees" failed'),void a(ve(d.StxErrorTypes.unavailable));var ne;if(X)ee.gas=`0x${(0,l.decimalToHex)((null===(ne=t.approvalTxFees)||void 0===ne?void 0:ne.gasLimit)||0)}`,ee.chainId=G,Z=await a((0,c.signAndSendSmartTransaction)({unsignedTransaction:ee,smartTransactionFees:t.approvalTxFees}));e.gas=`0x${(0,l.decimalToHex)((null===(te=t.tradeTxFees)||void 0===te?void 0:te.gasLimit)||0)}`,e.chainId=G;const r=await a((0,c.signAndSendSmartTransaction)({unsignedTransaction:e,smartTransactionFees:t.tradeTxFees})),i=x.address,p=x.decimals,m=x.symbol,f=M.symbol;await a((0,c.updateSmartTransaction)(r,{origin:y.ORIGIN_METAMASK,destinationTokenAddress:i,destinationTokenDecimals:p,destinationTokenSymbol:m,sourceTokenSymbol:f,swapMetaData:Q,swapTokenValue:D,type:o.TransactionType.swap})),Z&&await a((0,c.updateSmartTransaction)(Z,{origin:y.ORIGIN_METAMASK,type:o.TransactionType.swapApproval,sourceTokenSymbol:f})),n.push(u.SMART_TRANSACTION_STATUS_ROUTE)}catch(e){console.log("signAndSendSwapsSmartTransaction error",e),a(Ie(!1));const{swaps:{isFeatureFlagLoaded:t}}=g();if(e.message.startsWith("Fetch error:")&&t){const t=(0,d.parseSmartTransactionsError)(e.message);a(ve(null==t?void 0:t.error))}}finally{a(Ie(!1))}};function Re(){return async(e,t)=>{const n=t(),r=(0,p.getCurrentChainId)(n);let a;e(re());try{a=await(0,d.fetchSwapsGasPrices)(r)}catch(t){var i;if(s.default.warn("Fetching swaps gas prices failed:",t),null===(i=t.message)||void 0===i||!i.match(/NetworkError|Fetch failed with status:/u))throw t;e(ae());try{const t=await global.ethQuery.gasPrice(),n=(0,l.hexWEIToDecGWEI)(t.toString(10));return e(Ee(n)),null}catch(e){return console.error("Failed to retrieve fallback gas price: ",e),null}}return e(ne({priceEstimates:a})),a}}function Ce({unsignedTransaction:e,approveTxParams:t,fallbackOnNotEnoughFunds:n=!1}){return async(r,a)=>{const{swaps:{isFeatureFlagLoaded:s}}=a();try{return await r((0,c.fetchSmartTransactionFees)(e,t))}catch(e){if(e.message.startsWith("Fetch error:")&&s){const t=(0,d.parseSmartTransactionsError)(e.message);(n||(null==t?void 0:t.error)!==d.StxErrorTypes.notEnoughFunds)&&r(ve(null==t?void 0:t.error))}}return null}}n.signAndSendTransactions=(e,t,n)=>async(r,g)=>{var y,E,_,I,A,w,R,C,N;const b=g(),O=(0,p.getCurrentChainId)(b),k=(0,p.isHardwareWallet)(b),D=(0,p.checkNetworkAndAccountSupports1559)(b);let P={swapsFeatureIsLive:!1};try{const e=await(0,d.fetchSwapsFeatureFlags)();P=(0,d.getSwapsLivenessForNetwork)(O,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await r((0,c.setSwapsLiveness)(P)),!P.swapsFeatureIsLive)return void await e.push(u.SWAPS_MAINTENANCE_ROUTE);const x=G(b),F=H(b),U=W(b),B=j(b),{metaData:$,value:q,slippage:X}=B,{sourceTokenInfo:J={},destinationTokenInfo:Z={}}=$;await r((0,c.setBackgroundSwapRouteState)("awaiting")),await r((0,c.stopPollingForQuotes)()),k||e.push(u.AWAITING_SWAP_ROUTE);const{fast:ee}=M(b);let te,ne,re,ae;if(D){const{high:{suggestedMaxFeePerGas:e,suggestedMaxPriorityFeePerGas:t},estimatedBaseFee:n="0"}=(0,T.getGasFeeEstimates)(b);ae=(0,l.decGWEIToHexWEI)(n),te=F||(0,l.decGWEIToHexWEI)(e),ne=U||(0,l.decGWEIToHexWEI)(t),re=(0,l.addHexes)(ae,ne)}const se=Y(b),ie=se.trade,oe=new a.default((null==se?void 0:se.gasEstimate)||0,16).round(0).toString(16),ce=(0,v.calculateMaxGasLimit)(null==se?void 0:se.gasEstimate,null==se?void 0:se.gasMultiplier,null==se?void 0:se.maxGas,x),ue=Q(b);ie.gas=ce,D?(ie.maxFeePerGas=te,ie.maxPriorityFeePerGas=ne,delete ie.gasPrice):ie.gasPrice=ue;const de=(0,p.getUSDConversionRate)(b),le=(0,S.calcTokenAmount)(se.destinationAmount,Z.decimals||18).toPrecision(8),pe=(null==se?void 0:se.gasEstimateWithRefund)||`0x${(0,l.decimalToHex)((null==se?void 0:se.averageGas)||0)}`,me=new a.default(pe,16).plus((null===(y=se.approvalNeeded)||void 0===y?void 0:y.gas)||"0x0",16).toString(16),fe=(0,l.getValueFromWeiHex)({value:(0,S.calcGasTotal)(me,D?re:ue),toCurrency:"usd",conversionRate:de,numberOfDecimals:6}),he=(0,m.getSmartTransactionsOptInStatus)(b),ge=(0,m.getSmartTransactionsEnabled)(b),Te=L(b),ye={token_from:J.symbol,token_from_amount:String(q),token_to:Z.symbol,token_to_amount:le,slippage:X,custom_slippage:2!==X,best_quote_source:null===(E=V(b))||void 0===E?void 0:E.aggregator,available_quotes:null===(_=K(b))||void 0===_?void 0:_.length,other_quote_selected:se.aggregator!==(null===(I=V(b))||void 0===I?void 0:I.aggregator),other_quote_selected_source:se.aggregator===(null===(A=V(b))||void 0===A?void 0:A.aggregator)?"":se.aggregator,gas_fees:fe,estimated_gas:new a.default(oe,16).toString(10),suggested_gas_price:ee,used_gas_price:(0,l.hexWEIToDecGWEI)(ue),average_savings:null===(w=se.savings)||void 0===w?void 0:w.total,performance_savings:null===(R=se.savings)||void 0===R?void 0:R.performance,fee_savings:null===(C=se.savings)||void 0===C?void 0:C.fee,median_metamask_fee:null===(N=se.savings)||void 0===N?void 0:N.medianMetaMaskFee,is_hardware_wallet:k,hardware_wallet_type:(0,p.getHardwareWalletType)(b),stx_enabled:ge,current_stx_enabled:Te,stx_user_opt_in:he,...n};if(D&&(ye.max_fee_per_gas=te,ye.max_priority_fee_per_gas=ne,ye.base_and_priority_fee_per_gas=re),t({event:f.MetaMetricsEventName.SwapStarted,category:f.MetaMetricsEventCategory.Swaps,sensitiveProperties:ye}),!(0,d.isContractAddressValid)(ie.to,O))return(0,i.captureMessage)("Invalid contract address",{extra:{token_from:ye.token_from,token_to:ye.token_to,contract_address:ie.to}}),await r((0,c.setSwapsErrorKey)(h.SWAP_FAILED_ERROR)),void e.push(u.SWAPS_ERROR_ROUTE);let Se;const Ee=z(b);if(k&&e.push(u.AWAITING_SIGNATURES_ROUTE),Ee){D&&(Ee.maxFeePerGas=te,Ee.maxPriorityFeePerGas=ne,delete Ee.gasPrice);try{Se=await(0,c.addTransactionAndWaitForPublish)({...Ee,amount:"0x0"},{requireApproval:!1,type:o.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:o.TransactionType.swapApproval,sourceTokenSymbol:J.symbol}}})}catch(t){return await r((0,c.setSwapsErrorKey)(h.SWAP_FAILED_ERROR)),void e.push(u.SWAPS_ERROR_ROUTE)}}try{var _e;await(0,c.addTransactionAndWaitForPublish)(ie,{requireApproval:!1,type:o.TransactionType.swap,swaps:{hasApproveTx:Boolean(Ee),meta:{estimatedBaseFee:ae,sourceTokenSymbol:J.symbol,destinationTokenSymbol:Z.symbol,type:o.TransactionType.swap,destinationTokenDecimals:Z.decimals,destinationTokenAddress:Z.address,swapMetaData:ye,swapTokenValue:q,approvalTxId:null===(_e=Se)||void 0===_e?void 0:_e.id}}})}catch(t){const n=t.message.includes("EthAppPleaseEnableContractData")?h.CONTRACT_DATA_DISABLED_ERROR:h.SWAP_FAILED_ERROR;return console.error(t),await r((0,c.setSwapsErrorKey)(n)),void e.push(u.SWAPS_ERROR_ROUTE)}k&&e.push(u.AWAITING_SWAP_ROUTE),await(0,c.forceUpdateMetamaskState)(r)}}}},{package:"$root$",file:"ui/ducks/swaps/swaps.js"}],[5876,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SUPPORT_REQUEST_LINK=n.SECONDARY=n.PRIMARY=n.PASSWORD_MIN_LENGTH=n.OUTDATED_BROWSER_VERSIONS=n.METAMETRICS_SETTINGS_LINK=n.FIXED_PRERENDER_BROWSER_VERSIONS=n.CONTRACT_ADDRESS_LINK=n.BROKEN_PRERENDER_BROWSER_VERSIONS=void 0;n.PRIMARY="PRIMARY",n.SECONDARY="SECONDARY",n.METAMETRICS_SETTINGS_LINK="https://support.metamask.io/privacy-and-security/how-to-manage-your-metametrics-settings",n.SUPPORT_REQUEST_LINK="https://support.metamask.io",n.CONTRACT_ADDRESS_LINK="https://support.metamask.io/managing-my-tokens/moving-your-tokens/why-am-i-being-warned-about-sending-tokens-to-a-contract/",n.PASSWORD_MIN_LENGTH=8,n.OUTDATED_BROWSER_VERSIONS={chrome:"<109",edge:"<109",firefox:"<102",opera:"<95"},n.BROKEN_PRERENDER_BROWSER_VERSIONS={chrome:">=113",edge:">=113"},n.FIXED_PRERENDER_BROWSER_VERSIONS={windows:{chrome:">=120",edge:">=120"},macos:{chrome:">=120",edge:">=120"},chrome:">=121",edge:">=121"}}}},{package:"$root$",file:"ui/helpers/constants/common.ts"}],[5878,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypographyVariant=n.TextVariant=n.TextTransform=n.TextColor=n.TextAlign=n.TEXT_TRANSFORM=n.TEXT_ALIGN=n.Size=n.Severity=n.SEVERITIES=n.OverflowWrap=n.OVERFLOW_WRAP=n.JustifyContent=n.IconColor=n.FontWeight=n.FontStyle=n.FlexWrap=n.FlexDirection=n.FRACTIONS=n.FONT_WEIGHT=n.FONT_STYLE=n.FLEX_WRAP=n.FLEX_DIRECTION=n.Display=n.DISPLAY=n.Color=n.BorderStyle=n.BorderRadius=n.BorderColor=n.BlockSize=n.BackgroundColor=n.BREAKPOINTS=n.BLOCK_SIZES=n.AlignItems=void 0;n.Color=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.borderDefault="border-default",e.borderMuted="border-muted",e.overlayDefault="overlay-default",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.errorInverse="error-inverse",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.warningInverse="warning-inverse",e.successDefault="success-default",e.successMuted="success-muted",e.successInverse="success-inverse",e.infoDefault="info-default",e.infoMuted="info-muted",e.infoInverse="info-inverse",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.transparent="transparent",e.localhost="localhost",e.inherit="inherit",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e}({}),n.BackgroundColor=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.overlayDefault="overlay-default",e.overlayAlternative="overlay-alternative",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e}({}),n.BorderColor=function(e){return e.borderDefault="border-default",e.borderMuted="border-muted",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e.backgroundDefault="background-default",e}({}),n.TextColor=function(e){return e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.IconColor=function(e){return e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.TypographyVariant=function(e){return e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.H7="h7",e.H8="h8",e.H9="h9",e.paragraph="p",e.span="span",e}({}),n.TextVariant=function(e){return e.displayMd="display-md",e.headingLg="heading-lg",e.headingMd="heading-md",e.headingSm="heading-sm",e.bodyLgMedium="body-lg-medium",e.bodyMd="body-md",e.bodyMdMedium="body-md-medium",e.bodyMdBold="body-md-bold",e.bodySm="body-sm",e.bodySmMedium="body-sm-medium",e.bodySmBold="body-sm-bold",e.bodyXs="body-xs",e.bodyXsMedium="body-xs-medium",e.inherit="inherit",e}({}),n.Size=function(e){return e.XXS="xxs",e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.inherit="inherit",e.auto="auto",e}({}),n.BorderStyle=function(e){return e.dashed="dashed",e.solid="solid",e.dotted="dotted",e.double="double",e.none="none",e}({}),n.BorderRadius=function(e){return e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.none="none",e.pill="pill",e.full="full",e}({}),n.AlignItems=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.baseline="baseline",e.stretch="stretch",e}({}),n.JustifyContent=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.spaceAround="space-around",e.spaceBetween="space-between",e.spaceEvenly="space-evenly",e}({}),n.FlexDirection=function(e){return e.Row="row",e.RowReverse="row-reverse",e.Column="column",e.ColumnReverse="column-reverse",e}({});n.FLEX_DIRECTION={ROW:"row",ROW_REVERSE:"row-reverse",COLUMN:"column",COLUMN_REVERSE:"column-reverse"};n.FlexWrap=function(e){return e.Wrap="wrap",e.WrapReverse="wrap-reverse",e.NoWrap="nowrap",e}({});n.FLEX_WRAP={WRAP:"wrap",WRAP_REVERSE:"wrap-reverse",NO_WRAP:"nowrap"};n.Display=function(e){return e.Block="block",e.Flex="flex",e.Grid="grid",e.InlineBlock="inline-block",e.Inline="inline",e.InlineFlex="inline-flex",e.InlineGrid="inline-grid",e.ListItem="list-item",e.None="none",e}({});n.DISPLAY={BLOCK:"block",FLEX:"flex",GRID:"grid",INLINE_BLOCK:"inline-block",INLINE:"inline",INLINE_FLEX:"inline-flex",INLINE_GRID:"inline-grid",LIST_ITEM:"list-item",NONE:"none"};const r=n.FRACTIONS={HALF:"1/2",ONE_THIRD:"1/3",TWO_THIRDS:"2/3",ONE_FOURTH:"1/4",TWO_FOURTHS:"2/4",THREE_FOURTHS:"3/4",ONE_FIFTH:"1/5",TWO_FIFTHS:"2/5",THREE_FIFTHS:"3/5",FOUR_FIFTHS:"4/5",ONE_SIXTH:"1/6",TWO_SIXTHS:"2/6",THREE_SIXTHS:"3/6",FOUR_SIXTHS:"4/6",FIVE_SIXTHS:"5/6",ONE_TWELFTH:"1/12",TWO_TWELFTHS:"2/12",THREE_TWELFTHS:"3/12",FOUR_TWELFTHS:"4/12",FIVE_TWELFTHS:"5/12",SIX_TWELFTHS:"6/12",SEVEN_TWELFTHS:"7/12",EIGHT_TWELFTHS:"8/12",NINE_TWELFTHS:"9/12",TEN_TWELFTHS:"10/12",ELEVEN_TWELFTHS:"11/12"};n.BlockSize=function(e){return e.Zero="0",e.Half="1/2",e.OneThird="1/3",e.TwoThirds="2/3",e.OneFourth="1/4",e.TwoFourths="2/4",e.ThreeFourths="3/4",e.OneFifth="1/5",e.TwoFifths="2/5",e.ThreeFifths="3/5",e.FourFifths="4/5",e.OneSixth="1/6",e.TwoSixths="2/6",e.ThreeSixths="3/6",e.FourSixths="4/6",e.FiveSixths="5/6",e.OneTwelfth="1/12",e.TwoTwelfths="2/12",e.ThreeTwelfths="3/12",e.FourTwelfths="4/12",e.FiveTwelfths="5/12",e.SixTwelfths="6/12",e.SevenTwelfths="7/12",e.EightTwelfths="8/12",e.NineTwelfths="9/12",e.TenTwelfths="10/12",e.ElevenTwelfths="11/12",e.Screen="screen",e.Max="max",e.Min="min",e.Full="full",e}({});n.BLOCK_SIZES={...r,SCREEN:"screen",MAX:"max",MIN:"min",FULL:"full"};n.TextAlign=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Justify="justify",e.End="end",e.Start="start",e}({});n.TEXT_ALIGN={LEFT:"left",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",END:"end",START:"start"};n.TextTransform=function(e){return e.Uppercase="uppercase",e.Lowercase="lowercase",e.Capitalize="capitalize",e}({});n.TEXT_TRANSFORM={UPPERCASE:"uppercase",LOWERCASE:"lowercase",CAPITALIZE:"capitalize"};n.FontWeight=function(e){return e.Bold="bold",e.Medium="medium",e.Normal="normal",e}({});n.FONT_WEIGHT={BOLD:"bold",MEDIUM:"medium",NORMAL:"normal"};n.OverflowWrap=function(e){return e.BreakWord="break-word",e.Anywhere="anywhere",e.Normal="normal",e}({});n.OVERFLOW_WRAP={BREAK_WORD:"break-word",ANYWHERE:"anywhere",NORMAL:"normal"};n.FontStyle=function(e){return e.Italic="italic",e.Normal="normal",e}({});n.FONT_STYLE={ITALIC:"italic",NORMAL:"normal"};n.Severity=function(e){return e.Danger="danger",e.Warning="warning",e.Info="info",e.Success="success",e}({});n.SEVERITIES={DANGER:"danger",WARNING:"warning",INFO:"info",SUCCESS:"success"},n.BREAKPOINTS=["base","sm","md","lg"]}}},{package:"$root$",file:"ui/helpers/constants/design-system.ts"}],[5879,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY=n.UNSENDABLE_ASSET_ERROR_KEY=n.TRANSACTION_ERROR_KEY=n.IS_SIGNING_OR_SUBMITTING=n.INVALID_ASSET_TYPE=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=n.INSUFFICIENT_FUNDS_ERROR_KEY=n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=n.GAS_PRICE_EXCESSIVE_ERROR_KEY=n.GAS_LIMIT_TOO_LOW_ERROR_KEY=n.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;n.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds",n.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow",n.TRANSACTION_ERROR_KEY="transactionError",n.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning",n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed",n.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive",n.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas",n.INVALID_ASSET_TYPE="invalidAssetType",n.IS_SIGNING_OR_SUBMITTING="isSigningOrSubmitting",n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY="userOpContractDeployError"}}},{package:"$root$",file:"ui/helpers/constants/error-keys.js"}],[588,{"@firebase/app":583,"@firebase/component":584,"@firebase/installations":585,"@firebase/util":589,idb:4090,tslib:4827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),e("@firebase/installations");var r,a,s=e("@firebase/component"),i=e("tslib"),o=e("idb"),c=e("@firebase/util"),u=e("@firebase/app"),d="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",l="https://fcmregistrations.googleapis.com/v1",p="FCM_MSG",m="google.c.a.c_id",f=3,h=1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function g(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,i.__spreadArray([],i.__read(t),!1))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function T(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(r||(r={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(a||(a={}));var y="fcm_token_details_db",S=5,E="fcm_token_object_Store";function _(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a=this;return i.__generator(this,(function(s){switch(s.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=s.sent(),n=t.map((function(e){return e.name})),!n.includes(y))return[2,null];s.label=2;case 2:return r=null,[4,o.openDB(y,S,{upgrade:function(t,n,s,o){return i.__awaiter(a,void 0,void 0,(function(){var a,s,c,u;return i.__generator(this,(function(i){switch(i.label){case 0:return n<2?[2]:t.objectStoreNames.contains(E)?[4,(a=o.objectStore(E)).index("fcmSenderId").get(e)]:[2];case 1:return s=i.sent(),[4,a.clear()];case 2:if(i.sent(),!s)return[2];if(2===n){if(!(c=s).auth||!c.p256dh||!c.endpoint)return[2];r={token:c.fcmToken,createTime:null!==(u=c.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:"string"==typeof c.vapidKey?c.vapidKey:g(c.vapidKey)}}}else(3===n||4===n)&&(r={token:(c=s).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:g(c.auth),p256dh:g(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:g(c.vapidKey)}});return[2]}}))}))}})];case 3:return s.sent().close(),[4,o.deleteDB(y)];case 4:return s.sent(),[4,o.deleteDB("fcm_vapid_details_db")];case 5:return s.sent(),[4,o.deleteDB("undefined")];case 6:return s.sent(),[2,v(r)?r:null]}}))}))}function v(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I,A="firebase-messaging-database",w=1,R="firebase-messaging-store",C=null;function N(){return C||(C=o.openDB(A,w,{upgrade:function(e,t){if(0===t)e.createObjectStore(R)}})),C}function b(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r;return i.__generator(this,(function(a){switch(a.label){case 0:return t=D(e),[4,N()];case 1:return[4,a.sent().transaction(R).objectStore(R).get(t)];case 2:return(n=a.sent())?[2,n]:[3,3];case 3:return[4,_(e.appConfig.senderId)];case 4:return(r=a.sent())?[4,O(e,r)]:[3,6];case 5:return a.sent(),[2,r];case 6:return[2]}}))}))}function O(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,a;return i.__generator(this,(function(s){switch(s.label){case 0:return n=D(e),[4,N()];case 1:return r=s.sent(),[4,(a=r.transaction(R,"readwrite")).objectStore(R).put(t,n)];case 2:return s.sent(),[4,a.done];case 3:return s.sent(),[2,t]}}))}))}function k(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r;return i.__generator(this,(function(a){switch(a.label){case 0:return t=D(e),[4,N()];case 1:return n=a.sent(),[4,(r=n.transaction(R,"readwrite")).objectStore(R).delete(t)];case 2:return a.sent(),[4,r.done];case 3:return a.sent(),[2]}}))}))}function D(e){return e.appConfig.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=((I={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',I["only-available-in-window"]="This method is available in a Window context.",I["only-available-in-sw"]="This method is available in a service worker context.",I["permission-default"]="The notification permission was not granted and dismissed instead.",I["permission-blocked"]="The notification permission was not granted and blocked instead.",I["unsupported-browser"]="This browser doesn't support the API's required to use the Firebase SDK.",I["indexed-db-unsupported"]="This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",I["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",I["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",I["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",I["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",I["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",I["token-update-no-token"]="FCM returned no token when updating the user to push.",I["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",I["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",I["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",I["invalid-vapid-key"]="The public VAPID key must be a string.",I["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",I),M=new c.ErrorFactory("messaging","Messaging",P);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function x(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,a,s,o,c;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,G(e)];case 1:n=i.sent(),r=B(t),a={method:"POST",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(L(e.appConfig),a)];case 3:return[4,i.sent().json()];case 4:return s=i.sent(),[3,6];case 5:throw o=i.sent(),M.create("token-subscribe-failed",{errorInfo:null==o?void 0:o.toString()});case 6:if(s.error)throw c=s.error.message,M.create("token-subscribe-failed",{errorInfo:c});if(!s.token)throw M.create("token-subscribe-no-token");return[2,s.token]}}))}))}function F(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,a,s,o,c;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,G(e)];case 1:n=i.sent(),r=B(t.subscriptionOptions),a={method:"PATCH",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch("".concat(L(e.appConfig),"/").concat(t.token),a)];case 3:return[4,i.sent().json()];case 4:return s=i.sent(),[3,6];case 5:throw o=i.sent(),M.create("token-update-failed",{errorInfo:null==o?void 0:o.toString()});case 6:if(s.error)throw c=s.error.message,M.create("token-update-failed",{errorInfo:c});if(!s.token)throw M.create("token-update-no-token");return[2,s.token]}}))}))}function U(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,a,s,o;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,G(e)];case 1:n=i.sent(),r={method:"DELETE",headers:n},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch("".concat(L(e.appConfig),"/").concat(t),r)];case 3:return[4,i.sent().json()];case 4:if((a=i.sent()).error)throw s=a.error.message,M.create("token-unsubscribe-failed",{errorInfo:s});return[3,6];case 5:throw o=i.sent(),M.create("token-unsubscribe-failed",{errorInfo:null==o?void 0:o.toString()});case 6:return[2]}}))}))}function L(e){var t=e.projectId;return"".concat(l,"/projects/").concat(t,"/registrations")}function G(e){var t=e.appConfig,n=e.installations;return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(e)})]}}))}))}function B(e){var t=e.p256dh,n=e.auth,r=e.endpoint,a=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return a!==d&&(s.web.applicationPubKey=a),s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=6048e5;function W(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;return i.__generator(this,(function(s){switch(s.label){case 0:return[4,q(e.swRegistration,e.vapidKey)];case 1:return t=s.sent(),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:g(t.getKey("auth")),p256dh:g(t.getKey("p256dh"))},[4,b(e.firebaseDependencies)];case 2:return(r=s.sent())?[3,3]:[2,$(e.firebaseDependencies,n)];case 3:if(i=r.subscriptionOptions,c=(o=n).vapidKey===i.vapidKey,u=o.endpoint===i.endpoint,d=o.auth===i.auth,l=o.p256dh===i.p256dh,c&&u&&d&&l)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,U(e.firebaseDependencies,r.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,$(e.firebaseDependencies,n)];case 8:return Date.now()>=r.createTime+H?[2,K(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n})]:[2,r.token];case 9:return[2]}var i,o,c,u,d,l;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function j(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,b(e.firebaseDependencies)];case 1:return(t=r.sent())?[4,U(e.firebaseDependencies,t.token)]:[3,4];case 2:return r.sent(),[4,k(e.firebaseDependencies)];case 3:r.sent(),r.label=4;case 4:return[4,e.swRegistration.pushManager.getSubscription()];case 5:return(n=r.sent())?[2,n.unsubscribe()]:[2,!0]}}))}))}function K(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,F(e.firebaseDependencies,t)];case 1:return n=a.sent(),r=i.__assign(i.__assign({},t),{token:n,createTime:Date.now()}),[4,O(e.firebaseDependencies,r)];case 2:return a.sent(),[2,n];case 3:throw a.sent();case 4:return[2]}}))}))}function $(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(a){switch(a.label){case 0:return[4,x(e,t)];case 1:return n=a.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,O(e,r)];case 2:return a.sent(),[2,r.token]}}))}))}function q(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:T(t)})]}}))}))}function V(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,a;return i.__generator(this,(function(s){switch(s.label){case 0:return r=Y,a=[t],[4,e.firebaseDependencies.installations.getId()];case 1:return n=r.apply(void 0,a.concat([s.sent()])),function(e,t,n){var r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify(t),!n||(r.compliance_data=function(e){var t={privacy_context:{prequest:{origin_associated_product_id:e}}};return t}(n));e.logEvents.push(r)}(e,n,t.productId),[2]}}))}))}function Y(e,t){var n,a,s={};return e.from&&(s.project_number=e.from),e.fcmMessageId&&(s.message_id=e.fcmMessageId),s.instance_id=t,e.notification?s.message_type=r.DISPLAY_NOTIFICATION.toString():s.message_type=r.DATA_MESSAGE.toString(),s.sdk_platform=f.toString(),s.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(s.collapse_key=e.collapse_key),s.event=h.toString(),(null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label)&&(s.analytics_label=null===(a=e.fcmOptions)||void 0===a?void 0:a.analytics_label),s}function Q(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e){var t,n;return i.__awaiter(this,void 0,void 0,(function(){var r,s,o,c,u;return i.__generator(this,(function(i){switch(i.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[p])?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),s=function(e){var t,n,r,a=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(a)return a;return s=e.data,"object"==typeof s&&s&&m in s?self.location.origin:null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var s;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r),s?(o=new URL(s,self.location.href),c=new URL(self.location.origin),o.host!==c.host?[2]:[4,J(o)]):[2]):[2];case 1:return(u=i.sent())?[3,4]:[4,self.clients.openWindow(s)];case 2:return u=i.sent(),[4,(d=3e3,new Promise((function(e){setTimeout(e,d)})))];case 3:return i.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=i.sent(),i.label=6;case 6:return u?(r.messageType=a.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,u.postMessage(r)]):[2]}var d;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function X(e){var t,n=i.__assign({},e.notification);return n.data=((t={})[p]=e,t),n}function J(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a,s,o,c;return i.__generator(this,(function(u){switch(u.label){case 0:return[4,ee()];case 1:t=u.sent();try{for(n=i.__values(t),r=n.next();!r.done;r=n.next())if(a=r.value,s=new URL(a.url,self.location.href),e.host===s.host)return[2,a]}catch(e){o={error:e}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(o)throw o.error}}return[2,null]}}))}))}function Z(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=a.PUSH_RECEIVED;try{for(var s=i.__values(e),o=s.next();!o.done;o=s.next()){o.value.postMessage(t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function ee(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function te(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports ".concat(r," actions. The remaining actions will not be displayed.")),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function ne(e){return M.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Q("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Q("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var re=function(){function e(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var r=function(e){var t,n;if(!e||!e.options)throw ne("App Configuration Object");if(!e.name)throw ne("App Name");var r=e.options;try{for(var a=i.__values(["projectId","apiKey","appId","messagingSenderId"]),s=a.next();!s.done;s=a.next()){var o=s.value;if(!r[o])throw ne(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}return e.prototype._delete=function(){return Promise.resolve()},e}(),ae=function(e){var t=new re(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(function(e){e.waitUntil(function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,a;return i.__generator(this,(function(s){switch(s.label){case 0:return n=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(e),n?t.deliveryMetricsExportedToBigQueryEnabled?[4,V(t,n)]:[3,2]:[2];case 1:s.sent(),s.label=2;case 2:return[4,ee()];case 3:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(r=s.sent())?[2,Z(r,n)]:n.notification?[4,te(X(n))]:[3,5];case 4:s.sent(),s.label=5;case 5:return t?t.onBackgroundMessageHandler?(a=function(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var a=t.notification.image;a&&(e.notification.image=a);var s=t.notification.icon;s&&(e.notification.icon=s)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var n,r,a,s,i;if(t.fcmOptions||(null===(n=t.notification)||void 0===n?void 0:n.click_action)){e.fcmOptions={};var o=null!==(a=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==a?a:null===(s=t.notification)||void 0===s?void 0:s.click_action;o&&(e.fcmOptions.link=o);var c=null===(i=t.fcmOptions)||void 0===i?void 0:i.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}}(t,e),t}(n),"function"!=typeof t.onBackgroundMessageHandler?[3,7]:[4,t.onBackgroundMessageHandler(a)]):[3,8]:[2];case 6:return s.sent(),[3,8];case 7:t.onBackgroundMessageHandler.next(a),s.label=8;case 8:return[2]}}))}))}(e,t))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(function(e,t){var n,r;return i.__awaiter(this,void 0,void 0,(function(){var a;return i.__generator(this,(function(s){switch(s.label){case 0:return e.newSubscription?[3,2]:[4,j(t)];case 1:case 5:return s.sent(),[2];case 2:return[4,b(t.firebaseDependencies)];case 3:return a=s.sent(),[4,j(t)];case 4:return s.sent(),t.vapidKey=null!==(r=null===(n=null==a?void 0:a.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:d,[4,W(t)]}}))}))}(e,t))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(z(e))})),t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function se(){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return(e=c.isIndexedDBAvailable())?[4,c.validateIndexedDBOpenable()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[2,e&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */u._registerComponent(new s.Component("messaging-sw",ae,"PUBLIC")),n.experimentalSetDeliveryMetricsExportedToBigQueryEnabled=function(e,t){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t){e.deliveryMetricsExportedToBigQueryEnabled=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e=c.getModularInstance(e),t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.getMessaging=function(e){return void 0===e&&(e=u.getApp()),se().then((function(e){if(!e)throw M.create("unsupported-browser")}),(function(e){throw M.create("indexed-db-unsupported")})),u._getProvider(c.getModularInstance(e),"messaging-sw").getImmediate()},n.isSupported=se,n.onBackgroundMessage=function(e,t){return function(e,t){if(self.document!==undefined)throw M.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,function(){e.onBackgroundMessageHandler=null}}(e=c.getModularInstance(e),t)}}}},{package:"@metamask/notification-services-controller>firebase>@firebase/messaging",file:"node_modules/@firebase/messaging/dist/index.sw.cjs"}],[5882,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NOTIFICATIONS_EXPIRATION_DELAY=void 0;n.NOTIFICATIONS_EXPIRATION_DELAY=1e4}}},{package:"$root$",file:"ui/helpers/constants/notifications.ts"}],[5883,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PRIVACY_POLICY_DATE=void 0;n.PRIVACY_POLICY_DATE="2024-06-18T12:00:00Z"}}},{package:"$root$",file:"ui/helpers/constants/privacy-policy.ts"}],[5884,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.VIEW_QUOTE_ROUTE=n.UNLOCK_ROUTE=n.TOKEN_DETAILS=n.SWAPS_ROUTE=n.SWAPS_NOTIFICATION_ROUTE=n.SWAPS_MAINTENANCE_ROUTE=n.SWAPS_ERROR_ROUTE=n.SNAPS_VIEW_ROUTE=n.SNAPS_ROUTE=n.SMART_TRANSACTION_STATUS_ROUTE=n.SIGNATURE_REQUEST_PATH=n.SETTINGS_ROUTE=n.SEND_ROUTE=n.SECURITY_ROUTE=n.REVEAL_SEED_ROUTE=n.RESTORE_VAULT_ROUTE=n.PREPARE_SWAP_ROUTE=n.PERMISSIONS=n.PATH_NAME_MAP=n.ONBOARDING_WELCOME_ROUTE=n.ONBOARDING_UNLOCK_ROUTE=n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE=n.ONBOARDING_ROUTE=n.ONBOARDING_REVIEW_SRP_ROUTE=n.ONBOARDING_PRIVACY_SETTINGS_ROUTE=n.ONBOARDING_PIN_EXTENSION_ROUTE=n.ONBOARDING_METAMETRICS=n.ONBOARDING_IMPORT_WITH_SRP_ROUTE=n.ONBOARDING_HELP_US_IMPROVE_ROUTE=n.ONBOARDING_CREATE_PASSWORD_ROUTE=n.ONBOARDING_CONFIRM_SRP_ROUTE=n.ONBOARDING_COMPLETION_ROUTE=n.NOTIFICATIONS_SETTINGS_ROUTE=n.NOTIFICATIONS_ROUTE=n.NEW_ACCOUNT_ROUTE=n.NETWORKS_ROUTE=n.NETWORKS_FORM_ROUTE=n.MMI_ONBOARDING_COMPLETION_ROUTE=n.LOCK_ROUTE=n.LOADING_QUOTES_ROUTE=n.IMPORT_TOKEN_ROUTE=n.IMPORT_TOKENS_ROUTE=n.GENERAL_ROUTE=n.EXPERIMENTAL_ROUTE=n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=n.DEVELOPER_OPTIONS_ROUTE=n.DEFAULT_ROUTE=n.DECRYPT_MESSAGE_REQUEST_PATH=n.CROSS_CHAIN_SWAP_ROUTE=n.CONTACT_VIEW_ROUTE=n.CONTACT_LIST_ROUTE=n.CONTACT_EDIT_ROUTE=n.CONTACT_ADD_ROUTE=n.CONNECT_SNAP_UPDATE_ROUTE=n.CONNECT_SNAP_RESULT_ROUTE=n.CONNECT_SNAP_INSTALL_ROUTE=n.CONNECT_SNAPS_CONNECT_ROUTE=n.CONNECT_ROUTE=n.CONNECT_HARDWARE_ROUTE=n.CONNECT_CONFIRM_PERMISSIONS_ROUTE=n.CONNECTIONS=n.CONNECTED_ROUTE=n.CONNECTED_ACCOUNTS_ROUTE=n.CONFIRM_TRANSFER_FROM_PATH=n.CONFIRM_TRANSACTION_ROUTE=n.CONFIRM_TOKEN_METHOD_PATH=n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH=n.CONFIRM_SEND_TOKEN_PATH=n.CONFIRM_SEND_ETHER_PATH=n.CONFIRM_SAFE_TRANSFER_FROM_PATH=n.CONFIRM_INCREASE_ALLOWANCE_PATH=n.CONFIRM_IMPORT_TOKEN_ROUTE=n.CONFIRM_DEPLOY_CONTRACT_PATH=n.CONFIRM_APPROVE_PATH=n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE=n.CONFIRMATION_V_NEXT_ROUTE=n.BUILD_QUOTE_ROUTE=n.AWAITING_SWAP_ROUTE=n.AWAITING_SIGNATURES_ROUTE=n.ASSET_ROUTE=n.ALERTS_ROUTE=n.ADVANCED_ROUTE=n.ADD_POPULAR_CUSTOM_NETWORK=n.ADD_NETWORK_ROUTE=n.ABOUT_US_ROUTE=void 0;const r=n.DEFAULT_ROUTE="/",a=n.UNLOCK_ROUTE="/unlock",s=n.LOCK_ROUTE="/lock",i=n.ASSET_ROUTE="/asset",o=n.SETTINGS_ROUTE="/settings",c=n.GENERAL_ROUTE="/settings/general",u=n.ADVANCED_ROUTE="/settings/advanced",d=(n.DEVELOPER_OPTIONS_ROUTE="/settings/developer-options",n.EXPERIMENTAL_ROUTE="/settings/experimental"),l=n.SECURITY_ROUTE="/settings/security",p=n.ABOUT_US_ROUTE="/settings/about-us",m=n.ALERTS_ROUTE="/settings/alerts",f=n.NETWORKS_ROUTE="/settings/networks",h=n.NETWORKS_FORM_ROUTE="/settings/networks/form",g=n.ADD_NETWORK_ROUTE="/settings/networks/add-network",T=n.ADD_POPULAR_CUSTOM_NETWORK="/settings/networks/add-popular-custom-network",y=n.CONTACT_LIST_ROUTE="/settings/contact-list",S=n.CONTACT_EDIT_ROUTE="/settings/contact-list/edit-contact",E=n.CONTACT_ADD_ROUTE="/settings/contact-list/add-contact",_=n.CONTACT_VIEW_ROUTE="/settings/contact-list/view-contact",v=n.REVEAL_SEED_ROUTE="/seed",I=n.RESTORE_VAULT_ROUTE="/restore-vault",A=n.IMPORT_TOKEN_ROUTE="/import-token",w=n.IMPORT_TOKENS_ROUTE="/import-tokens",R=n.CONFIRM_IMPORT_TOKEN_ROUTE="/confirm-import-token",C=n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE="/confirm-add-suggested-token",N=n.NEW_ACCOUNT_ROUTE="/new-account",b=n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE="/confirm-add-suggested-nft",O=n.CONNECT_HARDWARE_ROUTE="/new-account/connect",k=n.SEND_ROUTE="/send",D=n.CONNECTIONS="/connections",P=n.PERMISSIONS="/permissions",M=n.TOKEN_DETAILS="/token-details",x=n.CONNECT_ROUTE="/connect",F=n.CONNECT_CONFIRM_PERMISSIONS_ROUTE="/confirm-permissions",U=n.CONNECT_SNAPS_CONNECT_ROUTE="/snaps-connect",L=n.CONNECT_SNAP_INSTALL_ROUTE="/snap-install",G=n.CONNECT_SNAP_UPDATE_ROUTE="/snap-update",B=n.CONNECT_SNAP_RESULT_ROUTE="/snap-install-result",H=n.SNAPS_ROUTE="/snaps",W=n.SNAPS_VIEW_ROUTE="/snaps/view",j=n.NOTIFICATIONS_ROUTE="/notifications",K=n.NOTIFICATIONS_SETTINGS_ROUTE="/notifications/settings",$=n.CONNECTED_ROUTE="/connected",q=n.CONNECTED_ACCOUNTS_ROUTE="/connected/accounts",V=(n.CROSS_CHAIN_SWAP_ROUTE="/cross-chain",n.SWAPS_ROUTE="/swaps",n.PREPARE_SWAP_ROUTE="/swaps/prepare-swap-page"),Y=n.SWAPS_NOTIFICATION_ROUTE="/swaps/notification-page",Q=n.BUILD_QUOTE_ROUTE="/swaps/build-quote",z=n.VIEW_QUOTE_ROUTE="/swaps/view-quote",X=n.LOADING_QUOTES_ROUTE="/swaps/loading-quotes",J=(n.AWAITING_SIGNATURES_ROUTE="/swaps/awaiting-signatures",n.SMART_TRANSACTION_STATUS_ROUTE="/swaps/smart-transaction-status",n.AWAITING_SWAP_ROUTE="/swaps/awaiting-swap"),Z=n.SWAPS_ERROR_ROUTE="/swaps/swaps-error",ee=(n.SWAPS_MAINTENANCE_ROUTE="/swaps/maintenance",n.ONBOARDING_ROUTE="/onboarding",n.ONBOARDING_REVIEW_SRP_ROUTE="/onboarding/review-recovery-phrase",n.ONBOARDING_CONFIRM_SRP_ROUTE="/onboarding/confirm-recovery-phrase",n.ONBOARDING_CREATE_PASSWORD_ROUTE="/onboarding/create-password",n.ONBOARDING_COMPLETION_ROUTE="/onboarding/completion",n.MMI_ONBOARDING_COMPLETION_ROUTE="/onboarding/account-completion",n.ONBOARDING_UNLOCK_ROUTE="/onboarding/unlock",n.ONBOARDING_HELP_US_IMPROVE_ROUTE="/onboarding/help-us-improve",n.ONBOARDING_IMPORT_WITH_SRP_ROUTE="/onboarding/import-with-recovery-phrase",n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE="/onboarding/secure-your-wallet",n.ONBOARDING_PRIVACY_SETTINGS_ROUTE="/onboarding/privacy-settings",n.ONBOARDING_PIN_EXTENSION_ROUTE="/onboarding/pin-extension",n.ONBOARDING_WELCOME_ROUTE="/onboarding/welcome",n.ONBOARDING_METAMETRICS="/onboarding/metametrics",n.CONFIRM_TRANSACTION_ROUTE="/confirm-transaction"),te=n.CONFIRM_SEND_ETHER_PATH="/send-ether",ne=n.CONFIRM_SEND_TOKEN_PATH="/send-token",re=n.CONFIRM_DEPLOY_CONTRACT_PATH="/deploy-contract",ae=n.CONFIRM_APPROVE_PATH="/approve",se=n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH="/set-approval-for-all",ie=n.CONFIRM_TRANSFER_FROM_PATH="/transfer-from",oe=n.CONFIRM_SAFE_TRANSFER_FROM_PATH="/safe-transfer-from",ce=n.CONFIRM_TOKEN_METHOD_PATH="/token-method",ue=n.CONFIRM_INCREASE_ALLOWANCE_PATH="/increase-allowance",de=n.SIGNATURE_REQUEST_PATH="/signature-request",le=n.DECRYPT_MESSAGE_REQUEST_PATH="/decrypt-message-request",pe=n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH="/encryption-public-key-request",me=n.CONFIRMATION_V_NEXT_ROUTE="/confirmation";n.PATH_NAME_MAP={[r]:"Home",[a]:"Unlock Page",[s]:"Lock Page",[`${i}/:asset/:id`]:"Asset Page",[`${i}/image/:asset/:id`]:"Nft Image Page",[o]:"Settings Page",[c]:"General Settings Page",[u]:"Advanced Settings Page",[d]:"Experimental Settings Page",[l]:"Security Settings Page",[p]:"About Us Page",[m]:"Alerts Settings Page",[f]:"Network Settings Page",[h]:"Network Settings Page Form",[g]:"Add Network From Settings Page Form",[T]:"Add Network From A List Of Popular Custom Networks",[y]:"Contact List Settings Page",[`${S}/:address`]:"Edit Contact Settings Page",[E]:"Add Contact Settings Page",[`${_}/:address`]:"View Contact Settings Page",[v]:"Reveal Secret Recovery Phrase Page",[I]:"Restore Vault Page",[A]:"Import Token Page",[R]:"Confirm Import Token Page",[C]:"Confirm Add Suggested Token Page",[w]:"Import Tokens Page",[N]:"New Account Page",[b]:"Confirm Add Suggested NFT Page",[O]:"Connect Hardware Wallet Page",[j]:"Notifications Page",[K]:"Notifications Settings Page",[`${j}/:uuid`]:"Notification Detail Page",[`${x}/:id${U}`]:"Snaps Connect Page",[`${x}/:id${L}`]:"Snap Install Page",[`${x}/:id${G}`]:"Snap Update Page",[`${x}/:id${B}`]:"Snap Install Result Page",[H]:"Snaps List Page",[`${W}/:snapId`]:"Snap View Page",[k]:"Send Page",[D]:"Connections",[P]:"Permissions",[`${M}/:address`]:"Token Details Page",[`${x}/:id`]:"Connect To Site Confirmation Page",[`${x}/:id${F}`]:"Grant Connected Site Permissions Confirmation Page",[$]:"Sites Connected To This Account Page",[q]:"Accounts Connected To This Site Page",[`${ee}/:id`]:"Confirmation Root Page",[ee]:"Confirmation Root Page",[me]:"New Confirmation Page",[`${me}/:id`]:"New Confirmation Page",[`${ee}/:id${ce}`]:"Confirm Token Method Transaction Page",[`${ee}/:id${te}`]:"Confirm Send Ether Transaction Page",[`${ee}/:id${ne}`]:"Confirm Send Token Transaction Page",[`${ee}/:id${re}`]:"Confirm Deploy Contract Transaction Page",[`${ee}/:id${ae}`]:"Confirm Approve Transaction Page",[`${ee}/:id${se}`]:"Confirm Set Approval For All Transaction Page",[`${ee}/:id${ue}`]:"Confirm Increase Allowance Transaction Page",[`${ee}/:id${ie}`]:"Confirm Transfer From Transaction Page",[`${ee}/:id${oe}`]:"Confirm Safe Transfer From Transaction Page",[`${ee}/:id${de}`]:"Signature Request Page",[`${ee}/:id${le}`]:"Decrypt Message Request Page",[`${ee}/:id${pe}`]:"Encryption Public Key Request Page",[Q]:"Swaps Build Quote Page",[V]:"Prepare Swap Page",[Y]:"Swaps Notification Page",[z]:"Swaps View Quotes Page",[X]:"Swaps Loading Quotes Page",[J]:"Swaps Awaiting Swaps Page",[Z]:"Swaps Error Page"}}}},{package:"$root$",file:"ui/helpers/constants/routes.ts"}],[5889,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SURVEY_START_TIME=n.SURVEY_START_HOUR=n.SURVEY_GMT=n.SURVEY_END_TIME=n.SURVEY_END_HOUR=n.SURVEY_DATE=void 0;n.SURVEY_DATE="February 28 2024";const r=n.SURVEY_GMT="GMT-0600",a=n.SURVEY_START_HOUR="12:00:00",s=n.SURVEY_END_HOUR="13:00:00";n.SURVEY_START_TIME=`${a} ${r}`,n.SURVEY_END_TIME=`${s} ${r}`}}},{package:"$root$",file:"ui/helpers/constants/survey.ts"}],[589,{_process:4435},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.Sha1=n.RANDOM_FACTOR=n.MAX_VALUE_MILLIS=n.FirebaseError=n.ErrorFactory=n.Deferred=n.DecodeBase64StringError=n.CONSTANTS=void 0,n.areCookiesEnabled=function(){if("undefined"==typeof navigator||!navigator.cookieEnabled)return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.assertionError=n.assert=void 0,n.async=function(e,t){return(...n)=>{Promise.resolve(!0).then((()=>{e(...n)})).catch((e=>{t&&t(e)}))}},n.base64urlEncodeWithoutPadding=n.base64Encode=n.base64Decode=n.base64=void 0,n.calculateBackoffMillis=function(e,t=C,n=N){const r=t*Math.pow(n,e),a=Math.round(O*r*(Math.random()-.5)*2);return Math.min(b,r+a)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.createSubscribe=function(e,t){const n=new A(e,t);return n.subscribe.bind(n)},n.decode=void 0,n.deepCopy=function(e){return l(undefined,e)},n.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),a=Object.keys(n);for(const s of r){if(!a.includes(s))return!1;const r=t[s],i=n[s];if(I(r)&&I(i)){if(!e(r,i))return!1}else if(r!==i)return!1}for(const e of a)if(!r.includes(e))return!1;return!0},n.deepExtend=l,n.errorPrefix=R,n.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:undefined)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.getExperimentalSetting=n.getDefaults=n.getDefaultEmulatorHostnameAndPort=n.getDefaultEmulatorHost=n.getDefaultAppConfig=void 0,n.getGlobal=p,n.getModularInstance=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return e&&e._delegate?e._delegate:e},n.getUA=g,n.isAdmin=void 0,n.isBrowser=function(){return"object"==typeof self&&self.self===self},n.isBrowserExtension=function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:undefined;return"object"==typeof e&&e.id!==undefined},n.isElectron=function(){return g().indexOf("Electron/")>=0},n.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},n.isIE=function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},n.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(e){return!1}},n.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())},n.isNode=T,n.isNodeSdk=function(){return!0===t.NODE_CLIENT||!0===t.NODE_ADMIN},n.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},n.isSafari=function(){return!T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},n.isUWP=function(){return g().indexOf("MSAppHost/")>=0},n.issuedAtTime=n.isValidTimestamp=n.isValidFormat=void 0,n.jsonEval=_,n.map=function(e,t,n){const r={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=t.call(n,e[a],a,e));return r},n.ordinal=function(e){if(!Number.isFinite(e))return`${e}`;return e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e)},n.promiseWithTimeout=
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t=2e3){const n=new h;return setTimeout((()=>n.reject("timeout!")),t),e.then(n.resolve,n.reject),n.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},n.querystringDecode=function(e){const t={},n=e.replace(/^\?/,"").split("&");return n.forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t},n.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:undefined},n.stringToByteArray=n.stringLength=void 0,n.stringify=function(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.validateArgCount=n.uuidv4=void 0,n.validateCallback=function(e,t,n,r){if(r&&!n)return;if("function"!=typeof n)throw new Error(R(e,t)+"must be a valid function.")},n.validateContextObject=function(e,t,n,r){if(r&&!n)return;if("object"!=typeof n||null===n)throw new Error(R(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},n.validateNamespace=function(e,t,n){if(n&&!t)return;if("string"!=typeof t)throw new Error(R(e,"namespace")+"must be a valid firebase namespace.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const t=n.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(e,t){if(!e)throw a(t)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.assert=r;const a=function(e){return new Error("Firebase Database ("+t.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.assertionError=a;const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296==(64512&a)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},i=n.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const a=e[t],s=t+1<e.length,i=s?e[t+1]:0,o=t+2<e.length,c=o?e[t+2]:0,u=a>>2,d=(3&a)<<4|i>>4;let l=(15&i)<<2|c>>6,p=63&c;o||(p=64,s||(l=64)),r.push(n[u],n[d],n[l],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const a=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const i=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==a||null==s||null==i||null==c)throw new o;const u=a<<2|s>>4;if(r.push(u),64!==i){const e=s<<4&240|i>>2;if(r.push(e),64!==c){const e=i<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}n.DecodeBase64StringError=o;const c=function(e){const t=s(e);return i.encodeByteArray(t,!0)};n.base64Encode=c;const u=function(e){return c(e).replace(/\./g,"")};n.base64urlEncodeWithoutPadding=u;const d=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:e===undefined&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function p(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.base64Decode=d;const m=()=>{try{return p().__FIREBASE_DEFAULTS__||(()=>{if(void 0===e||void 0===e.env)return})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};n.getDefaults=m;const f=e=>{var t,n;return null===(n=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]};n.getDefaultEmulatorHost=f;n.getDefaultEmulatorHostnameAndPort=e=>{const t=f(e);if(!t)return undefined;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};n.getDefaultAppConfig=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.getExperimentalSetting=e=>{var t;return null===(t=m())||void 0===t?void 0:t[`_${e}`]};class h{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function T(){var e;const t=null===(e=m())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}n.Deferred=h;class y extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}n.FirebaseError=y;class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(a,n):"Error",i=`${this.serviceName}: ${s} (${r}).`;return new y(r,i,n)}}n.ErrorFactory=S;const E=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e){return JSON.parse(e)}const v=function(e){let t={},n={},r={},a="";try{const s=e.split(".");t=_(d(s[0])||""),n=_(d(s[1])||""),a=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:a}};n.decode=v;n.isValidTimestamp=function(e){const t=v(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,a=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),a=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!a&&n>=r&&n<=a};n.issuedAtTime=function(e){const t=v(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null};n.isValidFormat=function(e){const t=v(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")};function I(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.isAdmin=function(e){const t=v(e).claims;return"object"==typeof t&&!0===t.admin};n.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,a,s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=c^i&(o^c),a=1518500249):(r=i^o^c,a=1859775393):e<60?(r=i&o|c&(i|o),a=2400959708):(r=i^o^c,a=3395469782);const t=(s<<5|s>>>27)+r+u+a+n[e]&4294967295;u=c,c=o,o=4294967295&(i<<30|i>>>2),i=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;t===undefined&&(t=e.length);const n=t-this.blockSize;let r=0;const a=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(a[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(a),s=0;break}}else for(;r<t;)if(a[s]=e[r],++s,++r,s===this.blockSize){this.compress_(a),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}};class A{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(e===undefined&&t===undefined&&n===undefined)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},r.next===undefined&&(r.next=w),r.error===undefined&&(r.error=w),r.complete===undefined&&(r.complete=w);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}unsubscribeOne(e){this.observers!==undefined&&this.observers[e]!==undefined&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&this.onNoObservers!==undefined&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(this.observers!==undefined&&this.observers[e]!==undefined)try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,e!==undefined&&(this.finalError=e),this.task.then((()=>{this.observers=undefined,this.onNoObservers=undefined})))}}function w(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(e,t){return`${e} failed: ${t} argument `}n.validateArgCount=function(e,t,n,r){let a;if(r<t?a="at least "+t:r>n&&(a=0===n?"none":"no more than "+n),a){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+a+".")}};n.stringToByteArray=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let s=e.charCodeAt(a);if(s>=55296&&s<=56319){const t=s-55296;a++,r(a<e.length,"Surrogate pair missing trail surrogate.");s=65536+(t<<10)+(e.charCodeAt(a)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))};const C=1e3,N=2,b=n.MAX_VALUE_MILLIS=144e5,O=n.RANDOM_FACTOR=.5}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/notification-services-controller>firebase>@firebase/util",file:"node_modules/@firebase/util/dist/index.esm2017.js"}],[5890,{"@metamask/transaction-controller":2623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_CATEGORY_HASH=n.PRIORITY_STATUS_HASH=n.PENDING_STATUS_HASH=void 0;var r=e("@metamask/transaction-controller");const a=n.PENDING_STATUS_HASH={[r.TransactionStatus.unapproved]:!0,[r.TransactionStatus.approved]:!0,[r.TransactionStatus.submitted]:!0};n.PRIORITY_STATUS_HASH={...a,[r.TransactionStatus.confirmed]:!0},n.TOKEN_CATEGORY_HASH={[r.TransactionType.tokenMethodApprove]:!0,[r.TransactionType.tokenMethodSetApprovalForAll]:!0,[r.TransactionType.tokenMethodTransfer]:!0,[r.TransactionType.tokenMethodTransferFrom]:!0,[r.TransactionType.tokenMethodIncreaseAllowance]:!0}}}},{package:"$root$",file:"ui/helpers/constants/transactions.js"}],[5891,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={ADD_CUSTOM_TOKENS:"https://support.metamask.io/managing-my-tokens/custom-tokens/how-to-display-tokens-in-metamask/",ADD_MISSING_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-missing-accounts-after-restoring-with-secret-recovery-phrase/",BASIC_SAFETY:"https://support.metamask.io/privacy-and-security/basic-safety-and-security-tips-for-metamask/",CUSTOMIZE_NONCE:"https://support.metamask.io/transactions-and-gas/transactions/how-to-customize-a-transaction-nonce/",HARDWARE_CONNECTION:"https://support.metamask.io/privacy-and-security/hardware-wallet-hub/",IMPORT_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-import-an-account/",IMPORTED_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/what-are-imported-accounts-/",INFURA_BLOCKAGE:"https://support.metamask.io/troubleshooting/why-infura-cannot-serve-certain-areas/",LEDGER_FIREFOX_U2F_GUIDE:"https://support.ledger.com/hc/en-us/articles/10371387758493-MetaMask-Firefox-Ledger-Integration-Issue?support=true",LEGACY_WEB3:"https://support.metamask.io/third-party-platforms-and-dapps/metamask-legacy-web3/",NFT_TOKENS:"https://support.metamask.io/nfts/nft-tokens-in-your-metamask-wallet/",PASSWORD_AND_SRP_ARTICLE:"https://support.metamask.io/getting-started/user-guide-secret-recovery-phrase-password-and-private-keys/",SECRET_RECOVERY_PHRASE:"https://support.metamask.io/privacy-and-security/what-is-a-secret-recovery-phrase-and-how-to-keep-your-crypto-wallet-secure/",NON_CUSTODIAL_WALLET:"https://support.metamask.io/getting-started/metamask-is-a-self-custodial-wallet/",SPEEDUP_CANCEL:"https://support.metamask.io/transactions-and-gas/transactions/how-to-speed-up-or-cancel-a-pending-transaction/",SUPPORT_URL:"https://support.metamask.io",TOKEN_ALLOWANCE_WITH_SPENDING_CAP:"https://support.metamask.io/privacy-and-security/how-to-customize-token-approvals-with-a-spending-cap/",TOKEN_SAFETY_PRACTICES:"https://support.metamask.io/managing-my-tokens/token-safety-practices/",UNKNOWN_NETWORK:"https://support.metamask.io/nl/networks-and-sidechains/managing-networks/the-risks-of-connecting-to-an-unknown-network/",USER_GUIDE_CUSTOM_NETWORKS:"https://support.metamask.io/networks-and-sidechains/managing-networks/user-guide-custom-networks-and-sidechains/",USER_GUIDE_DAPPS:"https://support.metamask.io/third-party-platforms-and-dapps/user-guide-dapps/",USER_GUIDE_GAS:"https://support.metamask.io/transactions-and-gas/gas-fees/user-guide-gas/",VERIFY_CUSTOM_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/verifying-custom-network-information/",NETWORK_DEPRECATED:"https://support.metamask.io/networks-and-sidechains/eth-on-testnets/"}}}},{package:"$root$",file:"ui/helpers/constants/zendesk-url.js"}],[590,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){var r=Math.floor(n()*e.prob.length);return t[n()<e.prob[r]?r:e.alias[r]]};n.default=function(e,t,n){if(void 0===n&&(n=Math.random),!Array.isArray(e))throw new Error("Probabilities must be an array.");if(0===e.length)throw new Error("Probabilities array must not be empty.");var a=e.length,s=null!=t?t:Array.from({length:a},(function(e,t){return t})),i=function(e,t){var n=e.reduce((function(t,n){if(n<0)throw new Error("Probability must be a positive: p["+e.indexOf(n)+"]="+n);return t+n}),0);if(0===n)throw new Error("Probability sum must be greater than zero.");for(var r=e.map((function(e){return e*t/n})),a={prob:new Array(t),alias:new Array(t)},s=[],i=[],o=t-1;o>=0;o--)r[o]<1?s.push(o):i.push(o);for(;s.length>0&&i.length>0;){var c=s.pop(),u=i.pop();a.prob[c]=r[c],a.alias[c]=u,r[u]=r[u]+r[c]-1,r[u]<1?s.push(u):i.push(u)}for(;i.length>0;)a.prob[i.pop()]=1;for(;s.length>0;)a.prob[s.pop()]=1;return a}(e,a);return{next:function(e){return void 0===e&&(e=1),function(e,t,n,a){if(void 0===a&&(a=1),1===a)return r(e,t,n);for(var s=[],i=0;i<a;i++)s.push(r(e,t,n));return s}(i,s,n,e)}}}}}},{package:"@ngraveio/bc-ur>@keystonehq/alias-sampling",file:"node_modules/@keystonehq/alias-sampling/dist/cjs/index.js"}],[5903,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBuildSpecificAsset=function(e){const t="main";if(!r[t]||!Object.keys(r[t]).includes(e))return console.error(`Cannot find asset "${e}" for build "${t}", returning main build asset.`),r.main[e];return r[t][e]},n.isBeta=function(){return!1},n.isMMI=function(){return!1};const r={main:{foxMeshJson:undefined}}}}},{package:"$root$",file:"ui/helpers/utils/build-types.js"}],[5905,{"../../../shared/constants/common":4944,"../../../shared/modules/Numeric":4987,"bignumber.js":3401,"currency-formatter":3636,"currency-formatter/currencies":3635},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(e,...t){return t.reduce(((e,t)=>e.add(new i.Numeric(t,10)).round(6)),new i.Numeric(e,10)).toString()},n.addFiat=function(e,...t){return t.reduce(((e,t)=>e.add(new i.Numeric(t,10)).round(2)),new i.Numeric(e,10)).toString()},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e){const{txParams:t,dappSuggestedGasFees:n}=e??{},{gasPrice:r,maxFeePerGas:a,maxPriorityFeePerGas:s}=t||{},{gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:c}=n||{},u=!i&&!o&&!c;if(!r&&!a&&!s||u)return!1;const d=r&&r===i,l=[a,s].every((e=>e===i)),p=a&&a===o&&s===c;return Boolean(d||l||p)},n.convertTokenToFiat=function({value:e,fromCurrency:t=o.EtherDenomination.ETH,toCurrency:n,conversionRate:r,contractExchangeRate:a}){const s=r*a;let c=new i.Numeric(e,10);t!==n&&s&&(c=c.applyConversionRate(s));return c.round(2).toString()},n.formatCurrency=function(e,t,n){const s=t.toUpperCase();return a.default.find((e=>e.code===s))?r.default.format(Number(e),{code:s,precision:n}):e},n.getHexGasTotal=function({gasLimit:e="0x0",gasPrice:t="0x0"}){return new i.Numeric(e,16).times(new i.Numeric(t,16)).toPrefixedHexString()},n.getTransactionFee=function({value:e,fromCurrency:t=o.EtherDenomination.ETH,toCurrency:n,conversionRate:r,numberOfDecimals:a}){let s=new i.Numeric(e,16,o.EtherDenomination.WEI).toDenomination(o.EtherDenomination.ETH).toBase(10);t!==n&&r&&(s=s.applyConversionRate(r));return s.round(a).toString()},n.roundExponential=function(e){const t=new s.BigNumber(e);return t.e>20?t.toPrecision(4):e};var r=c(e("currency-formatter")),a=c(e("currency-formatter/currencies")),s=e("bignumber.js"),i=e("../../../shared/modules/Numeric"),o=e("../../../shared/constants/common");function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/helpers/utils/confirm-tx.util.ts"}],[5908,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$",file:"ui/helpers/utils/formatters.js"}],[5911,{"../../../shared/constants/network":4958,"../../../shared/modules/i18n":5e3,"@sentry/browser":2821,react:4690},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMessage=void 0,n.getNetworkLabelKey=function(e){if(e===o.NETWORK_TYPES.LINEA_SEPOLIA)return"lineaSepolia";if(e===o.NETWORK_TYPES.LINEA_MAINNET)return"lineaMainnet";return e};var r,a=(r=e("react"))&&r.__esModule?r:{default:r},s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("@sentry/browser")),i=e("../../../shared/modules/i18n"),o=e("../../../shared/constants/network");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}n.getMessage=(e,t,n,r)=>{const o=(null==r?void 0:r.some((e=>null!==e&&("function"==typeof e||"object"==typeof e))))?e=>a.default.createElement("span",null," ",e," "):undefined;return(0,i.getMessage)(e,t,n,r,(e=>{s.captureException(e)}),o)}}}},{package:"$root$",file:"ui/helpers/utils/i18n-helper.tsx"}],[5912,{"../../../shared/modules/hexstring-utils":4999},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){i||(i=new s(e));return i};var r=e("../../../shared/modules/hexstring-utils");function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){a(this,"jazzicon",void 0),a(this,"cache",void 0),this.jazzicon=e,this.cache={}}iconForAddress(e,t,n){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,n)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(n):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const n=`${e}:${t}`;return(this.cache[n]||(this.cache[n]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const n=function(e){const t=e.slice(2,10);return parseInt(t,16)}(e);return this.jazzicon(t,n)}}let i}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[5914,{"../../../shared/constants/metametrics":4954,"../../../shared/constants/security-provider":4964,"../../../shared/lib/transactions-controller-utils":4985,"@metamask/transaction-controller":2623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAccountType=function(e){if("default"===e)return"metamask";return e},n.getBlockaidMetricsProps=void 0,n.getMethodName=function(e){if(!e||"string"!=typeof e)return"";return e.replace(/([a-z])([A-Z])/gu,"$1 $2").replace(/([A-Z])([a-z])/gu," $1$2").replace(/ +/gu," ")},n.getSwapAndSendMetricsProps=void 0;var r=e("@metamask/transaction-controller"),a=e("../../../shared/constants/security-provider"),s=e("../../../shared/constants/metametrics"),i=e("../../../shared/lib/transactions-controller-utils");n.getBlockaidMetricsProps=({securityAlertResponse:e})=>{if(!e)return{};const t={},{providerRequestsCount:n,reason:r,result_type:i,description:o,source:c}=e,u=(e=>{let t;return e===a.BlockaidResultType.Malicious?t=[s.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:e===a.BlockaidResultType.Warning?t=[s.MetaMetricsEventUiCustomization.FlaggedAsWarning]:e===a.BlockaidResultType.Errored&&(t=[s.MetaMetricsEventUiCustomization.SecurityAlertError]),t})(i);return u&&(t.ui_customizations=u),i!==a.BlockaidResultType.Benign&&(t.security_alert_reason=r??a.BlockaidReason.notApplicable),o&&(t.security_alert_description=o),t.security_alert_response=i??a.BlockaidResultType.NotApplicable,t.security_alert_source=c,n&&Object.keys(n).forEach((e=>{t[`ppom_${e}_count`]=n[e]})),t};n.getSwapAndSendMetricsProps=e=>{if(e.type!==r.TransactionType.swapAndSend)return{};const{chainId:t,sourceTokenAmount:n,sourceTokenDecimals:a,destinationTokenAmount:s,destinationTokenDecimals:o,sourceTokenSymbol:c,destinationTokenAddress:u,destinationTokenSymbol:d,sourceTokenAddress:l}=e;return{chain_id:t,token_amount_source:n&&a?(0,i.calcTokenAmount)(n,a).toString():undefined,token_amount_dest_estimate:s&&o?(0,i.calcTokenAmount)(s,o).toString():undefined,token_symbol_source:c,token_symbol_destination:d,token_address_source:l,token_address_destination:u}}}}},{package:"$root$",file:"ui/helpers/utils/metrics.js"}],[5923,{"../../../shared/constants/transaction":4972,"../../../shared/lib/metamask-controller-utils":4978,"../../../shared/lib/transactions-controller-utils":4985,"../../../shared/modules/Numeric":4987,"../../../shared/modules/string-utils":5013,"../../../shared/modules/transaction.utils":5015,"../../store/actions":6585,"./confirm-tx.util":5905,"./util":5926,loglevel:4299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetDetails=async function(e,t,n,r){var l,p,m;const f=(0,o.parseStandardTokenTransactionData)(n);if(!f)throw new Error("Unable to detect valid token data");let h=(null===(l=v(f))||void 0===l?void 0:l.toString())??(0,u.getTokenValueParam)(f);const g=_(f);let T;if(null!=r&&r.length&&h){const t=r.find((({address:t,tokenId:n})=>(0,i.isEqualCaseInsensitive)(e,t)&&n===h));if(t&&(t.name||t.symbol))return{toAddress:g,...t}}try{T=await(0,s.getTokenStandardAndDetails)(e,t,h)}catch(e){return a.default.warn(e),{toAddress:g,tokenId:h}}const y=(0,u.getTokenValueParam)(f),S=null===(p=T)||void 0===p?void 0:p.decimals,E=f&&y&&S&&(0,d.calcTokenAmount)(y,S).toString(10),I=S&&Number(null==S?void 0:S.toString(10));(null===(m=T)||void 0===m?void 0:m.standard)===c.TokenStandard.ERC20&&(h=undefined);return{tokenAmount:E,toAddress:g,decimals:I,tokenId:h,...T}},n.getSymbolAndDecimalsAndName=E,n.getTokenAddressParam=_,n.getTokenApprovedParam=function(e={}){var t;return null==e||null===(t=e.args)||void 0===t?void 0:t._approved},n.getTokenFiatAmount=function(e,t,n,r,a,s=!0,i=!1){if(t<=0||!e||r===undefined)return undefined;const o=new l.Numeric(e,10).times(new l.Numeric(t,10)).toString();let c,u=new l.Numeric(r,10);a!==n.toUpperCase()&&o&&(u=u.applyConversionRate(o));u=u.round(2).toString(),c=i?(0,m.formatCurrency)(u,n):s?`${(0,m.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return c},n.getTokenIdParam=v,n.getTokenMetadata=g,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await E(t,n)),e[t])};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("../../store/actions"),i=e("../../../shared/modules/string-utils"),o=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/transaction"),u=e("../../../shared/lib/metamask-controller-utils"),d=e("../../../shared/lib/transactions-controller-utils"),l=e("../../../shared/modules/Numeric"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("./util")),m=e("./confirm-tx.util");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const h="";function g(e,t){return e&&t[e.toLowerCase()]}async function T(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{return(await t.symbol())[0]}catch(t){return a.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=g(e,t);r&&(n=r.symbol)}return n}async function y(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{const[e]=await t.name();return e}catch(t){return a.default.warn(`name() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=g(e,t);r&&(n=r.name)}return n}async function S(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{const e=(await t.decimals())[0];return null==e?void 0:e.toString()}catch(t){return a.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const a=g(e,t);var r;if(a)n=null===(r=a.decimals)||void 0===r?void 0:r.toString()}return n}async function E(e,t){let n,r,s;try{const a=(await Promise.allSettled([T(e,t),S(e,t),y(e,t)])).filter((e=>"fulfilled"===e.status)).map((e=>e.value));[n,r,s]=a}catch(t){a.default.warn(`symbol() and decimal() and name() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||h,decimals:r,name:s}}function _(e={}){var t,n,r;const a=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(r=e.args)||void 0===r?void 0:r[0]);return null==a?void 0:a.toString().toLowerCase()}function v(e={}){var t,n;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(n=e.args)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())}}}},{package:"$root$",file:"ui/helpers/utils/token-util.js"}],[5924,{"../../../app/scripts/lib/util":117,"../../../shared/constants/transaction":4972,"../../../shared/modules/contract-utils":4991,"@metamask/controller-utils":1230,"@metamask/transaction-controller":2623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,s.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:r,txParams:{nonce:a}={}}=n;return a===t?e.submittedTime?r>e.submittedTime?n:e:n:e}),{})},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:r}=e;if("0x0"===t)return a.TransactionStatus.failed;if(r===a.TransactionStatus.confirmed&&n===a.TransactionType.cancel)return i.TransactionGroupStatus.cancelled;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case a.TransactionType.tokenMethodTransfer:return e("transfer");case a.TransactionType.tokenMethodTransferFrom:return e("transferFrom");case a.TransactionType.tokenMethodSafeTransferFrom:return e("safeTransferFrom");case a.TransactionType.tokenMethodApprove:return e("approve");case a.TransactionType.tokenMethodSetApprovalForAll:return e("setApprovalForAll");case a.TransactionType.tokenMethodIncreaseAllowance:return e("approveIncreaseAllowance");case a.TransactionType.simpleSend:return e("sendingNativeAsset",[n]);case a.TransactionType.contractInteraction:return e("contractInteraction");case a.TransactionType.deployContract:return e("contractDeployment");case a.TransactionType.swap:return e("swap");case a.TransactionType.swapAndSend:return e("swapAndSend");case a.TransactionType.swapApproval:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===a.TransactionEnvelopeType.legacy},n.isNFTAssetStandard=void 0,n.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,o.readAddressAsContract)(global.eth,e);return t},n.isTokenMethodAction=function(e){return[a.TransactionType.tokenMethodTransfer,a.TransactionType.tokenMethodApprove,a.TransactionType.tokenMethodSetApprovalForAll,a.TransactionType.tokenMethodTransferFrom,a.TransactionType.tokenMethodSafeTransferFrom,a.TransactionType.tokenMethodIncreaseAllowance].includes(e)};var r=e("@metamask/controller-utils"),a=e("@metamask/transaction-controller"),s=e("../../../app/scripts/lib/util"),i=e("../../../shared/constants/transaction"),o=e("../../../shared/modules/contract-utils");n.isNFTAssetStandard=e=>e===r.ERC1155||e===r.ERC721}}},{package:"$root$",file:"ui/helpers/utils/transactions.util.js"}],[5925,{"./util":5926,loglevel:4299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i,o){a.default.debug("tx-helper called with params:"),a.default.debug({unapprovedTxs:e,personalMsgs:t,decryptMsgs:n,encryptionPublicKeyMsgs:r,typedMessages:i,chainId:o});const c=o?(0,s.valuesFor)(e).filter((e=>e.chainId===o)):(0,s.valuesFor)(e),u=(0,s.valuesFor)(t),d=(0,s.valuesFor)(n),l=(0,s.valuesFor)(r),p=(0,s.valuesFor)(i),m=c.concat(u).concat(d).concat(l).concat(p).sort(((e,t)=>e.time-t.time));return a.default.debug(`tx helper found ${c.length} unapproved txs`),a.default.debug(`tx helper found ${u.length} unsigned personal messages`),a.default.debug(`tx helper found ${d.length} decrypt requests`),a.default.debug(`tx helper found ${l.length} encryptionPublicKey requests`),a.default.debug(`tx helper found ${p.length} unsigned typed messages`),m};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("./util")}}},{package:"$root$",file:"ui/helpers/utils/tx-helper.ts"}],[5926,{"../../../app/scripts/lib/multichain/address":71,"../../../shared/constants/labels":4952,"../../../shared/constants/network":4958,"../../../shared/modules/Numeric":4987,"../../../shared/modules/conversion.utils":4992,"../../../shared/modules/error":4995,"../../../shared/modules/hexstring-utils":4999,"../../../shared/modules/string-utils":5013,"../constants/common":5876,"../constants/routes":5884,"@metamask/assets-controllers":1188,"@metamask/snaps-rpc-methods":2446,"@metamask/snaps-utils":2553,"@metamask/utils":2716,"bignumber.js":3401,bowser:3459,buffer:3496,"ethereumjs-util":3743,"human-standard-token-abi":4088,lodash:4293,luxon:4300,"punycode/punycode":4498},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.IS_FLASK=void 0,n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,I.normalizeSafeAddress)(e);r||(a=(0,g.stripHexPrefix)(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.checkTokenIdExists=void 0,n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.fetchTokenExchangeRates=void 0,n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?N(e):e.split("."),s=a[0];let i=a[1],o="None";if(t===undefined)if("0"===s){if("0"!==i){const e=i.match(/^0*(.{2})/u);e&&(i=e[0]),o=`0.${i} ${r}`}}else o=`${s}.${i.slice(0,3)} ${r}`;else i+=Array(t).join("0"),o=`${s}.${i.slice(0,t)} ${r}`;return o},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return o.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithSuffix=function(e){const t=o.DateTime.fromMillis(1e3*e),{day:n}=t,r=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n);return t.toFormat(`MMM d'${r}', yyyy`)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=o.DateTime.fromMillis(e),a=o.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.formatUTCDateFromUnixTimestamp=void 0,n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=function(e,t){if(!e||"string"!=typeof e)return"";if(t&&e.startsWith("ipfs://"))try{return(0,c.getFormattedIpfsUrl)(t,e,!0)}catch(e){return(0,h.logErrorWithMessage)(e),""}return e},n.getAvatarFallbackLetter=void 0,n.getContractAtAddress=function(e){return global.eth.contract(a.default).at(e)},n.getFilteredSnapPermissions=n.getDedupedSnaps=void 0,n.getIsBrowserDeprecated=function(e=d.default.getParser(window.navigator.userAgent)){return e.satisfies(S.OUTDATED_BROWSER_VERSIONS)??!1},n.getNetworkNameFromProviderType=void 0,n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getSnapRoute=n.getSnapName=void 0,n.getURL=k,n.getURLHost=function(e){var t;return(null===(t=k(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=k(e))||void 0===t?void 0:t.hostname)||""},n.isAbleToExportAccount=n.hexToText=void 0,n.isDefaultMetaMaskChain=function(e){if(!e||e===f.CHAIN_IDS.MAINNET||e===f.CHAIN_IDS.LINEA_MAINNET||e===f.CHAIN_IDS.GOERLI||e===f.CHAIN_IDS.SEPOLIA||e===f.CHAIN_IDS.LINEA_GOERLI||e===f.CHAIN_IDS.LINEA_SEPOLIA||e===f.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==r.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=C,n.parseBalance=N,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return new y.Numeric(new y.Numeric(e,10).toFixed(t),10).toNumber()},n.sanitizeString=n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){return b(e,{truncatedCharLimit:T.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:T.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:T.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1})},n.shortenString=b,n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=O,n.stripHttpsSchemeWithoutPort=function(e){if(k(e).port)return e;return O(e)},n.toHumanReadableTime=n.stripOneLayerofNesting=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var r=R(e("punycode/punycode")),a=R(e("human-standard-token-abi")),s=R(e("bignumber.js")),i=w(e("ethereumjs-util")),o=e("luxon"),c=e("@metamask/assets-controllers"),u=w(e("lodash")),d=R(e("bowser")),l=e("@metamask/snaps-rpc-methods"),p=e("@metamask/snaps-utils"),m=e("@metamask/utils"),f=e("../../../shared/constants/network"),h=e("../../../shared/modules/error"),g=e("../../../shared/modules/hexstring-utils"),T=e("../../../shared/constants/labels"),y=e("../../../shared/modules/Numeric"),S=e("../constants/common"),E=e("../../../shared/modules/string-utils"),_=e("../../../shared/modules/conversion.utils"),v=e("../constants/routes"),I=e("../../../app/scripts/lib/multichain/address");function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function R(e){return e&&e.__esModule?e:{default:e}}function C(e){if(!e)return new i.BN(0,16);const t=(0,g.stripHexPrefix)(e);return new i.BN(t,16)}function N(e){let t;const n=C(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function b(e="",{truncatedCharLimit:t,truncatedStartChars:n,truncatedEndChars:r,skipCharacterInEnd:a}={truncatedCharLimit:T.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:T.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:T.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1}){return e.length<t?e:`${e.slice(0,n)}...${a?"":e.slice(-r)}`}function O(e){return e.replace(/^https:\/\//u,"")}function k(e){try{return new URL(e)}catch(e){return""}}n.formatUTCDateFromUnixTimestamp=e=>e?o.DateTime.fromSeconds(e).toUTC().toFormat("dd LLLL yyyy, HH:mm"):e;n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const D=(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),s=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),i=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...s.flat(),...i.flat()]})(),P=e=>e.replace(/\[(\d*)\]/u,"");n.stripOneLayerofNesting=P;const M=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=t&&null!==t.match(/\[[[0-9]*\]*/u);var a;if(r)return{value:e.map((e=>M(e,P(t),n))),type:t};if(a=t,D.includes(a))return{value:e,type:t};const s=r?(e=>e.replace(/\[[[0-9]*\]*/gu,""))(t):t,i=n[s];if(!i)throw new Error("Invalid primary type definition");const o={};return Object.keys(e).forEach((t=>{const r=Object.values(i).find((e=>e.name===t));r&&(o[t]=M(e[t],r.type,n))})),{value:o,type:t}};n.sanitizeMessage=M;n.getSnapName=e=>t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.name)??(0,p.stripSnapPrefix)(t)};n.getSnapRoute=e=>`${v.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e)}`;n.getDedupedSnaps=(e,t)=>{var n,r;const a=null==e||null===(n=e.permissions)||void 0===n?void 0:n[l.WALLET_SNAP_PERMISSION_KEY],s=null==a?void 0:a.caveats[0].value,i=null==t||null===(r=t[l.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value;if(!(0,m.isObject)(i)&&s)return Object.keys(s);const o=s?Object.keys(s):[],c=i?Object.keys(i):[],u=o.filter((e=>!c.includes(e)));return u.length>0?u:o};n.IS_FLASK=!1;n.sanitizeString=e=>{if(!e)return e;if(!u.isString(e))return e;return e.replace(/\u202E/giu,"\\u202E")};n.getNetworkNameFromProviderType=e=>e===f.NETWORK_TYPES.RPC?"":e;n.isAbleToExportAccount=(e="")=>!e.includes("Hardware")&&!e.includes("Snap");n.checkTokenIdExists=(e,t,n)=>{const r=(0,m.isStrictHexString)(t);let a=t;r&&(a=(0,_.hexToDecimal)(t));const s=(0,g.toChecksumHexAddress)(e);if(n[s]){const e=n[s];return u.some(e.nfts,(e=>e.address===s&&((0,E.isEqualCaseInsensitive)(e.tokenId,t)||(0,E.isEqualCaseInsensitive)(e.tokenId,a.toString()))))}return!1};n.fetchTokenExchangeRates=async(e,t,n)=>{try{return await(0,c.fetchTokenContractExchangeRates)({tokenPricesService:new c.CodefiTokenPricesServiceV2,nativeCurrency:e,tokenAddresses:t,chainId:n})}catch(e){return{}}};n.hexToText=e=>{if(!e)return e;try{const n=(0,g.stripHexPrefix)(e),r=t.from(n,"hex");return 32===r.length?e:r.toString("utf8")}catch(t){return e}};n.getAvatarFallbackLetter=e=>{var t;return(null==e||null===(t=e.match(/[a-z0-9]/iu))||void 0===t?void 0:t[0])??"?"};n.getFilteredSnapPermissions=(e,t=Infinity,n=3)=>{const r=e.filter((e=>e.weight<=t));if(n&&r.length<n){const a=e.filter((e=>e.weight>t));return r.concat(a.slice(0,n-r.length))}return r}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/util.js"}],[595,{"@ethereumjs/util":449,"@keystonehq/bc-ur-registry":617,buffer:3496,hdkey:4083,uuid:4872},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),s=e("uuid"),i=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,o=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class m extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=Number(this.chainId)),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,i,o,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),p=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(i,"hex"));return new m({requestId:o?t.from(s.parse(o)):undefined,signData:e,dataType:n,derivationPath:p,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:d||undefined})}}m.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],s=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),i=t[l.chainId]?t[l.chainId]:undefined,o=t[l.address]?t[l.address]:undefined,c=t[l.requestId]?t[l.requestId].getData():undefined,u=t[l.origin]?t[l.origin]:undefined;return new m({requestId:c,signData:n,dataType:r,chainId:i,derivationPath:s,address:o,origin:u})},m.fromCBOR=e=>{const t=u(e);return m.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:h}=a.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(g||(g={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new a.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[g.origin]=this.origin),e[g.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[g.signature],r=t[g.requestId]?t[g.requestId].getData():undefined;return new T(n,r,t[g.origin])},T.fromCBOR=e=>{const t=h(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var S;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(S||(S={}));class E extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[S.chainId]=this.chainId,e[S.name]=this.name,e[S.contractAddress]=this.contractAddress,e[S.contractName]=this.contractName,e[S.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new E({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}E.fromDataItem=e=>{const t=e.getData(),n=t[S.chainId],r=t[S.name],a=t[S.mediaData],s=t[S.contractAddress],i=t[S.contractName];return new E({chainId:n,name:r,contractAddress:s,contractName:i,mediaData:a})},E.fromCBOR=e=>{const t=y(e);return E.fromDataItem(t)};const _=(e,t)=>{const n=i.fromExtendedKey(e).derive(t),r="0x"+o.publicToAddress(n.publicKey,!0).toString("hex");return o.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=E,n.ETHSignature=T,n.EthSignRequest=m,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=_(t,`M/0/${a}`);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[5955,{"../contexts/i18n":5842,react:4690},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useI18nContext=function(){return(0,r.useContext)(a.I18nContext)};var r=e("react"),a=e("../contexts/i18n")}}},{package:"$root$",file:"ui/hooks/useI18nContext.js"}],[596,{"@ethereumjs/util":449,"@keystonehq/bc-ur-registry":617,buffer:3496,hdkey:4083,uuid:4872},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),s=e("uuid"),i=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,o=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class m extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=Number(this.chainId)),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,i,o,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),p=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(i,"hex"));return new m({requestId:o?t.from(s.parse(o)):void 0,signData:e,dataType:n,derivationPath:p,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:d||void 0})}}m.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],s=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),i=t[l.chainId]?t[l.chainId]:void 0,o=t[l.address]?t[l.address]:void 0,c=t[l.requestId]?t[l.requestId].getData():void 0;return new m({requestId:c,signData:n,dataType:r,chainId:i,derivationPath:s,address:o,origin:t[l.origin]?t[l.origin]:void 0})},m.fromCBOR=e=>{const t=u(e);return m.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:h}=a.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(g||(g={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new a.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[g.origin]=this.origin),e[g.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[g.signature],r=t[g.requestId]?t[g.requestId].getData():void 0;return new T(n,r,t[g.origin])},T.fromCBOR=e=>{const t=h(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var S;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(S||(S={}));class E extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[S.chainId]=this.chainId,e[S.name]=this.name,e[S.contractAddress]=this.contractAddress,e[S.contractName]=this.contractName,e[S.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new E({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}E.fromDataItem=e=>{const t=e.getData();return new E({chainId:t[S.chainId],name:t[S.name],contractAddress:t[S.contractAddress],contractName:t[S.contractName],mediaData:t[S.mediaData]})},E.fromCBOR=e=>{const t=y(e);return E.fromDataItem(t)};const _=(e,t)=>{const n=i.fromExtendedKey(e).derive(t),r="0x"+o.publicToAddress(n.publicKey,!0).toString("hex");return o.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=E,n.ETHSignature=T,n.EthSignRequest=m,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=_(t,"M/0/"+a);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[597,{"./bc-ur-registry-eth.cjs.development.js":595,"./bc-ur-registry-eth.cjs.production.min.js":596},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[598,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Bytes=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class i extends a.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>s.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}}n.Bytes=i,i.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new i(t)},i.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[599,{".":617,"./RegistryItem":609,"./RegistryType":610,"./lib":620,buffer:3496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoAccount=void 0;const r=e("."),a=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");var o;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(o||(o={}));class c extends s.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[o.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[o.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new a.DataItem(e)}}}n.CryptoAccount=c,c.fromDataItem=e=>{const n=e.getData(),a=t.alloc(4),s=n[o.masterFingerprint];s&&a.writeUInt32BE(s,0);const i=n[o.outputDescriptors].map((e=>r.CryptoOutput.fromDataItem(e)));return new c(a,i)},c.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[600,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoCoinInfo=n.Network=n.Type=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var i,o,c;!function(e){e.type="1",e.network="2"}(i||(i={})),function(e){e[e.bitcoin=0]="bitcoin"}(o=n.Type||(n.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=n.Network||(n.Network={}));class u extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||o.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[i.type]=this.type),this.network&&(e[i.network]=this.network),new r.DataItem(e)}}}n.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),n=t[i.type],r=t[i.network];return new u(n,r)},u.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[601,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoECKey=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var i;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(i||(i={}));class o extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[i.curve]=this.curve),this.privateKey!==undefined&&(e[i.private]=this.privateKey),e[i.data]=this.data,new r.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}n.CryptoECKey=o,o.fromDataItem=e=>{const t=e.getData(),n=t[i.curve],r=t[i.private],a=t[i.data];if(!a)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new o({data:a,curve:n,privateKey:r})},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[602,{"./CryptoCoinInfo":600,"./CryptoKeypath":603,"./RegistryItem":609,"./RegistryType":610,"./lib":620,bs58check:3500,buffer:3496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoHDKey=void 0;const r=e("bs58check"),a=e("./CryptoCoinInfo"),s=e("./CryptoKeypath"),i=e("./lib"),o=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class d extends o.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,n,a;let s,i,o=0,c=t.alloc(4).fill(0);if(this.isMaster())s=t.from("0488ADE4","hex"),i=0,o=0;else{i=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(n=this.getOrigin())||void 0===n?void 0:n.getDepth());const r=null===(a=this.getOrigin())||void 0===a?void 0:a.getComponents(),u=r[r.length-1];u&&(o=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),s=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(i,0);const d=t.alloc(4);d.writeUInt32BE(o,0);const l=this.getChainCode(),p=this.getKey();return(0,r.encode)(t.concat([s,u,c,d,l,p]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,n,r,a,s,i;let o="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(o+=`${null===(r=null===(n=this.getOrigin())||void 0===n?void 0:n.getSourceFingerprint())||void 0===r?void 0:r.toString("hex")}/${null===(a=this.getOrigin())||void 0===a?void 0:a.getPath()}`),o+=this.getBip32Key(),this.getChildren()&&(null===(s=this.getChildren())||void 0===s?void 0:s.getPath())&&(o+=`/${null===(i=this.getChildren())||void 0===i?void 0:i.getPath()}`),o},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new i.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}n.CryptoHDKey=d,d.fromDataItem=e=>{const n=e.getData(),r=!!n[u.is_master],i=n[u.is_private],o=n[u.key_data],c=n[u.chain_code],l=n[u.use_info]?a.CryptoCoinInfo.fromDataItem(n[u.use_info]):undefined,p=n[u.origin]?s.CryptoKeypath.fromDataItem(n[u.origin]):undefined,m=n[u.children]?s.CryptoKeypath.fromDataItem(n[u.children]):undefined,f=n[u.parent_fingerprint];let h=undefined;f&&(h=t.alloc(4),h.writeUInt32BE(f,0));const g=n[u.name],T=n[u.note];return new d({isMaster:r,isPrivateKey:i,key:o,chainCode:c,useInfo:l,origin:p,children:m,parentFingerprint:h,name:g,note:T})},d.fromCBOR=e=>{const t=(0,i.decodeToDataItem)(e);return d.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[603,{"./PathComponent":608,"./RegistryItem":609,"./RegistryType":610,"./lib":620,buffer:3496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoKeypath=void 0;const r=e("./lib"),a=e("./PathComponent"),s=e("./RegistryItem"),i=e("./RegistryType");var o;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(o||(o={}));class c extends s.RegistryItem{constructor(e=[],t,n){super(),this.components=e,this.sourceFingerprint=t,this.depth=n,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[o.components]=t,this.sourceFingerprint&&(e[o.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[o.depth]=this.depth),new r.DataItem(e)}}}n.CryptoKeypath=c,c.fromDataItem=e=>{const n=e.getData(),r=[],s=n[o.components];if(s)for(let e=0;e<s.length;e+=2){const t=s[e+1],n=s[e];"number"==typeof n?r.push(new a.PathComponent({index:n,hardened:t})):r.push(new a.PathComponent({hardened:t}))}const i=n[o.source_fingerprint];let u;i&&(u=t.alloc(4),u.writeUInt32BE(i,0));const d=n[o.depth];return new c(r,u,d)},c.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[604,{"./CryptoECKey":601,"./CryptoHDKey":602,"./MultiKey":607,"./RegistryItem":609,"./RegistryType":610,"./ScriptExpression":611,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoOutput=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib"),i=e("./MultiKey"),o=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class d extends o.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof a.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof r.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof i.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof a.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const n=t.getTag();e.getTag()===undefined?e.setTag(n):e=new s.DataItem(e,n)})),e}}}n.CryptoOutput=d,d.fromDataItem=e=>{const t=[];let n=e;for(;;){let e=n.getTag();const r=u.ScriptExpression.fromTag(e);if(!r)break;if(t.push(r),!(n.getData()instanceof s.DataItem))break;n=n.getData(),e=n.getTag()}const o=t.length;if(o>0&&(t[o-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[o-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=i.MultiKey.fromDataItem(n);return new d(t,e)}if(n.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=a.CryptoHDKey.fromDataItem(n);return new d(t,e)}{const e=r.CryptoECKey.fromDataItem(n);return new d(t,e)}},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[605,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoPSBT=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class i extends a.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}}n.CryptoPSBT=i,i.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new i(t)},i.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[606,{"..":617,"../RegistryType":610,"../errors":612,"@ngraveio/bc-ur":2724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.URRegistryDecoder=void 0;const r=e("@ngraveio/bc-ur"),a=e(".."),s=e("../RegistryType"),i=e("../errors");class o extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case s.RegistryTypes.BYTES.getType():return a.Bytes.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_HDKEY.getType():return a.CryptoHDKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_KEYPATH.getType():return a.CryptoKeypath.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_COIN_INFO.getType():return a.CryptoCoinInfo.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ECKEY.getType():return a.CryptoECKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_OUTPUT.getType():return a.CryptoOutput.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_PSBT.getType():return a.CryptoPSBT.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ACCOUNT.getType():return a.CryptoAccount.fromCBOR(e.cbor);default:throw new i.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}n.URRegistryDecoder=o}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[607,{"./CryptoECKey":601,"./CryptoHDKey":602,"./RegistryItem":609,"./RegistryType":610,"./lib/DataItem":618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultiKey=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib/DataItem"),i=e("./RegistryItem"),o=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends i.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}n.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),n=t[c.threshold],s=t[c.keys],i=[];return s.forEach((e=>{e.getTag()===o.RegistryTypes.CRYPTO_HDKEY.getTag()?i.push(a.CryptoHDKey.fromDataItem(e)):e.getTag()===o.RegistryTypes.CRYPTO_ECKEY.getTag()&&i.push(r.CryptoECKey.fromDataItem(e))})),new u(n,i)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[608,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&r.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}n.PathComponent=r,r.HARDENED_BIT=2147483648}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[609,{"./lib":620,"@ngraveio/bc-ur":2724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryItem=void 0;const r=e("@ngraveio/bc-ur"),a=e("./lib");n.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,a.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,n)=>{const a=this.toUR();return new r.UREncoder(a,e,t,n)}}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[610,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryTypes=n.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}n.RegistryType=r,n.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",undefined),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[611,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScriptExpressions=n.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}n.ScriptExpression=r,r.fromTag=e=>Object.values(n.ScriptExpressions).find((t=>t.getTag()===e)),n.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[612,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}n.UnknownURTypeError=r}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[613,{"../CryptoHDKey":602,"../RegistryItem":609,"../RegistryType":610,"../lib":620,buffer:3496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoMultiAccounts=void 0;const r=e("../RegistryType"),a=e("../CryptoHDKey"),s=e("../RegistryItem"),i=e("../lib");var o;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(o||(o={}));class c extends s.RegistryItem{constructor(e,t,n,a,s){super(),this.masterFingerprint=e,this.keys=t,this.device=n,this.deviceId=a,this.version=s,this.getRegistryType=()=>r.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[o.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[o.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[o.device]=this.device),this.deviceId&&(e[o.deviceId]=this.deviceId),this.version&&(e[o.version]=this.version),new i.DataItem(e)}}}n.CryptoMultiAccounts=c,c.fromDataItem=e=>{const n=e.getData(),r=t.alloc(4),s=n[o.masterFingerprint];s&&r.writeUInt32BE(s,0);const i=n[o.keys].map((e=>a.CryptoHDKey.fromDataItem(e))),u=n[o.device],d=n[o.deviceId],l=n[o.version];return new c(r,i,u,d,l)},c.fromCBOR=e=>{const t=(0,i.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[614,{"../CryptoKeypath":603,"../RegistryItem":609,"../RegistryType":610,"../lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivationSchema=n.DerivationAlgorithm=n.Curve=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),i=e("../CryptoKeypath");var o,c,u;!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(o||(o={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(c=n.Curve||(n.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(u=n.DerivationAlgorithm||(n.DerivationAlgorithm={}));class d extends a.RegistryItem{constructor(e,t=c.secp256k1,n=u.slip10){super(),this.keypath=e,this.curve=t,this.algo=n,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[o.keyPath]=t,e[o.curve]=this.curve,e[o.algo]=this.algo,new s.DataItem(e)}}}n.KeyDerivationSchema=d,d.fromDataItem=e=>{const t=e.getData(),n=i.CryptoKeypath.fromDataItem(t[o.keyPath]),r=t[o.curve],a=t[o.algo];return new d(n,r,a)},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/DerivationSchema.js"}],[615,{"../RegistryItem":609,"../RegistryType":610,"../lib":620,"./DerivationSchema":614},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivation=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),i=e("./DerivationSchema");var o;!function(e){e[e.schemas=1]="schemas"}(o||(o={}));class c extends a.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const e={};return e[o.schemas]=this.schemas.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),new s.DataItem(e)}}}n.KeyDerivation=c,c.fromDataItem=e=>{const t=e.getData()[o.schemas].map((e=>i.KeyDerivationSchema.fromDataItem(e)));return new c(t)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/KeyDerivation.js"}],[616,{"../RegistryItem":609,"../RegistryType":610,"../lib":620,"./KeyDerivation":615},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QRHardwareCall=n.QRHardwareCallType=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),i=e("./KeyDerivation");var o,c;!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(o||(o={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(c=n.QRHardwareCallType||(n.QRHardwareCallType={}));class u extends a.RegistryItem{constructor(e,t,n){super(),this.type=e,this.params=t,this.origin=n,this.getRegistryType=()=>r.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};e[o.type]=this.type;const t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[o.params]=t,this.origin&&(e[o.origin]=this.origin),new s.DataItem(e)}}}n.QRHardwareCall=u,u.fromDataItem=e=>{const t=e.getData(),n=t[o.type]||c.KeyDerivation;let r;if(n===c.KeyDerivation)r=i.KeyDerivation.fromDataItem(t[o.params]);const a=t[o.origin];return new u(n,r,a)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/QRHardwareCall.js"}],[617,{"./Bytes":598,"./CryptoAccount":599,"./CryptoCoinInfo":600,"./CryptoECKey":601,"./CryptoHDKey":602,"./CryptoKeypath":603,"./CryptoOutput":604,"./CryptoPSBT":605,"./Decoder":606,"./MultiKey":607,"./PathComponent":608,"./RegistryItem":609,"./RegistryType":610,"./ScriptExpression":611,"./errors":612,"./extended/CryptoMultiAccounts":613,"./extended/DerivationSchema":614,"./extended/KeyDerivation":615,"./extended/QRHardwareCall":616,"./lib":620,"./patchCBOR":621,"./types":622,"./utils":623,"buffer/":3503,tslib:4827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoMultiAccounts=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const r=e("tslib");e("./patchCBOR");const a=e("buffer/");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return a.Buffer}});const s=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return s.CryptoHDKey}});const i=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return i.CryptoKeypath}});const o=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return o.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return o.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return o.Network}});const c=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const d=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return d.CryptoOutput}});const l=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return l.CryptoPSBT}});const p=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return p.CryptoAccount}});const m=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return m.URRegistryDecoder}});const f=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return f.MultiKey}});const h=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return h.ScriptExpressions}});const g=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const T=e("./RegistryItem"),y=e("./RegistryType"),S=e("./lib");var E=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return E.DataItem}});const _=e("./utils"),v=e("./extended/CryptoMultiAccounts");Object.defineProperty(n,"CryptoMultiAccounts",{enumerable:!0,get:function(){return v.CryptoMultiAccounts}});const I={URRegistryDecoder:m.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:p.CryptoAccount,CryptoHDKey:s.CryptoHDKey,CryptoMultiAccounts:v.CryptoMultiAccounts,CryptoKeypath:i.CryptoKeypath,CryptoCoinInfo:o.CryptoCoinInfo,CryptoCoinInfoType:o.Type,CryptoCoinInfoNetwork:o.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:d.CryptoOutput,CryptoPSBT:l.CryptoPSBT,MultiKey:f.MultiKey,ScriptExpressions:h.ScriptExpressions,PathComponent:g.PathComponent},A={addReader:S.addReader,addSemanticDecode:S.addSemanticDecode,addSemanticEncode:S.addSemanticEncode,addWriter:S.addWriter,patchTags:_.patchTags},w={RegistryTypes:y.RegistryTypes,RegistryItem:T.RegistryItem,RegistryType:y.RegistryType,decodeToDataItem:S.decodeToDataItem,encodeDataItem:S.encodeDataItem,cbor:A};n.extend=w,(0,r.__exportStar)(e("./errors"),n),(0,r.__exportStar)(e("./Decoder"),n),(0,r.__exportStar)(e("./lib"),n),(0,r.__exportStar)(e("./CryptoAccount"),n),(0,r.__exportStar)(e("./CryptoPSBT"),n),(0,r.__exportStar)(e("./CryptoHDKey"),n),(0,r.__exportStar)(e("./extended/CryptoMultiAccounts"),n),(0,r.__exportStar)(e("./extended/QRHardwareCall"),n),(0,r.__exportStar)(e("./extended/KeyDerivation"),n),(0,r.__exportStar)(e("./extended/DerivationSchema"),n),(0,r.__exportStar)(e("./CryptoOutput"),n),(0,r.__exportStar)(e("./CryptoCoinInfo"),n),(0,r.__exportStar)(e("./CryptoECKey"),n),(0,r.__exportStar)(e("./MultiKey"),n),(0,r.__exportStar)(e("./CryptoKeypath"),n),(0,r.__exportStar)(e("./patchCBOR"),n),(0,r.__exportStar)(e("./PathComponent"),n),(0,r.__exportStar)(e("./RegistryItem"),n),(0,r.__exportStar)(e("./RegistryType"),n),(0,r.__exportStar)(e("./types"),n),(0,r.__exportStar)(e("./utils"),n),n.default=I}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[618,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[619,{"./DataItem":618,buffer:3496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var r=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n+=a}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",a=0;a<n.length;a++)if("%"===n.charAt(a))r+=n.substring(a+1,a+3),a+=2;else{var s=n.charCodeAt(a).toString(16);s.length<2&&(s="0"+s),r+=s}return new e(r)};var r=[],a={},s=function(e){return function(){throw new Error(e+" not implemented")}};function i(){}function o(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void s("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}i.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-a:a},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-a:a},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-a:a},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},o.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:s("writeString"),canWriteBinary:function(e){return!1},writeBinary:s("writeChunk")};var d=new Error;function l(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),r=[];if(null!==n){5===t.type&&(n*=2);for(var s=0;s<n;s++)r[s]=l(e)}else for(var i;(i=l(e))!==d;)r.push(i);if(5===t.type){var o={};for(s=0;s<r.length;s+=2)o[r[s]]=r[s+1];return o}return r;case 6:var u=c(t,e),p=a[u];r=l(e);return p?p(r):r;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return d;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function p(e,t){for(var n=0;n<r.length;n++){var a=r[n].fn(e);if(a!==undefined)return u(6,r[n].tag,t),p(a,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(h.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)p(e[n],t)}else{var s=Object.keys(e);u(5,s.length,t);for(n=0;n<s.length;n++){const r=parseInt(s[n]);isNaN(r)?(p(s[n],t),p(e[s[n]],t)):(p(r,t),p(e[s[n]],t))}}}}var m=[],f=[],h={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?f.push((function(n){if(e===n)return t(n)})):f.push(e)},addReader:function(e,t){"string"==typeof e?m.push((function(n,r){if(e===r)return t(n,r)})):m.push(e)},encode:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(t);if(r)return p(e,r),r.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(t);if(r)return e.getTag()!==undefined?(p(e,r),r.result()):(p(e.getData(),r),r.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<m.length;n++){var r=(0,m[n])(e,t);if(r)return l(r)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var r=0;r<m.length;r++){var a=(0,m[r])(e,n);if(a){const e=l(a);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a[e]=t,this}};function g(e){this.buffer=e,this.pos=0}function T(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function y(e){this.hex=e,this.pos=0}function S(e){this.$hex="",this.finalFormat=e||"hex"}return g.prototype=Object.create(i.prototype),g.prototype.peekByte=function(){return this.buffer[this.pos]},g.prototype.readByte=function(){return this.buffer[this.pos++]},g.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},g.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},g.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},g.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},g.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},T.prototype=Object.create(o.prototype),T.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},T.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},T.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},T.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},T.prototype.canWriteBinary=function(e){return e instanceof n},T.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},T.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},T.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var a=this.completeBuffers[r];a.copy(e,t,0,a.length),t+=a.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(h.addReader((function(e,t){return n.isBuffer(e)?new g(e):"hex"===t||"base64"===t?new g(n.from(e,t)):void 0})),h.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new T(e):void 0:new T}))),y.prototype=Object.create(i.prototype),y.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},y.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},y.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},S.prototype=Object.create(o.prototype),S.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},S.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},S.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},S.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},S.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},h.addReader((function(t,n){return t instanceof e||t.$hex?new y(t.$hex):"hex"===n?new y(t):void 0})),h.addWriter((function(e){if("hex"===e)return new S})),h}();return r.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),r}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[620,{"./DataItem":618,"./cbor-sync":619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var r=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return r.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return r.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return r.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return r.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return r.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return r.addWriter}});var a=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return a.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[621,{"./RegistryType":610,"./ScriptExpression":611,"./utils":623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./utils"),a=e("./RegistryType"),s=e("./ScriptExpression"),i=Object.values(a.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),o=Object.values(s.ScriptExpressions).map((e=>e.getTag()));(0,r.patchTags)(i.concat(o))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[622,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[623,{"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const r=e("./lib"),a=[];n.patchTags=e=>{e.forEach((e=>{a.find((t=>t===e))||((0,r.addSemanticEncode)(e,(t=>{if(t instanceof r.DataItem&&t.getTag()===e)return t.getData()})),(0,r.addSemanticDecode)(e,(t=>new r.DataItem(t,e))),a.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[6231,{"../../../components/component-library":5453,"../../../helpers/constants/design-system":5878,"./util":6254,"@metamask/controller-utils":1230},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ResultTemplate=void 0;var r=e("@metamask/controller-utils"),a=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=e("./util");function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,u(e,t,"set"),n),n}function u(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var d=new WeakMap,l=new WeakSet;function p(e,t){const{error:n,header:o,icon:c,message:l,title:p}=e,m=function(e,t){return t.get?t.get.call(e):t.value}(f=this,u(f,d,"get"))===r.ApprovalType.ResultSuccess;var f;return[...(0,i.processHeader)(o)??[],{key:"container",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,height:s.BlockSize.Full,padding:4},children:[{key:"content",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,height:s.BlockSize.Full,style:{alignSelf:s.AlignItems.stretch}},children:[null===c?undefined:{key:"icon",element:"AvatarIcon",props:{iconName:c??(m?a.IconName.Confirmation:a.IconName.Warning),size:a.IconSize.Xl,iconProps:{size:a.IconSize.Xl},color:m?s.IconColor.successDefault:s.IconColor.errorDefault,backgroundColor:m?s.BackgroundColor.successMuted:s.BackgroundColor.errorMuted},children:"Icon"},null===p?undefined:{key:"title",element:"Typography",props:{variant:s.TypographyVariant.H3,fontWeight:s.FontWeight.Bold},children:p??t(m?"resultPageSuccess":"resultPageError")},{key:"message",element:"Box",props:{alignItems:s.AlignItems.center,textAlign:s.TextAlign.Center,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},children:m?(0,i.processString)(l,t("resultPageSuccessDefaultMessage")):(0,i.processError)(n,t("resultPageErrorDefaultMessage"))}]}]}]}n.ResultTemplate=class{constructor(e){var t,n;o(t=this,n=l),n.add(t),function(e,t,n){o(e,t),t.set(e,n)}(this,d,{writable:!0,value:void 0}),c(this,d,e)}getValues(e,t,n){return{content:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,l,p).call(this,e.requestData||{},t),submitText:t("ok"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData),networkDisplay:!1}}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/ResultTemplate.ts"}],[6240,{"../../../../../shared/constants/network":4958,"../../../../../shared/modules/rpc.utils":5006,"../../../../helpers/constants/design-system":5878,"../../../../helpers/constants/routes":5884,"../../../../helpers/constants/zendesk-url":5891,"../../utils/confirm":6311,"eth-rpc-errors":3720,react:4690},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=l(e("react")),s=e("../../../../../shared/constants/network"),i=e("../../../../helpers/constants/design-system"),o=e("../../../../helpers/constants/routes"),c=l(e("../../../../helpers/constants/zendesk-url")),u=e("../../../../../shared/modules/rpc.utils"),d=e("../../utils/confirm");function l(e){return e&&e.__esModule?e:{default:e}}const p={id:"UNRECOGNIZED_CHAIN",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},m={id:"SAFE_CHAIN_LIST_PROVIDER_ERROR",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorGettingSafeChainList"}}}},f={id:"MISMATCHED_CHAIN_RECOMMENDATION",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:c.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},h={id:"DEPRECATED_CHAIN_ALERT",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"deprecatedNetwork"}}}},g={id:"MISMATCHED_NETWORK_NAME",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},T={id:"MISMATCHED_NETWORK_SYMBOL",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},y={id:"MISMATCHED_NETWORK_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}},S={id:"MISMATCHED_NETWORK_RPC_CHAIN_ID",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcChainId"}}}},E={id:"ERROR_CONNECTING_TO_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorWhileConnectingToRPC"}}}};const _={getAlerts:async function(e,t){const n=[];if("metamask"===e.origin&&Boolean(t.matchedChain))return[];if(t.matchedChain){var r,a,i,o;(null===(r=t.matchedChain.name)||void 0===r?void 0:r.toLowerCase())!==e.requestData.chainName.toLowerCase()&&n.push(g),(null===(a=t.matchedChain.nativeCurrency)||void 0===a||null===(a=a.symbol)||void 0===a?void 0:a.toLowerCase())!==(null===(i=e.requestData.ticker)||void 0===i?void 0:i.toLowerCase())&&n.push(T);const{origin:c}=new URL(e.requestData.rpcUrl);null!==(o=t.matchedChain.rpc)&&void 0!==o&&o.map((e=>new URL(e).origin)).includes(c)||n.push(y),s.DEPRECATED_NETWORKS.includes(e.requestData.chainId)&&n.push(h)}return!t.matchedChain&&t.useSafeChainsListValidation&&(t.providerError?n.push(m):n.push(p)),n.length&&n.push(f),n},getValues:function(e,t,n,l,p){var m;const f="metamask"===e.origin,h=e.requestData.rpcUrl,g=t("addEthereumChainConfirmationTitle");return{content:[{hide:!f,element:"Box",key:"network-box",props:{textAlign:i.TextAlign.Center,display:i.Display.Flex,justifyContent:i.JustifyContent.center,marginTop:4,marginBottom:2},children:[{element:"Chip",key:"network-chip",props:{label:e.requestData.chainName,backgroundColor:i.BackgroundColor.backgroundAlternative,leftIconUrl:e.requestData.imageUrl}}]},{element:"Typography",key:"title",children:f?t("wantToAddThisNetwork"):g,props:{variant:i.TypographyVariant.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:t("addEthereumChainConfirmationDescription"),props:{variant:i.TypographyVariant.H7,align:"center",boxProps:{margin:f?[0,8,4]:[0,0,4]}}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"b",key:"bolded-text",props:{style:{display:f&&"-webkit-box"}},children:[`${t("addEthereumChainConfirmationRisks")} `,{hide:!f,element:"Tooltip",key:"tooltip-info",props:{position:"bottom",interactive:!0,trigger:"mouseenter",html:a.default.createElement("div",{style:{width:"180px",margin:"16px",textAlign:"left"}},t("someNetworksMayPoseSecurity")," ",a.default.createElement("a",{key:"zendesk_page_link",href:c.default.UNKNOWN_NETWORK,rel:"noreferrer",target:"_blank",style:{color:"var(--color-primary-default)"}},t("learnMoreUpperCase")))},children:[{element:"i",key:"info-circle",props:{className:"fas fa-info-circle",style:{marginLeft:"4px",color:"var(--color-icon-default)"}}}]}]},{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"addEthereumChainConfirmationRisksLearnMore",variables:[{element:"a",children:t("addEthereumChainConfirmationRisksLearnMoreLink"),key:"addEthereumChainConfirmationRisksLearnMoreLink",props:{href:c.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:i.TypographyVariant.H7,boxProps:{margin:f?[0,8]:0,display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center}}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("currencySymbol")]:t("currencySymbolDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("networkName")]:t("networkNameDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},warnings:{[t("networkURL")]:(0,d.isValidASCIIURL)(h)?undefined:t("networkUrlErrorWarning",[(0,d.toPunycodeURL)(h)]),[t("currencySymbol")]:p.currencySymbolWarning},dictionary:{[t("currencySymbol")]:e.requestData.ticker,[t("networkURL")]:null!==(m=h.toLowerCase())&&void 0!==m&&m.includes(`/v3/${s.infuraProjectId}`)?h.replace(`/v3/${s.infuraProjectId}`,"").toLowerCase():h.toLowerCase(),[t("chainId")]:parseInt(e.requestData.chainId,16),[t("networkName")]:e.requestData.chainName,[t("blockExplorerUrl")]:e.requestData.rpcPrefs.blockExplorerUrl},prefaceKeys:[t("networkName"),t("networkURL"),t("chainId"),t("currencySymbol")]}}],cancelText:t("cancel"),submitText:t("approveButtonText"),loadingText:t("addingCustomNetwork"),onSubmit:async()=>{let t;try{t=await(0,u.jsonRpcRequest)(h,"eth_chainId")}catch(e){return console.error(`Request for method 'eth_chainId on ${h} failed`),[E]}if(e.requestData.chainId!==t)return console.error(`Chain ID returned by RPC URL ${h} does not match ${t}`),[S];if(await n.resolvePendingApproval(e.id,e.requestData),f){const t=await n.upsertNetworkConfiguration({...e.requestData,nickname:e.requestData.chainName},{setActive:!1,source:e.requestData.source});await n.setNewNetworkAdded({networkConfigurationId:t,nickname:e.requestData.chainName}),l.push(o.DEFAULT_ROUTE)}return[]},onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!f}},getState:function(e){return 1===parseInt(e.requestData.chainId,16)?{useWarningModal:!0}:{}}};n.default=_}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/add-ethereum-chain.js"}],[6241,{"../../../../../shared/constants/metametrics":4954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,i){const{origin:o,snapName:c,requestData:u}=e,{snapSuggestedAccountName:d}=u,{trackEvent:l}=i,p=e=>{l({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:o,snap_name:c}})};return{content:[{element:"CreateNamedSnapAccount",key:"create-named-snap-account",props:{onActionComplete:async t=>{t.success?(p(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,t)):(p(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1))},snapSuggestedAccountName:d}}],loadingText:t("addingAccount"),hideSubmitButton:!0,onLoad:()=>p(r.MetaMetricsEventName.AddSnapAccountViewed)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-named-snap-account.js"}],[6242,{"../../../../../shared/constants/metametrics":4954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,i){const{origin:o,snapName:c}=e,{trackEvent:u}=i,d=e=>{u({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:o,snap_name:c}})},l=()=>{d(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"CreateSnapAccount",key:"create-snap-account",props:{snapId:o,snapName:c,onCancel:l}}],cancelText:t("cancel"),submitText:t("create"),onLoad:()=>d(r.MetaMetricsEventName.AddSnapAccountViewed),onSubmit:()=>{d(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:l}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-snap-account.js"}],[6243,{"../ResultTemplate":6231,"@metamask/controller-utils":1230},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultError),s={getValues:a.getValues.bind(a)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/error.js"}],[6244,{"../../../../../shared/constants/app":4942,"../../../../store/actions":6585,"./add-ethereum-chain":6240,"./create-named-snap-account":6241,"./create-snap-account":6242,"./error":6243,"./remove-snap-account":6245,"./smart-transaction-status-page":6246,"./snap-account-redirect":6247,"./snaps/snap-alert/snap-alert":6248,"./snaps/snap-confirmation/snap-confirmation":6249,"./snaps/snap-default/snap-default":6250,"./snaps/snap-prompt/snap-prompt":6251,"./success":6252,"./switch-ethereum-chain":6253,"@metamask/controller-utils":1230,lodash:4293},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=n.PRIORITY_APPROVAL_TEMPLATE_TYPES=void 0,n.getTemplateAlerts=async function(e,t){var n;const r=null===(n=_[e.type])||void 0===n?void 0:n.getAlerts,a=r?await r(e,t):[];if(!Array.isArray(a))throw new Error(`Template alerts must be an array, received: ${a}`);if(a.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${a}`);return a},n.getTemplateState=async function(e){var t;const n=(null===(t=_[e.type])||void 0===t?void 0:t.getState)??I,r=await n(e);if("object"!=typeof r||Array.isArray(r))throw new Error(`Template state must be an object, received: ${r}`);if(null===r||r===undefined)return{};return r},n.getTemplateValues=function(e,t,n,a,i,o){var c;const u=null===(c=_[e.type])||void 0===c?void 0:c.getValues;if(!u)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const d=function(e){return{rejectPendingApproval:(...t)=>e((0,s.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,s.resolvePendingApproval)(...t)),upsertNetworkConfiguration:(...t)=>e((0,s.upsertNetworkConfiguration)(...t)),setNewNetworkAdded:(...t)=>e((0,s.setNewNetworkAdded)(...t)),deleteInterface:(...t)=>e((0,s.deleteInterface)(...t))}}(n),l=u(e,t,d,a,i,o),p=(0,r.omit)(l,v),m=(0,r.pick)(l,v);if(p.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(p)}`);return m};var r=e("lodash"),a=e("@metamask/controller-utils"),s=e("../../../../store/actions"),i=e("../../../../../shared/constants/app"),o=E(e("./smart-transaction-status-page")),c=E(e("./create-snap-account")),u=E(e("./remove-snap-account")),d=E(e("./snap-account-redirect")),l=E(e("./create-named-snap-account")),p=E(e("./add-ethereum-chain")),m=E(e("./switch-ethereum-chain")),f=E(e("./success")),h=E(e("./error")),g=E(e("./snaps/snap-alert/snap-alert")),T=E(e("./snaps/snap-confirmation/snap-confirmation")),y=E(e("./snaps/snap-prompt/snap-prompt")),S=E(e("./snaps/snap-default/snap-default"));function E(e){return e&&e.__esModule?e:{default:e}}n.PRIORITY_APPROVAL_TEMPLATE_TYPES=[i.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage];const _={[a.ApprovalType.AddEthereumChain]:p.default,[a.ApprovalType.SwitchEthereumChain]:m.default,[a.ApprovalType.ResultSuccess]:f.default,[a.ApprovalType.ResultError]:h.default,[i.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage]:o.default,[a.ApprovalType.SnapDialogAlert]:g.default,[a.ApprovalType.SnapDialogConfirmation]:T.default,[a.ApprovalType.SnapDialogPrompt]:y.default,[a.ApprovalType.SnapDialogDefault]:S.default,[i.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation]:c.default,[i.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval]:u.default,[i.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount]:l.default,[i.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect]:d.default},v=(n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=Object.keys(_),["cancelText","content","onLoad","onCancel","onSubmit","networkDisplay","submitText","loadingText","hideSubmitButton"]);async function I(){return{}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/index.js"}],[6245,{"../../../../../shared/constants/metametrics":4954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,i){const{origin:o,snapName:c}=e,{publicAddress:u}=e.requestData,{trackEvent:d}=i,l=e=>{d({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:o,snap_name:c}})},p=()=>{l(r.MetaMetricsEventName.RemoveSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"RemoveSnapAccount",key:"remove-snap-account",props:{snapId:o,snapName:c,publicAddress:u,onCancel:p}}],cancelText:t("cancel"),submitText:t("remove"),onLoad:()=>l(r.MetaMetricsEventName.RemoveSnapAccountViewed),onSubmit:()=>{l(r.MetaMetricsEventName.RemoveSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:p}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/remove-snap-account.js"}],[6246,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n,r){const{id:a,requestState:s}=e;return{content:[{element:"SmartTransactionStatusPage",key:"smart-transaction-status-page",props:{requestState:s,onCloseExtension:()=>{n.resolvePendingApproval(a,!0)},onViewActivity:()=>{n.resolvePendingApproval(a,!0)}}}],hideSubmitButton:!0}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/smart-transaction-status-page.js"}],[6247,{"../../../../../shared/constants/metametrics":4954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,i){const{origin:o,snapName:c}=e,{url:u,message:d,isBlockedUrl:l}=e.requestData,{trackEvent:p}=i,m=e=>{p({event:e,category:r.MetaMetricsEventCategory.Transactions,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:o,snap_name:c}})},f=r=>u!==undefined&&null!==u&&u.length>0&&!1===l?{submitText:t("goToSite"),onSubmit:()=>{m(r),n.resolvePendingApproval(e.id,!0)}}:{};return{content:[{element:"SnapAccountRedirect",key:"snap-account-redirect",props:{url:u,message:d,snapId:o,snapName:c,isBlockedUrl:l,...f(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectSnapUrlClicked)}}],cancelText:t("close"),onLoad:()=>m(r.MetaMetricsEventName.SnapAccountTransactionFinalizeViewed),onCancel:()=>{m(r.MetaMetricsEventName.SnapAccountTransactionFinalizeClosed),n.resolvePendingApproval(e.id,!1)},...f(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectGoToSiteClicked)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snap-account-redirect.js"}],[6248,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{submitText:t("ok").toUpperCase(),onSubmit:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-alert/snap-alert.js"}],[6249,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("reject"),submitText:t("approveButtonText"),onSubmit:()=>{n.resolvePendingApproval(e.id,!0),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,!1),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-confirmation/snap-confirmation.js"}],[6250,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-default/snap-default.js"}],[6251,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("cancel"),submitText:t("submit"),onSubmit:t=>{n.resolvePendingApproval(e.id,t),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-prompt/snap-prompt.js"}],[6252,{"../ResultTemplate":6231,"@metamask/controller-utils":1230},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultSuccess),s={getValues:a.getValues.bind(a)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/success.js"}],[6253,{"../../../../helpers/constants/design-system":5878,"eth-rpc-errors":3720},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=e("../../../../helpers/constants/design-system");const s={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};const i={getAlerts:async function(e,t){const n=[];return t.unapprovedTxsCount>0&&n.push(s),n},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TypographyVariant.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TypographyVariant.H7,color:a.TextColor.textAlternative,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:a.JustifyContent.center},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{toNetwork:e.requestData.toNetworkConfiguration,fromNetwork:e.requestData.fromNetworkConfiguration}}}],cancelText:t("cancel"),submitText:t("switchNetwork"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData.toNetworkConfiguration),onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=i}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/switch-ethereum-chain.js"}],[6254,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined?undefined:"string"==typeof e?e:Array.isArray(e)?e.map(r):{key:e.key,element:e.name,props:e.properties,children:r(e.children)}}Object.defineProperty(n,"__esModule",{value:!0}),n.processError=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return{key:"error",element:"ActionableMessage",props:{type:"danger",message:n}}},n.processHeader=function(e){return r(e)},n.processString=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return a=n,function(e,t,n){let r=0,a=0;const s=Array.from(e.matchAll(t)),i=[];for(const t of s){const s=e.substring(r,t.index);s.length&&i.push(s);const o=n(t[1],a);i.push(o),r=t.index+t[0].length,a+=1}const o=e.substring(r);return o.length&&i.push(o),i}(a,/\*\*(.+?)\*\*/gu,((e,t)=>({key:`bold-${t}`,element:"b",children:e})));var a}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/util.ts"}],[6255,{"../../../../shared/constants/network":4958},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TYPED_SIGNATURE_VERSIONS=n.IGNORE_GAS_LIMIT_CHAIN_IDS=void 0;var r=e("../../../../shared/constants/network");n.IGNORE_GAS_LIMIT_CHAIN_IDS=[r.CHAINLIST_CHAIN_IDS_MAP.MANTLE],n.TYPED_SIGNATURE_VERSIONS={V1:"V1",V3:"V3",V4:"V4"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/index.ts"}],[63,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(e.includes(r)){const t=e.slice(r.length);return t.slice(t.indexOf(a)+a.length)}return e};const r="Error: [ethjs-rpc] rpc error with payload ",a="Error: "}}},{package:"$root$",file:"app/scripts/lib/extractEthjsErrorMessage.js"}],[6302,{"../../../selectors/approvals":6568,"../../../selectors/selectors":6580,"../../../selectors/util":6583,"../utils":6312,"@metamask/controller-utils":1230,reselect:4716},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentSignatureRequestSecurityResponseSelector=n.currentConfirmationSelector=n.confirmSelector=void 0,n.getIsRedesignedConfirmationsDeveloperEnabled=function(e){return(0,c.getPreferences)(e).isRedesignedConfirmationsDeveloperEnabled},n.latestPendingConfirmationSelector=void 0,n.pendingConfirmationsSelector=function(e){return(0,s.getPendingApprovals)(e).filter((({type:e})=>u.includes(e)))},n.pendingConfirmationsSortedSelector=d;var r=e("@metamask/controller-utils"),a=e("reselect"),s=e("../../../selectors/approvals"),i=e("../../../selectors/util"),o=e("../utils"),c=e("../../../selectors/selectors");const u=[r.ApprovalType.PersonalSign,r.ApprovalType.EthSignTypedData,r.ApprovalType.Transaction];function d(e){return(0,s.getPendingApprovals)(e).filter((({type:e})=>u.includes(e))).sort(((e,t)=>e.time-t.time))}const l=(0,a.createSelector)(d,(e=>e.sort(((e,t)=>t.time-e.time))[0]));n.latestPendingConfirmationSelector=(0,i.createDeepEqualSelector)(l,(e=>e));n.confirmSelector=e=>e.confirm;const p=e=>e.confirm.currentConfirmation;n.currentConfirmationSelector=p;n.currentSignatureRequestSecurityResponseSelector=e=>{var t,n;const r=p(e);if(!r||!(0,o.isSignatureTransactionType)(r))return undefined;const a=null==r||null===(t=r.securityAlertResponse)||void 0===t?void 0:t.securityAlertId;return null===(n=e.metamask.signatureSecurityAlertResponses)||void 0===n?void 0:n[a]}}}},{package:"$root$",file:"ui/pages/confirmations/selectors/confirm.ts"}],[6308,{"../../../../shared/constants/common":4944,"../../../../shared/constants/gas":4949,"../../../../shared/modules/Numeric":4987},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.SWAPS_QUOTES_ERROR=n.SWAPS_NO_QUOTES=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NO_RESOLUTION_FOR_DOMAIN=n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.FLOAT_TOKENS_ERROR=n.ENS_UNKNOWN_ERROR=n.ENS_REGISTRATION_ERROR=n.ENS_NO_ADDRESS_FOR_NAME=n.ENS_NOT_FOUND_ON_NETWORK=n.ENS_ILLEGAL_CHARACTER=n.DOMAIN_NOT_SUPPORTED_ON_NETWORK=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=void 0;var r=e("../../../../shared/constants/gas"),a=e("../../../../shared/modules/Numeric"),s=e("../../../../shared/constants/common");const i=n.MIN_GAS_PRICE_DEC="0",o=n.MIN_GAS_PRICE_HEX=parseInt(i,10).toString(16);n.MIN_GAS_LIMIT_DEC=new a.Numeric("21000",10),n.MAX_GAS_LIMIT_DEC="7920027",n.HIGH_FEE_WARNING_MULTIPLIER=1.5,n.MIN_GAS_PRICE_GWEI=new a.Numeric(o,16,s.EtherDenomination.WEI).toDenomination(s.EtherDenomination.GWEI).round(1).toPrefixedHexString(),n.MIN_GAS_TOTAL=new a.Numeric(r.MIN_GAS_LIMIT_HEX,16).times(new a.Numeric(o,16,s.EtherDenomination.WEI)).toPrefixedHexString(),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb",n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd",n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE="0xf242432a",n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR="insufficientFundsForGas",n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens",n.NEGATIVE_ETH_ERROR="negativeETH",n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR="negativeOrZeroAmountToken",n.FLOAT_TOKENS_ERROR="floatAmountToken",n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient",n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR="invalidAddressRecipientNotEthNetwork",n.REQUIRED_ERROR="required",n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient",n.CONTRACT_ADDRESS_ERROR="contractAddressError",n.CONFUSING_ENS_ERROR="confusingEnsDomain",n.ENS_NO_ADDRESS_FOR_NAME="noAddressForName",n.ENS_NOT_FOUND_ON_NETWORK="ensNotFoundOnCurrentNetwork",n.ENS_ILLEGAL_CHARACTER="ensIllegalCharacter",n.ENS_UNKNOWN_ERROR="ensUnknownError",n.ENS_REGISTRATION_ERROR="ensRegistrationError",n.DOMAIN_NOT_SUPPORTED_ON_NETWORK="domainNotSupportedOnNetwork",n.NO_RESOLUTION_FOR_DOMAIN="noDomainResolution",n.SWAPS_NO_QUOTES="swapQuotesNotAvailableErrorTitle",n.SWAPS_QUOTES_ERROR="swapFetchingQuotesErrorTitle",n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.constants.js"}],[6309,{"../../../../app/scripts/lib/util":117,"../../../../shared/constants/transaction":4972,"../../../../shared/modules/Numeric":4987,"./send.constants":6308,"@metamask/abi-utils":1074},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=new i.Numeric(e,16),a=new i.Numeric(t,16).times(new i.Numeric(.9,10)).round(0),s=r.times(new i.Numeric(n,10)).round(0);if(r.greaterThanOrEqualTo(a))return e;if(s.lessThan(a))return s.toString();return a.toString()},n.ellipsify=function(e,t=6,n=4){if(!e)return"";return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC1155TransferData=d,n.generateERC20TransferData=c,n.generateERC721TransferData=u,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case s.TokenStandard.ERC721:return u({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC1155:return d({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC20:default:return c({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a=undefined}){let s=new i.Numeric(e,16).add(new i.Numeric(r,16)),o=new i.Numeric(t,16);null!=a&&(s=s.applyConversionRate(n),o=o.applyConversionRate(n));return o.greaterThanOrEqualTo(s)},n.isERC1155BalanceSufficient=function({amount:e="0",tokenBalance:t}){const n=new i.Numeric(e,16);return new i.Numeric(t,10).greaterThanOrEqualTo(n)},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=new i.Numeric(e,16).shiftedBy(n);return new i.Numeric(t,16).greaterThanOrEqualTo(r)};var r=e("@metamask/abi-utils"),a=e("../../../../app/scripts/lib/util"),s=e("../../../../shared/constants/transaction"),i=e("../../../../shared/modules/Numeric"),o=e("./send.constants");function c({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?o.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","uint256"],[(0,a.addHexPrefix)(e),(0,a.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function u({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?o.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function d({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n,amount:s="1",data:i="0"}){return n?o.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256","uint256","bytes"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n),(0,a.addHexPrefix)(s),(0,a.addHexPrefix)(i)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.utils.js"}],[6311,{"../../../../shared/constants/signatures":4965,"../../../../shared/modules/transaction.utils":5015,"../../../helpers/utils/util":5926,"../constants":6255,"@metamask/controller-utils":1230,"@metamask/transaction-controller":2623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toPunycodeURL=n.parseSanitizeTypedDataMessage=n.isValidASCIIURL=n.isSignatureTransactionType=n.isSignatureApprovalRequest=n.isSIWESignatureRequest=n.isPermitSignatureRequest=n.isOrderSignatureRequest=n.SIGNATURE_TRANSACTION_TYPES=n.REDESIGN_USER_TRANSACTION_TYPES=n.REDESIGN_DEV_TRANSACTION_TYPES=n.REDESIGN_APPROVAL_TYPES=void 0;var r=e("@metamask/controller-utils"),a=e("@metamask/transaction-controller"),s=e("../../../../shared/constants/signatures"),i=e("../../../../shared/modules/transaction.utils"),o=e("../../../helpers/utils/util"),c=e("../constants");n.REDESIGN_APPROVAL_TYPES=[r.ApprovalType.EthSignTypedData,r.ApprovalType.PersonalSign];const u=n.REDESIGN_USER_TRANSACTION_TYPES=[a.TransactionType.contractInteraction,a.TransactionType.deployContract],d=(n.REDESIGN_DEV_TRANSACTION_TYPES=[...u,a.TransactionType.tokenMethodApprove],[r.ApprovalType.PersonalSign,r.ApprovalType.EthSignTypedData]);n.isSignatureApprovalRequest=e=>d.includes(e.type);const l=n.SIGNATURE_TRANSACTION_TYPES=[a.TransactionType.personalSign,a.TransactionType.signTypedData],p=e=>e&&l.includes(e.type);n.isSignatureTransactionType=p;n.parseSanitizeTypedDataMessage=e=>{const{message:t,primaryType:n,types:r}=(0,i.parseTypedDataMessage)(e);return{sanitizedMessage:(0,o.sanitizeMessage)(t,n,r),primaryType:n}};n.isSIWESignatureRequest=e=>{var t;return Boolean(null==e||null===(t=e.msgParams)||void 0===t||null===(t=t.siwe)||void 0===t?void 0:t.isSIWEMessage)};n.isOrderSignatureRequest=e=>{var t,n;if(!e||!p(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===c.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:r}=(0,i.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return s.PRIMARY_TYPES_ORDER.includes(r)};n.isPermitSignatureRequest=e=>{var t,n;if(!e||!p(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===c.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:r}=(0,i.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return s.PRIMARY_TYPES_PERMIT.includes(r)};n.isValidASCIIURL=e=>{try{return null==e?void 0:e.includes(new URL(e).host)}catch(e){return console.error(e),!1}};n.toPunycodeURL=e=>{try{return new URL(e).href}catch(e){return console.error(`Failed to convert URL to Punycode: ${e}`),undefined}}}}},{package:"$root$",file:"ui/pages/confirmations/utils/confirm.ts"}],[6312,{"./confirm":6311},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./confirm");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}))}}},{package:"$root$",file:"ui/pages/confirmations/utils/index.ts"}],[64,{"../../_locales/index.json":3,"webextension-polyfill":4921},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(){let e;try{e=await r.default.i18n.getAcceptLanguages()}catch(t){e=[]}e||(e=[]);let t=e.map((e=>e.toLowerCase().replace("_","-"))).find((e=>i[e]!==undefined||i[e.split("-")[0]]!==undefined));t!==undefined&&i[t]===undefined&&(t=t.split("-")[0]);return i[t]||"en"};var r=s(e("webextension-polyfill")),a=s(e("../../_locales/index.json"));function s(e){return e&&e.__esModule?e:{default:e}}const i={zh:"zh_CN"};a.default.forEach((e=>{e&&e.code&&(i[e.code.toLowerCase().replace("_","-")]=e.code)}))}}},{package:"$root$",file:"app/scripts/lib/get-first-preferred-lang-code.js"}],[6552,{"../../../shared/constants/common":4944,"../../../shared/constants/network":4958,"../../../shared/constants/swaps":4968,"../../../shared/lib/fetch-with-cache":4976,"../../../shared/lib/swaps-utils":4981,"../../../shared/lib/transactions-controller-utils":4985,"../../../shared/modules/conversion.utils":4992,"../../../shared/modules/hexstring-utils":4999,"../../../shared/modules/swaps.utils":5014,"../../helpers/utils/confirm-tx.util":5905,"bignumber.js":3401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=n.StxErrorTypes=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:h},functionName:"fetchAggregatorMetadata"}),r={};for(const e in n)(0,p.validateData)(E,n[e],t)&&(r[e]=n[e]);return r},n.fetchBlockedTokens=async function(e){const t=(0,p.getBaseApi)("blockedTokens",e);return await(0,u.default)({url:`${t}`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:h},functionName:"fetchBlockedTokens"})},n.fetchSwapsFeatureFlags=async function(){const e=s.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},n.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(v,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:s}=n;return{safeLow:r,average:a,fast:s}},n.fetchToken=async function(e,t){const n=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${n}?address=${e}`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:h},functionName:"fetchToken"})},n.fetchTokenPrice=async function(e){var t;const n=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,r=await(0,u.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${n}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==r||null===(t=r[e])||void 0===t?void 0:t.eth},n.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:h},functionName:"fetchTokens"});return[s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...n.filter((n=>(0,p.validateData)(y,n,t,false)&&!((0,i.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,i.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=(0,p.getBaseApi)("topAssets",e),n=await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:h}})||[];return n.reduce(((e,n,r)=>(0,p.validateData)(S,n,t)?{...e,[n.address]:{index:String(r)}}:e),{})},n.formatSwapsValueForDisplay=w,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getClassNameForCharLength=void 0,n.getRenderableNetworkFeesForQuote=A,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=n.getSwapsLivenessForNetwork=void 0,n.quotesToRenderableData=function({quotes:e,gasPrice:t,conversionRate:n,currentCurrency:r,approveGas:s,tokenConversionRates:o,chainId:c,smartTransactionEstimatedGas:u,nativeCurrencySymbol:d,multiLayerL1ApprovalFeeTotal:p}){return Object.values(e).map((e=>{const{destinationAmount:f=0,sourceAmount:h=0,sourceTokenInfo:g,destinationTokenInfo:T,slippage:y,aggType:S,aggregator:E,gasEstimateWithRefund:_,averageGas:v,fee:R,trade:C,multiLayerL1TradeFeeTotal:N}=e;let b=null;null!==N&&null!==p?b=(0,m.sumHexes)(N||"0x0",p||"0x0"):null!==N&&(b=N);const O=(0,l.calcTokenAmount)(h,g.decimals).toString(10),k=(0,l.calcTokenAmount)(f,T.decimals).toPrecision(8);let D=null,P=null,M=null,x=null;({feeInFiat:D,feeInEth:P,rawNetworkFees:M,rawEthFee:x}=A({tradeGas:_||(0,m.decimalToHex)(v||8e5),approveGas:s,gasPrice:t,currentCurrency:r,conversionRate:n,tradeValue:C.value,sourceSymbol:g.symbol,sourceAmount:h,chainId:c,multiLayerL1FeeTotal:b})),u&&({feeInFiat:D,feeInEth:P}=I({chainId:c,currentCurrency:r,conversionRate:n,nativeCurrencySymbol:d,feeInWeiDec:u.feeEstimate}));const F=new a.BigNumber(100-y).div(100),U=new a.BigNumber(k).times(F).toFixed(6),L=o[T.address],G=(0,i.isSwapsDefaultTokenSymbol)(T.symbol,c)?(0,l.calcTokenAmount)(f,T.decimals).minus(x,10):new a.BigNumber(L||0,10).times((0,l.calcTokenAmount)(f,T.decimals),10).minus(x,10);let B,H=y;return"AGG"===S?B="swapAggregator":"RFQ"===S?(B="swapRequestForQuotation",H=0):B="DEX"===S?"swapDecentralizedExchange":"CONTRACT"===S?"swapDirectContract":"swapUnknown",{aggId:E,amountReceiving:`${k} ${T.symbol}`,destinationTokenDecimals:T.decimals,destinationTokenSymbol:T.symbol,destinationTokenValue:w(k),destinationIconUrl:T.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:B,feeInEth:P,detailedNetworkFees:`${P} (${D})`,networkFees:D,quoteSource:S,rawNetworkFees:M,slippage:H,sourceTokenDecimals:g.decimals,sourceTokenSymbol:g.symbol,sourceTokenValue:O,sourceTokenIconUrl:g.iconUrl,ethValueOfTrade:G,minimumAmountReceived:U,metaMaskFee:R}}))},n.showRemainingTimeInMinAndSec=void 0;var r,a=e("bignumber.js"),s=e("../../../shared/constants/swaps"),i=e("../../../shared/modules/swaps.utils"),o=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},d=e("../../../shared/modules/hexstring-utils"),l=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),f=e("../../../shared/constants/common");const h=3e5,g="usd",T={"X-Client-Id":s.SWAPS_CLIENT_ID},y=[{property:"address",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],S=y.slice(0,2),E=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],_=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),v=[{property:"SafeGasPrice",type:"string",validator:_},{property:"ProposeGasPrice",type:"string",validator:_},{property:"FastGasPrice",type:"string",validator:_}];const I=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:r,nativeCurrencySymbol:a,feeInWeiDec:i})=>{var o;const u=(0,m.decimalToHex)(i),d=(0,m.getValueFromWeiHex)({value:u,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),l=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:n,numberOfDecimals:2});let p;p=t===g?l:(0,m.getValueFromWeiHex)({value:u,toCurrency:g,conversionRate:r,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,c.formatCurrency)(l,t),feeInEth:`${d} ${a||(null===(o=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===o?void 0:o.symbol)}`,rawEthFee:d}};function A({tradeGas:e,approveGas:t,gasPrice:n,currentCurrency:r,conversionRate:o,USDConversionRate:u,tradeValue:d,sourceSymbol:p,sourceAmount:h,chainId:T,nativeCurrencySymbol:y,multiLayerL1FeeTotal:S}){const E=new a.BigNumber(e||"0x0",16).plus(t||"0x0",16).toString(16);let _=(0,l.calcGasTotal)(E,n);null!==S&&(_=(0,m.sumHexes)(_||"0x0",S||"0x0"));const v=new a.BigNumber(d,16).minus((0,i.isSwapsDefaultTokenSymbol)(p,T)?h:0,10).toString(16),I=new a.BigNumber(_,16).plus(v,16).toString(16),A=(0,m.getValueFromWeiHex)({value:I,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),w=(0,m.getValueFromWeiHex)({value:I,toCurrency:r,conversionRate:o,numberOfDecimals:2}),R=(0,c.formatCurrency)(w,r);let C;C=r===g?w:(0,m.getValueFromWeiHex)({value:I,toCurrency:g,conversionRate:u,numberOfDecimals:2});return{rawNetworkFees:w,feeInUsd:C,rawEthFee:A,feeInFiat:R,feeInEth:`${A} ${y||s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[T].symbol}`,nonGasFee:v}}function w(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,l.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new a.BigNumber(t).toFixed()),t}n.getFeeForSmartTransaction=I;n.getClassNameForCharLength=(e,t)=>{let n;return n=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${n}`};n.isContractAddressValid=(e,t)=>!(!e||!s.ALLOWED_CONTRACT_ADDRESSES[t])&&s.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const R=e=>{switch(e){case o.CHAIN_IDS.MAINNET:return s.ETHEREUM;case o.CHAIN_IDS.BSC:return s.BSC;case o.CHAIN_IDS.POLYGON:return s.POLYGON;case o.CHAIN_IDS.GOERLI:return s.GOERLI;case o.CHAIN_IDS.AVALANCHE:return s.AVALANCHE;case o.CHAIN_IDS.OPTIMISM:return s.OPTIMISM;case o.CHAIN_IDS.ARBITRUM:return s.ARBITRUM;case o.CHAIN_IDS.ZKSYNC_ERA:return s.ZKSYNC_ERA;case o.CHAIN_IDS.LINEA_MAINNET:return s.LINEA;case o.CHAIN_IDS.BASE:return s.BASE;default:return""}};n.getNetworkNameByChainId=R;n.getSwapsLivenessForNetwork=(e,t={})=>{const n=R(e);if([o.CHAIN_IDS.LOCALHOST,o.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[n])return{swapsFeatureIsLive:!1};return t[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let C=n.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case C.unavailable:case C.regularTxPending:return t("smartSwapsErrorUnavailable");case C.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[6568,{"./util":6583,reselect:4716},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalFlows=function(e){return e.metamask.approvalFlows},n.getApprovalRequestsByType=void 0,n.getPendingApprovals=s,n.hasPendingApprovals=function(e,t,n){const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(n)return r.some(n);return r.length>0},n.pendingApprovalsSortedSelector=function(e){return s(e).sort(((e,t)=>e.time-t.time))},n.selectPendingApproval=void 0;var r=e("reselect"),a=e("./util");function s(e){return Object.values(e.metamask.pendingApprovals??[])}n.getApprovalRequestsByType=(e,t,n)=>{const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return n?r.filter(n):r};const i=(0,r.createSelector)(s,((e,t)=>t),((e,t)=>e.find((({id:e})=>e===t))));n.selectPendingApproval=(0,a.createDeepEqualSelector)(i,(e=>e))}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[6569,{"../../shared/constants/gas":4949,"../../shared/lib/transactions-controller-utils":4985,"../../shared/modules/conversion.utils":4992,"../../shared/modules/gas.utils":4998,"../../shared/modules/string-utils":5013,"../ducks/metamask/metamask":5866,"../helpers/utils/confirm-tx.util":5905,"../helpers/utils/tx-helper":5925,"./custom-gas":6570,"./selectors":6580,"./transactions":6582,"@metamask/transaction-controller":2623,reselect:4716},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0,n.selectIsMaxValueEnabled=D,n.selectMaxValue=void 0,n.selectTransactionAvailableBalance=k,n.selectTransactionFeeById=O,n.use4ByteResolutionSelector=n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.selectTransactionValue=void 0;var r,a=e("reselect"),s=e("@metamask/transaction-controller"),i=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},o=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),d=e("../../shared/modules/gas.utils"),l=e("../../shared/modules/string-utils"),p=e("../../shared/lib/transactions-controller-utils"),m=e("../../shared/modules/conversion.utils"),f=e("./custom-gas"),h=e("./selectors"),g=e("./transactions");const T=e=>(0,g.getUnapprovedTransactions)(e),y=e=>e.metamask.unapprovedPersonalMsgs,S=e=>e.metamask.unapprovedDecryptMsgs,E=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,_=e=>e.metamask.unapprovedTypedMessages;n.unconfirmedTransactionsListSelector=(0,a.createSelector)(T,y,S,E,_,h.getCurrentChainId,((e={},t={},n={},r={},a={},s)=>(0,i.default)(e,t,n,r,a,s)||[])),n.unconfirmedTransactionsHashSelector=(0,a.createSelector)(T,y,S,E,_,h.getCurrentChainId,((e={},t={},n={},r={},a={},s)=>({...Object.keys(e).reduce(((t,n)=>{const r={...t};return e[n].chainId===s&&(r[n]=e[n]),r}),{}),...t,...n,...r,...a}))),n.unconfirmedMessagesHashSelector=(0,a.createSelector)(y,S,E,_,((e={},t={},n={},r={})=>({...e,...t,...n,...r})));n.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const v=e=>e.metamask.currentCurrency;n.currentCurrencySelector=v;const I=e=>{var t;return null===(t=e.metamask.currencyRates[(0,c.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};n.conversionRateSelector=I;const A=e=>e.confirmTransaction.txData;n.txDataSelector=A;const w=(0,a.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),R=(0,a.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),C=(0,a.createSelector)(A,(e=>e&&e.txParams||{})),N=n.tokenAddressSelector=(0,a.createSelector)(C,(e=>e&&e.to)),b=(n.sendTokenTokenAmountAndToAddressSelector=(0,a.createSelector)(R,w,((e,t)=>{let n="",r="0";if(e&&e.length){n=e._to;let a=e._value.toString();t&&(a=(0,p.calcTokenAmount)(a,t).toFixed()),r=(0,o.roundExponential)(a)}return{toAddress:n,tokenAmount:r}})),n.contractExchangeRateSelector=(0,a.createSelector)((e=>(0,h.getTokenExchangeRates)(e)),N,((e,t)=>e[Object.keys(e).find((e=>(0,l.isEqualCaseInsensitive)(e,t)))])),function(e,t){var n,r,a,i;const l=v(e),p=I(e),g=(0,c.getNativeCurrency)(e),T=(0,c.getGasFeeEstimates)(e)||{},y=(0,c.getGasEstimateType)(e),S=(0,h.checkNetworkAndAccountSupports1559)(e),E={gasLimit:(null===(n=t.txParams)||void 0===n?void 0:n.gas)??"0x0"};if(S){var _;const{gasPrice:e="0"}=T,n=T[t.userFeeLevel]||{};if((null===(_=t.txParams)||void 0===_?void 0:_.type)===s.TransactionEnvelopeType.legacy){var A;E.gasPrice=(null===(A=t.txParams)||void 0===A?void 0:A.gasPrice)??(0,m.decGWEIToHexWEI)(e)}else{var w,R,C,N;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;E.maxFeePerGas=null===(w=t.txParams)||void 0===w||!w.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&a?(0,m.decGWEIToHexWEI)(a||e):null===(R=t.txParams)||void 0===R?void 0:R.maxFeePerGas,E.maxPriorityFeePerGas=null===(C=t.txParams)||void 0===C||!C.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?r&&(0,m.decGWEIToHexWEI)(r)||E.maxFeePerGas:null===(N=t.txParams)||void 0===N?void 0:N.maxPriorityFeePerGas,E.baseFeePerGas=(0,m.decGWEIToHexWEI)(T.estimatedBaseFee)}}else switch(y){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:E.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:E.gasPrice=(null===(a=t.txParams)||void 0===a?void 0:a.gasPrice)??(0,m.decGWEIToHexWEI)(T.gasPrice);break;case u.GasEstimateTypes.legacy:E.gasPrice=(null===(i=t.txParams)||void 0===i?void 0:i.gasPrice)??(0,f.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:b="0x0"}={}}=t,O=(0,m.getValueFromWeiHex)({value:b,fromCurrency:g,toCurrency:l,conversionRate:p,numberOfDecimals:2}),k=(0,m.getValueFromWeiHex)({value:b,fromCurrency:g,toCurrency:g,conversionRate:p,numberOfDecimals:6}),D=(0,d.getMinimumGasTotalInHexWei)(E),P=(0,d.getMaximumGasTotalInHexWei)(E),M=(0,o.getTransactionFee)({value:D,fromCurrency:g,toCurrency:l,numberOfDecimals:2,conversionRate:p}),x=(0,o.getTransactionFee)({value:P,fromCurrency:g,toCurrency:l,numberOfDecimals:2,conversionRate:p}),F=(0,o.getTransactionFee)({value:D,fromCurrency:g,toCurrency:g,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:b,fiatTransactionAmount:O,ethTransactionAmount:k,hexMinimumTransactionFee:D,fiatMinimumTransactionFee:M,hexMaximumTransactionFee:P,fiatMaximumTransactionFee:x,ethTransactionFee:F,fiatTransactionTotal:(0,o.addFiat)(M,O),ethTransactionTotal:(0,o.addEth)(F,k),hexTransactionTotal:(0,m.sumHexes)(b,D),gasEstimationObject:E}});function O(e,t){const n=(0,g.selectTransactionMetadata)(e,t);return b(e,n??{})}function k(e,t){var n;return null===(n=(0,h.getMetaMaskAccounts)(e)[(0,g.selectTransactionSender)(e,t)])||void 0===n?void 0:n.balance}function D(e,t){var n;return(null===(n=e.confirmTransaction.maxValueMode)||void 0===n?void 0:n[t])??!1}n.transactionFeeSelector=b;const P=n.selectMaxValue=(0,a.createSelector)(O,k,((e,t)=>t&&e.hexMaximumTransactionFee?(0,m.subtractHexes)(t,e.hexMaximumTransactionFee):undefined));n.selectTransactionValue=(0,a.createSelector)(D,P,g.selectTransactionMetadata,((e,t,n)=>{var r;return e?t:null==n||null===(r=n.txParams)||void 0===r?void 0:r.value}))}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[6570,{".":6572,"../../app/scripts/lib/util":117,"../../shared/constants/common":4944,"../../shared/constants/gas":4949,"../../shared/lib/transactions-controller-utils":4985,"../../shared/modules/Numeric":4987,"../../shared/modules/conversion.utils":4992,"../ducks/metamask/metamask":5866,"../ducks/send":5871,"../helpers/utils/confirm-tx.util":5905,"../helpers/utils/formatters":5908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=y,n.getAverageEstimate=g,n.getAveragePriceEstimateInHexWEI=function(e){return E(g(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===_(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=f,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=T,n.getFastPriceEstimateInHexWEI=function(e){return E(T(e)||"0x0")},n.getGasPriceInHexWei=E,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},n.getIsGasEstimatesFetched=_,n.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.none},n.getRenderableConvertedCurrencyFee=function(e,t,n,r){const i=y(new l.Numeric(e,10).toBase(16).toString(),t),o=(0,a.decEthToConvertedCurrency)(i,n,r);return(0,s.formatCurrency)(o,n)},n.getRenderableEthFee=function(e,t,n=9,r="ETH"){const a=y(new l.Numeric(e,10).toBase(16).toString(),t,n);return(0,i.formatETHFee)(a,r)},n.getSafeLowEstimate=h,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,o.getGasPrice)(e):f(e),r=T(e);if(!n||!r)return!1;return new l.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*r),10)},n.isCustomPriceSafe=function(e){const t=h(e),n=f(e);if(!n)return!0;if(!t)return!1;return new l.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.isCustomPriceSafeForCustomNetwork=function(e){const t=g(e),n=f(e);if(!n)return!0;if(!t)return!1;return new l.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.priceEstimateToWei=S;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),s=e("../helpers/utils/confirm-tx.util"),i=e("../helpers/utils/formatters"),o=e("../ducks/send"),c=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),d=e("../../shared/lib/transactions-controller-utils"),l=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e(".");function f(e){return e.gas.customData.price}function h(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function g(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function T(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function y(e,t,n=9){return new l.Numeric((0,d.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(n).toBase(10).toString()}function S(e){return new l.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function E(e){const t=new l.Numeric(e,10).toBase(16).toString();return(0,r.addHexPrefix)(S(t))}function _(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}]],[],{});